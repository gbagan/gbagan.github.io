(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();const _n=(e,n)=>e===n,q=Symbol("solid-proxy"),fe=Symbol("solid-track"),de={equals:_n};let xn=rn;const U=1,he=2,Ze={owned:null,cleanups:null,context:null,owner:null};var v=null;let Ee=null,Cn=null,m=null,A=null,H=null,_e=0;function X(e,n){const t=m,i=v,l=e.length===0,r=n===void 0?i:n,o=l?Ze:{owned:null,cleanups:null,context:r?r.context:null,owner:r},s=l?e:()=>e(()=>I(()=>le(o)));v=o,m=null;try{return z(s,!0)}finally{m=t,v=i}}function te(e,n){n=n?Object.assign({},de,n):de;const t={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},i=l=>(typeof l=="function"&&(l=l(t.value)),nn(t,l));return[en.bind(t),i]}function Sn(e,n,t){const i=Ye(e,n,!0,U);ce(i)}function M(e,n,t){const i=Ye(e,n,!1,U);ce(i)}function C(e,n,t){t=t?Object.assign({},de,t):de;const i=Ye(e,n,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=t.equals||void 0,ce(i),en.bind(i)}function De(e){return z(e,!1)}function I(e){if(m===null)return e();const n=m;m=null;try{return e()}finally{m=n}}function Je(e){return v===null||(v.cleanups===null?v.cleanups=[e]:v.cleanups.push(e)),e}function Ne(){return m}function An(e){const n=m,t=v;return Promise.resolve().then(()=>{m=n,v=t;let i;return z(e,!1),m=v=null,i?i.done:void 0})}const[On,ni]=te(!1);function Pn(){return[On,An]}function en(){if(this.sources&&this.state)if(this.state===U)ce(this);else{const e=A;A=null,z(()=>ge(this),!1),A=e}if(m){const e=this.observers?this.observers.length:0;m.sources?(m.sources.push(this),m.sourceSlots.push(e)):(m.sources=[this],m.sourceSlots=[e]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])}return this.value}function nn(e,n,t){let i=e.value;return(!e.comparator||!e.comparator(i,n))&&(e.value=n,e.observers&&e.observers.length&&z(()=>{for(let l=0;l<e.observers.length;l+=1){const r=e.observers[l],o=Ee&&Ee.running;o&&Ee.disposed.has(r),(o?!r.tState:!r.state)&&(r.pure?A.push(r):H.push(r),r.observers&&ln(r)),o||(r.state=U)}if(A.length>1e6)throw A=[],new Error},!1)),n}function ce(e){if(!e.fn)return;le(e);const n=_e;En(e,e.value,n)}function En(e,n,t){let i;const l=v,r=m;m=v=e;try{i=e.fn(n)}catch(o){return e.pure&&(e.state=U,e.owned&&e.owned.forEach(le),e.owned=null),e.updatedAt=t+1,sn(o)}finally{m=r,v=l}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?nn(e,i):e.value=i,e.updatedAt=t)}function Ye(e,n,t,i=U,l){const r={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:v,context:v?v.context:null,pure:t};return v===null||v!==Ze&&(v.owned?v.owned.push(r):v.owned=[r]),r}function tn(e){if(e.state===0)return;if(e.state===he)return ge(e);if(e.suspense&&I(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<_e);)e.state&&n.push(e);for(let t=n.length-1;t>=0;t--)if(e=n[t],e.state===U)ce(e);else if(e.state===he){const i=A;A=null,z(()=>ge(e,n[0]),!1),A=i}}function z(e,n){if(A)return e();let t=!1;n||(A=[]),H?t=!0:H=[],_e++;try{const i=e();return Ln(t),i}catch(i){t||(H=null),A=null,sn(i)}}function Ln(e){if(A&&(rn(A),A=null),e)return;const n=H;H=null,n.length&&z(()=>xn(n),!1)}function rn(e){for(let n=0;n<e.length;n++)tn(e[n])}function ge(e,n){e.state=0;for(let t=0;t<e.sources.length;t+=1){const i=e.sources[t];if(i.sources){const l=i.state;l===U?i!==n&&(!i.updatedAt||i.updatedAt<_e)&&tn(i):l===he&&ge(i,n)}}}function ln(e){for(let n=0;n<e.observers.length;n+=1){const t=e.observers[n];t.state||(t.state=he,t.pure?A.push(t):H.push(t),t.observers&&ln(t))}}function le(e){let n;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),l=t.observers;if(l&&l.length){const r=l.pop(),o=t.observerSlots.pop();i<l.length&&(r.sourceSlots[o]=i,l[i]=r,t.observerSlots[i]=o)}}if(e.tOwned){for(n=e.tOwned.length-1;n>=0;n--)le(e.tOwned[n]);delete e.tOwned}if(e.owned){for(n=e.owned.length-1;n>=0;n--)le(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}e.state=0}function Tn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function sn(e,n=v){throw Tn(e)}const Re=Symbol("fallback");function pe(e){for(let n=0;n<e.length;n++)e[n]()}function Dn(e,n,t={}){let i=[],l=[],r=[],o=0,s=n.length>1?[]:null;return Je(()=>pe(r)),()=>{let u=e()||[],a=u.length,d,f;return u[fe],I(()=>{let p,c,h,y,x,k,$,w,_;if(a===0)o!==0&&(pe(r),r=[],i=[],l=[],o=0,s&&(s=[])),t.fallback&&(i=[Re],l[0]=X(E=>(r[0]=E,t.fallback())),o=1);else if(o===0){for(l=new Array(a),f=0;f<a;f++)i[f]=u[f],l[f]=X(g);o=a}else{for(h=new Array(a),y=new Array(a),s&&(x=new Array(a)),k=0,$=Math.min(o,a);k<$&&i[k]===u[k];k++);for($=o-1,w=a-1;$>=k&&w>=k&&i[$]===u[w];$--,w--)h[w]=l[$],y[w]=r[$],s&&(x[w]=s[$]);for(p=new Map,c=new Array(w+1),f=w;f>=k;f--)_=u[f],d=p.get(_),c[f]=d===void 0?-1:d,p.set(_,f);for(d=k;d<=$;d++)_=i[d],f=p.get(_),f!==void 0&&f!==-1?(h[f]=l[d],y[f]=r[d],s&&(x[f]=s[d]),f=c[f],p.set(_,f)):r[d]();for(f=k;f<a;f++)f in h?(l[f]=h[f],r[f]=y[f],s&&(s[f]=x[f],s[f](f))):l[f]=X(g);l=l.slice(0,o=a),i=u.slice(0)}return l});function g(p){if(r[f]=p,s){const[c,h]=te(f);return s[f]=h,n(u[f],c)}return n(u[f])}}}function Nn(e,n,t={}){let i=[],l=[],r=[],o=[],s=0,u;return Je(()=>pe(r)),()=>{const a=e()||[],d=a.length;return a[fe],I(()=>{if(d===0)return s!==0&&(pe(r),r=[],i=[],l=[],s=0,o=[]),t.fallback&&(i=[Re],l[0]=X(g=>(r[0]=g,t.fallback())),s=1),l;for(i[0]===Re&&(r[0](),r=[],i=[],l=[],s=0),u=0;u<d;u++)u<i.length&&i[u]!==a[u]?o[u](()=>a[u]):u>=i.length&&(l[u]=X(f));for(;u<i.length;u++)r[u]();return s=o.length=r.length=d,i=a.slice(0),l=l.slice(0,s)});function f(g){r[u]=g;const[p,c]=te(a[u]);return o[u]=c,n(p,u)}}}function F(e,n){return I(()=>e(n||{}))}function Rn(e){const n="fallback"in e&&{fallback:()=>e.fallback};return C(Dn(()=>e.each,e.children,n||void 0))}function Kn(e){const n="fallback"in e&&{fallback:()=>e.fallback};return C(Nn(()=>e.each,e.children,n||void 0))}function In(e,n,t){let i=t.length,l=n.length,r=i,o=0,s=0,u=n[l-1].nextSibling,a=null;for(;o<l||s<r;){if(n[o]===t[s]){o++,s++;continue}for(;n[l-1]===t[r-1];)l--,r--;if(l===o){const d=r<i?s?t[s-1].nextSibling:t[r-s]:u;for(;s<r;)e.insertBefore(t[s++],d)}else if(r===s)for(;o<l;)(!a||!a.has(n[o]))&&n[o].remove(),o++;else if(n[o]===t[r-1]&&t[s]===n[l-1]){const d=n[--l].nextSibling;e.insertBefore(t[s++],n[o++].nextSibling),e.insertBefore(t[--r],d),n[l]=t[r]}else{if(!a){a=new Map;let f=s;for(;f<r;)a.set(t[f],f++)}const d=a.get(n[o]);if(d!=null)if(s<d&&d<r){let f=o,g=1,p;for(;++f<l&&f<r&&!((p=a.get(n[f]))==null||p!==d+g);)g++;if(g>d-s){const c=n[o];for(;s<d;)e.insertBefore(t[s++],c)}else e.replaceChild(t[s++],n[o++])}else o++;else n[o++].remove()}}}const ze="_$DX_DELEGATE";function Yn(e,n,t,i={}){let l;return X(r=>{l=r,n===document?e():b(n,e(),n.firstChild?null:void 0,t)},i.owner),()=>{l(),n.textContent=""}}function S(e,n,t){let i;const l=()=>{const o=document.createElement("template");return o.innerHTML=e,o.content.firstChild},r=()=>(i||(i=l())).cloneNode(!0);return r.cloneNode=r,r}function je(e,n=window.document){const t=n[ze]||(n[ze]=new Set);for(let i=0,l=e.length;i<l;i++){const r=e[i];t.has(r)||(t.add(r),n.addEventListener(r,Un))}}function jn(e,n){n==null?e.removeAttribute("class"):e.className=n}function Bn(e,n,t,i){Array.isArray(t)?(e[`$$${n}`]=t[0],e[`$$${n}Data`]=t[1]):e[`$$${n}`]=t}function Mn(e,n,t={}){const i=Object.keys(n||{}),l=Object.keys(t);let r,o;for(r=0,o=l.length;r<o;r++){const s=l[r];!s||s==="undefined"||n[s]||(Ge(e,s,!1),delete t[s])}for(r=0,o=i.length;r<o;r++){const s=i[r],u=!!n[s];!s||s==="undefined"||t[s]===u||!u||(Ge(e,s,!0),t[s]=u)}return t}function Fn(e,n,t){return I(()=>e(n,t))}function b(e,n,t,i){if(t!==void 0&&!i&&(i=[]),typeof n!="function")return be(e,n,i,t);M(l=>be(e,n(),l,t),i)}function Ge(e,n,t){const i=n.trim().split(/\s+/);for(let l=0,r=i.length;l<r;l++)e.classList.toggle(i[l],t)}function Un(e){let n=e.target;const t=`$$${e.type}`,i=e.target,l=e.currentTarget,r=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),o=()=>{const u=n[t];if(u&&!n.disabled){const a=n[`${t}Data`];if(a!==void 0?u.call(n,a,e):u.call(n,e),e.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(e.target)&&r(n.host),!0},s=()=>{for(;o()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),e.composedPath){const u=e.composedPath();r(u[0]);for(let a=0;a<u.length-2&&(n=u[a],!!o());a++){if(n._$host){n=n._$host,s();break}if(n.parentNode===l)break}}else s();r(i)}function be(e,n,t,i,l){for(;typeof t=="function";)t=t();if(n===t)return t;const r=typeof n,o=i!==void 0;if(e=o&&t[0]&&t[0].parentNode||e,r==="string"||r==="number"){if(r==="number"&&(n=n.toString(),n===t))return t;if(o){let s=t[0];s&&s.nodeType===3?s.data!==n&&(s.data=n):s=document.createTextNode(n),t=G(e,t,i,s)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||r==="boolean")t=G(e,t,i);else{if(r==="function")return M(()=>{let s=n();for(;typeof s=="function";)s=s();t=be(e,s,t,i)}),()=>t;if(Array.isArray(n)){const s=[],u=t&&Array.isArray(t);if(Ke(s,n,t,l))return M(()=>t=be(e,s,t,i,!0)),()=>t;if(s.length===0){if(t=G(e,t,i),o)return t}else u?t.length===0?We(e,s,i):In(e,t,s):(t&&G(e),We(e,s));t=s}else if(n.nodeType){if(Array.isArray(t)){if(o)return t=G(e,t,i,n);G(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function Ke(e,n,t,i){let l=!1;for(let r=0,o=n.length;r<o;r++){let s=n[r],u=t&&t[e.length],a;if(!(s==null||s===!0||s===!1))if((a=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))l=Ke(e,s,u)||l;else if(a==="function")if(i){for(;typeof s=="function";)s=s();l=Ke(e,Array.isArray(s)?s:[s],Array.isArray(u)?u:[u])||l}else e.push(s),l=!0;else{const d=String(s);u&&u.nodeType===3&&u.data===d?e.push(u):e.push(document.createTextNode(d))}}return l}function We(e,n,t=null){for(let i=0,l=n.length;i<l;i++)e.insertBefore(n[i],t)}function G(e,n,t,i){if(t===void 0)return e.textContent="";const l=i||document.createTextNode("");if(n.length){let r=!1;for(let o=n.length-1;o>=0;o--){const s=n[o];if(l!==s){const u=s.parentNode===e;!r&&!o?u?e.replaceChild(l,s):e.insertBefore(l,t):u&&s.remove()}else r=!0}}else e.insertBefore(l,t);return[l]}async function Hn(e,n={},t){return window.__TAURI_INTERNALS__.invoke(e,n,t)}const ye=Symbol("store-raw"),V=Symbol("store-node"),K=Symbol("store-has"),on=Symbol("store-self");function un(e){let n=e[q];if(!n&&(Object.defineProperty(e,q,{value:n=new Proxy(e,Gn)}),!Array.isArray(e))){const t=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let l=0,r=t.length;l<r;l++){const o=t[l];i[o].get&&Object.defineProperty(e,o,{enumerable:i[o].enumerable,get:i[o].get.bind(n)})}}return n}function Q(e){let n;return e!=null&&typeof e=="object"&&(e[q]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function Z(e,n=new Set){let t,i,l,r;if(t=e!=null&&e[ye])return t;if(!Q(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let o=0,s=e.length;o<s;o++)l=e[o],(i=Z(l,n))!==l&&(e[o]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const o=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let u=0,a=o.length;u<a;u++)r=o[u],!s[r].get&&(l=e[r],(i=Z(l,n))!==l&&(e[r]=i))}return e}function me(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function se(e,n,t){if(e[n])return e[n];const[i,l]=te(t,{equals:!1,internal:!0});return i.$=l,e[n]=i}function qn(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===q||n===V||(delete t.value,delete t.writable,t.get=()=>e[q][n]),t}function cn(e){Ne()&&se(me(e,V),on)()}function zn(e){return cn(e),Reflect.ownKeys(e)}const Gn={get(e,n,t){if(n===ye)return e;if(n===q)return t;if(n===fe)return cn(e),t;const i=me(e,V),l=i[n];let r=l?l():e[n];if(n===V||n===K||n==="__proto__")return r;if(!l){const o=Object.getOwnPropertyDescriptor(e,n);Ne()&&(typeof r!="function"||e.hasOwnProperty(n))&&!(o&&o.get)&&(r=se(i,n,r)())}return Q(r)?un(r):r},has(e,n){return n===ye||n===q||n===fe||n===V||n===K||n==="__proto__"?!0:(Ne()&&se(me(e,K),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:zn,getOwnPropertyDescriptor:qn};function J(e,n,t,i=!1){if(!i&&e[n]===t)return;const l=e[n],r=e.length;t===void 0?(delete e[n],e[K]&&e[K][n]&&l!==void 0&&e[K][n].$()):(e[n]=t,e[K]&&e[K][n]&&l===void 0&&e[K][n].$());let o=me(e,V),s;if((s=se(o,n,l))&&s.$(()=>t),Array.isArray(e)&&e.length!==r){for(let u=e.length;u<r;u++)(s=o[u])&&s.$();(s=se(o,"length",r))&&s.$(e.length)}(s=o[on])&&s.$()}function an(e,n){const t=Object.keys(n);for(let i=0;i<t.length;i+=1){const l=t[i];J(e,l,n[l])}}function Wn(e,n){if(typeof n=="function"&&(n=n(e)),n=Z(n),Array.isArray(n)){if(e===n)return;let t=0,i=n.length;for(;t<i;t++){const l=n[t];e[t]!==l&&J(e,t,l)}J(e,"length",i)}else an(e,n)}function re(e,n,t=[]){let i,l=e;if(n.length>1){i=n.shift();const o=typeof i,s=Array.isArray(e);if(Array.isArray(i)){for(let u=0;u<i.length;u++)re(e,[i[u]].concat(n),t);return}else if(s&&o==="function"){for(let u=0;u<e.length;u++)i(e[u],u)&&re(e,[u].concat(n),t);return}else if(s&&o==="object"){const{from:u=0,to:a=e.length-1,by:d=1}=i;for(let f=u;f<=a;f+=d)re(e,[f].concat(n),t);return}else if(n.length>1){re(e[i],n,[i].concat(t));return}l=e[i],t=[i].concat(t)}let r=n[0];typeof r=="function"&&(r=r(l,t),r===l)||i===void 0&&r==null||(r=Z(r),i===void 0||Q(l)&&Q(r)&&!Array.isArray(r)?an(l,r):J(e,i,r))}function Xn(...[e,n]){const t=Z(e||{}),i=Array.isArray(t),l=un(t);function r(...o){De(()=>{i&&o.length===1?Wn(t,o[0]):re(t,o)})}return[l,r]}const we=new WeakMap,fn={get(e,n){if(n===ye)return e;const t=e[n];let i;return Q(t)?we.get(t)||(we.set(t,i=new Proxy(t,fn)),i):t},set(e,n,t){return J(e,n,Z(t)),!0},deleteProperty(e,n){return J(e,n,void 0,!0),!0}};function N(e){return n=>{if(Q(n)){let t;(t=we.get(n))||we.set(n,t=new Proxy(n,fn)),e(t)}return n}}function Be(e,n){let t=new Array(e);return t.fill(n),t}const Vn=e=>e.length===0?null:e[e.length-1];function Le(e,n){let t=0;const i=e.length;for(let l=0;l<i;l++)n(e[l])&&t++;return t}const dn=e=>{let n=0;const t=e.length;for(let i=0;i<t;i++){const l=e[i];n+=l}return n};var Qn=(e,n)=>{const t=[];for(let i=0;i<e.length;i++)i>0&&t.push(n),t.push(e[i]);return t};function Te(e){return e[Math.random()*e.length|0]??null}const hn=e=>{const n=e.slice();for(let t=e.length-1;t>0;t--){const i=Math.random()*(t+1)|0;[n[t],n[i]]=[n[i],n[t]]}return n},Zn=e=>new Promise(n=>setTimeout(n,e));function W(e,n,t){return{card:e,type:n,idx:t}}const Jn=0,et=8,nt=28,gn=40,tt=44;var Y=32;const B=[0,8,28,40,44],oe=[4,12,16,20,24,29,32,36,41],ue=[1,5,9,13,17,21,25,33,37,42],ve=[2,3,6,7,10,11,14,15,18,19,22,23,26,27,30,31,34,35,38,39,43,45,46,47,Y],Me=[20,24,36],ke=[8,Y],$e=[28,Y],xe=[1,5,9],Ce=[21,33,37],pn=xe.concat(Ce),it=e=>{let n;B.includes(e)?n=["light",3]:oe.includes(e)?n=["seed",5]:ue.includes(e)?n=["ribbon",5]:n=["dross",10];const i=[n];return Me.includes(e)&&i.push(["bdb",0]),ke.includes(e)&&i.push(["fsake",0]),$e.includes(e)&&i.push(["msake",0]),pn.includes(e)&&i.push(["redblue",0]),xe.includes(e)&&i.push(["red",0]),Ce.includes(e)&&i.push(["blue",0]),i};function rt(){return{round:1,points:[30,30],hand:[[],[]],pile:[[],[]],stock:[],init_board:[],fieldSlots:[],oyaCards:[],show:null,collect:[],turn_16:1,dealer:0,koikoi:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],acceptsKoikoi:!1,winner:null,exhausted:!1,turn_point:0,turnYakus:[],newYakus:[],phase:"Init",wait_action:!1,animation:!1,card_log:[]}}function Se(e){return e.fieldSlots.filter(n=>n!==null)}const lt=e=>(e.turn_16+1)/2|0;function P(e){return(e.turn_16+e.dealer)%2==1?0:1}const ee=(e,n)=>(e/4|0)===(n/4|0);function ne(e,n){return Se(e).filter(t=>ee(t,n))}const R=(e,n)=>e.filter(t=>n.includes(t)),ae=(e,n)=>{let t=0;for(const i of e)for(const l of n)i===l&&t++;return t},ie=(e,n)=>e.every(t=>n.includes(t)),Fe=(e,n)=>dn(e.koikoi[n]);function Ae(e,n){const t=[],i=e.pile[n],l=Fe(e,n),r=ae(i,B),o=i.includes(gn);r==5?t.push([0,10]):r==4&&!o?t.push([1,8]):r==4?t.push([2,7]):r==3&&!o&&t.push([3,5]);const s=ae(i,oe);ie(Me,i)&&t.push([4,5]),ie(ke,i)&&(l===0?t.push([5,1]):t.push([6,3])),ie($e,i)&&(l===0?t.push([7,1]):t.push([8,3])),s>=5&&t.push([9,s-4]);const u=ae(i,ue),a=ie(xe,i),d=ie(Ce,i);a&&d&&t.push([10,10]),a&&t.push([11,5]),d&&t.push([12,5]),u>=5&&t.push([13,u-4]);const f=ae(i,ve);return f>=10&&t.push([14,f-9]),t}const bn=["Gokō (五光)","Shikō (四光)","Ame-Shikō (雨四光)","Sankō (三光)","Inoshikachō (猪鹿蝶)","Hanami-zake (花見酒)","Hanami-zake (花見酒)","Tsukimi-zake (月見酒)","Tsukimi-zake (月見酒)","Tane (タネ)","Akatan, Aotan no Chōfuku (赤短・青短の重複)","Akatan (赤タン)","Aotan (青タン)","Tan (タン)","Kasu (カス)"],st=["5 cartes Lumière","4 cartes Lumière sans l'homme au parapluie","4 cartes Lumière avec l'homme au parapluie","3 cartes Lumière sans l'homme au parapluie","Sanglier-Cerf-Papillon","Contemplation de la fleur de cerisier","Contemplation de la fleur de cerisier","Contemplation de la lune","Contemplation de la lune","Cartes Animaux","Rubans à poésie rouges et bleus","Rubans à poésie rouges","Rubans à poésie bleus","Rubans","Plaines"],ot=[B,B,B,B,Me,ke,ke,$e,$e,oe,pn,xe,Ce,ue,ve],Ue=(e,n)=>{const t=dn(Ae(e,n).filter(l=>l[0]!==15).map(l=>l[1])),i=Fe(e,n);return i<=3?t+i:t*(i-2)};function ut(e,n){return e.filter(t=>n.every(i=>t[0]!==i[0]||t[1]!==i[1]))}const yn=()=>{for(;;){const e=hn(((r,o)=>{let s=1;return Array.from({length:Math.abs(o-r)},(u,a)=>r+a*s)})(0,48)),n=e.slice(0,8),t=e.slice(8,16),i=e.slice(16,24);let l=!1;for(let r=1;r<13;r++)l=l||Le(n,o=>(o/4|0)===r)===4||Le(t,o=>(o/4|0)===r)===4||Le(i,o=>(o/4|0)===r)===4;if(!l)return e}};function Oe(e){e.hand=[[],[]],e.pile=[[],[]],e.stock=[],e.init_board=[],e.fieldSlots=[],e.show=null,e.oyaCards=[],e.collect=[],e.turn_16=1,e.dealer=0,e.koikoi=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],e.winner=null,e.exhausted=!1,e.turnYakus=[],e.newYakus=[],e.turn_point=0,e.phase="Oya",e.wait_action=!1,e.card_log=[],e.stock=hn(((n,t)=>{let i=1;return Array.from({length:Math.abs(t-n)},(l,r)=>n+r*i)})(0,48))}function ct(e){const n=e.stock.slice(0,8),t=e.stock.slice(8,16);return e.hand=[n,t],e.fieldSlots=e.stock.slice(16,24).concat(Be(8,null)),e.stock=e.stock.slice(24),e.phase="Discard",e.wait_action=!0,e.init_board=[...Se(e)],mn(e)}function at(e){Oe(e);let n=((o,s)=>{let u=1;return Array.from({length:Math.abs(s-o)},(a,d)=>o+d*u)})(0,48);const[t,...i]=n;n=i,n.push(t);const l=n.slice(0,8),r=n.slice(8,16);return e.hand=[l,r],e.fieldSlots=n.slice(16,24).concat(Be(10,null)),e.stock=n.slice(24),e.dealer=1,e.pile=[[],[]],e.phase="Discard",e.wait_action=!0,e.init_board=[...Se(e)],mn(e)}function mn(e,n){return e.card_log=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map(()=>[0,1,2,3,4,5,6,7].map(()=>({arr:Be(48,0)})))}const wn=(e,n)=>{const t=P(e),i=ne(e,e.show),l=i.length;if(l===0){e.collect=[];const r=e.fieldSlots.findIndex(o=>o===null);return r>=0?e.fieldSlots[r]=e.show:void 0}else if(l==1||l==3){e.collect=[e.show].concat(i);for(const r of i){const o=e.fieldSlots.findIndex(s=>s!==null&&s===r);e.fieldSlots[o]=null}return e.pile[t]=e.pile[t].concat(e.collect)}else{e.collect=[e.show,n];const r=e.fieldSlots.indexOf(n);return r>=0&&(e.fieldSlots[r]=null),e.pile[t]=e.pile[t].concat(e.collect)}},ft=e=>{const n=e.stock.pop(),t=e.stock.pop();return e.oyaCards=[n,t],e.phase="Oya2"},dt=(e,n)=>{const[t,i]=e.oyaCards,l=t/4|0,r=i/4|0,o=n/4|0;return l===r?e.phase="Oya3":o<=l&&o<=r?(e.phase="Oya3",e.dealer=0):(e.phase="Oya3",e.dealer=1)},ht=e=>{const[n,t]=e.oyaCards;return e.stock.push(n),e.stock.push(t),e.stock=yn(),e.oyaCards=[],ee(n,t)?e.phase="Init":e.phase="DealCards"},vn=(e,n)=>{const t=P(e);return e.turnYakus=Ae(e,t),e.turn_point=Ue(e,t),e.show=n,e.phase="DiscardPick",e.wait_action=ne(e,n).length===2},He=(e,n)=>{const t=P(e);if(e.show!==null){const i=e.hand[t].indexOf(e.show);e.hand[t].splice(i,1)}return wn(e,n),e.show=null,e.phase="Draw",e.wait_action=!1},gt=e=>(e.show=Vn(e.stock),e.phase="DrawPick",e.wait_action=ne(e,e.show).length===2),qe=(e,n)=>{e.stock.pop(),wn(e,n),e.show=null;const t=P(e);return e.newYakus=ut(Ae(e,t),e.turnYakus).map(i=>i[0]),e.newYakus.length>0?(e.phase="Yakus",e.wait_action=!1):(e.turn_16+=1,e.phase="Discard",e.wait_action=!0)},pt=e=>{if(e.newYakus.splice(0,1),e.newYakus.length===0)return e.phase="KoiKoi",e.wait_action=!0},kn=(e,n)=>(e.acceptsKoikoi=n,e.wait_action=!1,e.phase="ShowKoiKoi"),bt=e=>{const n=P(e),t=lt(e),i=e.acceptsKoikoi;let l;return i?l=1:l=0,e.koikoi[n][t-1]=l,i?e.turn_16==16?(e.phase="RoundOver",e.wait_action=!0,e.exhausted=!0,e.winner=e.dealer):(e.turn_16+=1,e.phase="Discard",e.wait_action=!0):(e.phase="RoundOver",e.wait_action=!0,e.winner=n)},yt=e=>{const n=e.winner;if(n!==null){const t=Ue(e,n);n===0?(e.points[0]+=t,e.points[1]-=t):(e.points[0]-=t,e.points[1]+=t)}return Oe(e),e.dealer=n??0,e.stock=yn(),e.round+=1,e.phase="DealCards"},mt=e=>{console.log(e.phase);let n;if(n=e.phase,n==="Init")return Oe(e),e.phase="Oya";if(n==="DealCards")return ct(e);if(n==="DiscardPick")return He(e,null);if(n==="Oya")return ft(e);if(n==="Oya3")return ht(e);if(n==="Draw")return gt(e);if(n==="DrawPick")return qe(e,null);if(n==="Yakus")return pt(e);if(n==="ShowKoiKoi")return bt(e)},wt={discard:e=>{const n=e.hand[1].filter(t=>ne(e,t).length>0);return n.length>0?Te(n):Te(e.hand[1])},pick:e=>Te(ne(e,e.show)),koikoi:()=>!1},vt=(e,n)=>{let t;if(t=e.phase,t==="Discard")return vn(e,n.discard(e));if(t==="DiscardPick")return He(e,n.pick(e));if(t==="DrawPick")return qe(e,n.pick(e));if(t==="KoiKoi")return kn(e,n.koikoi(e))};var kt=S('<div class="z-20 h-[50vw] w-[50vw] bg-board bg-opacity-90 relative">'),$t=S('<div class="absolute text-white left-2 top-[37rem]">Lumières: <br>Animaux: <br>Rubans: <br>Plaines: '),_t=S('<div class="absolute text-white left-2 top-[7rem]">Lumières: <br>Animaux: <br>Rubans: <br>Plaines: '),xt=S('<div class="absolute text-white text-6xl p-4 left-3 top-[30rem] border-green-500 rounded-xl">'),Ct=S('<div class="absolute text-white text-6xl p-4 left-3 top-[14rem] border-green-500 rounded-xl">'),St=S('<div class="absolute perspective-1000 pointer-events-none"><div class="relative w-full h-full transition-transform duration-1000 preserve-3d pointer-events-auto"><div class="absolute w-full h-full backface-hidden bg-no-repeat"></div><div class="absolute w-full h-full backface-hidden bg-backface">');const At=(e,n,t)=>{let i;switch(e.type){case"hand1":{i=`translate(${10+e.idx*5}rem, 40rem)`;break}case"hand2":{i=`translate(${10+e.idx*5}rem, 10rem)`;break}case"field":{i=`translate(${10+(e.idx/2|0)*5}rem, ${21+8*(e.idx%2)}rem)`;break}case"draw":{i="translate(3rem, 25rem)";break}case"pile1":{i=`translate(${1.5+e.idx*2}rem, 46rem)`;break}case"pile2":{i=`translate(${1.5+e.idx*2}rem, 4rem)`;break}case"oya":{i=`translate(${15+20*e.idx}rem, 25rem)`;break}}const l=i;let r;n==="Oya2"||(e.type==="draw"||e.type==="hand2")&&!t?r="rotateY(180deg)":r="rotateY(0)";const o=r;let s;return e.type==="pile1"||e.type==="pile2"?s="scale(0.166)":e.type==="oya"?s="scale(1)":s="scale(0.33)",`${l} ${o} ${s}`},Ot=e=>{const n=o=>e.hoveredCard!==null&&e.hoveredCard.card===o.card,t=o=>{switch(o.type){case"hand1":return!e.pairingHand.includes(o.card);case"field":return e.show!==null?!ee(o.card,e.show):e.hoveredCard===null?!1:e.hoveredCard.type==="hand1"&&!ee(e.hoveredCard.card,o.card);default:return!1}},i=o=>{let s;return s=o.type,s==="draw"?o.card===e.show?35:30:s==="hand1"||s==="hand2"?40+o.idx:s==="field"?50+o.idx:70},l=o=>{const s=[],u=o===0?e.pile1:e.pile2;let a=0;for(const d of[u.light,u.seed,u.ribbon,u.dross]){for(const f of d)s.push(W(f,o===0?"pile1":"pile2",a)),a+=1;a+=1}return s},r=C(()=>{const o=e.hand1.map((c,h)=>W(c,"hand1",h)),s=e.hand2.map((c,h)=>W(c,"hand2",h)),u=e.field.map((c,h)=>[h,c]).filter(([,c])=>c!==null).map(([c,h])=>W(h,"field",c)),a=e.draw.map(c=>W(c,"draw",0)),d=l(0),f=l(1),g=e.oyaCards.map((c,h)=>W(c,"oya",h)),p=o.concat(s).concat(u).concat(a).concat(d).concat(f).concat(g);return p.sort((c,h)=>c.card-h.card),p});return(()=>{var o=kt();return b(o,(()=>{var s=C(()=>!["Init","Oya","Oya2","Oya3"].includes(e.phase));return()=>s()&&[(()=>{var u=$t(),a=u.firstChild,d=a.nextSibling,f=d.nextSibling,g=f.nextSibling,p=g.nextSibling,c=p.nextSibling;return c.nextSibling,b(u,()=>e.pile1.light.length,d),b(u,()=>e.pile1.seed.length,g),b(u,()=>e.pile1.ribbon.length,c),b(u,()=>e.pile1.dross.length+(r()[Y].type==="pile1"?1:0),null),u})(),(()=>{var u=_t(),a=u.firstChild,d=a.nextSibling,f=d.nextSibling,g=f.nextSibling,p=g.nextSibling,c=p.nextSibling;return c.nextSibling,b(u,()=>e.pile2.light.length,d),b(u,()=>e.pile2.seed.length,g),b(u,()=>e.pile2.ribbon.length,c),b(u,()=>e.pile2.dross.length+(r()[Y].type==="pile2"?1:0),null),u})(),(()=>{var u=xt();return b(u,()=>e.points[0]),M(()=>u.classList.toggle("border-4",e.turnPlayer===0)),u})(),(()=>{var u=Ct();return b(u,()=>e.points[1]),M(()=>u.classList.toggle("border-4",e.turnPlayer===1)),u})()]})(),null),b(o,F(Kn,{get each(){return r()},children:s=>(()=>{var u=St(),a=u.firstChild,d=a.firstChild,f=d.nextSibling;return a.addEventListener("pointerleave",g=>e.setHoveredCard(null,g)),a.addEventListener("pointerenter",g=>e.setHoveredCard(s(),g)),a.$$click=e.pickCard,a.$$clickData=s().card,a.style.setProperty("top","-50%"),a.style.setProperty("left","-50%"),f.style.setProperty("transform","rotateY(180deg)"),M(g=>{var p=s().type==="hand1"&&n(s())?"15rem":"12rem",c=s().type==="hand1"&&n(s())?"24rem":"19.5rem",h=i(s()),y=s().type==="hand1"&&s().card===e.show,x=At(s(),e.phase,s().card===e.show),k=t(s())?"grayscale(100%)":"",$=`url("./cards/${(s().card/4|0)+1}-${s().card%4+1}.svg`,w={"hover:animate-oya-card":e.phase==="Oya2"};return p!==g.e&&((g.e=p)!=null?u.style.setProperty("width",p):u.style.removeProperty("width")),c!==g.t&&((g.t=c)!=null?u.style.setProperty("height",c):u.style.removeProperty("height")),h!==g.a&&((g.a=h)!=null?u.style.setProperty("z-index",h):u.style.removeProperty("z-index")),y!==g.o&&a.classList.toggle("shadow-picked",g.o=y),x!==g.i&&((g.i=x)!=null?a.style.setProperty("transform",x):a.style.removeProperty("transform")),k!==g.n&&((g.n=k)!=null?a.style.setProperty("filter",k):a.style.removeProperty("filter")),$!==g.s&&((g.s=$)!=null?d.style.setProperty("background-image",$):d.style.removeProperty("background-image")),g.h=Mn(f,w,g.h),g},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),u})()}),null),o})()};je(["click"]);var Pt=()=>{},Xe=(e,n)=>n();function Et(e,n){const t=I(e),i=t?[t]:[],{onEnter:l=Xe,onExit:r=Xe}=n,[o,s]=te(n.appear?[]:i),[u]=Pn();let a,d=!1;function f(c,h){if(!c)return h&&h();d=!0,r(c,()=>{De(()=>{d=!1,s(y=>y.filter(x=>x!==c)),h&&h()})})}function g(c){const h=a;if(!h)return c&&c();a=void 0,s(y=>[h,...y]),l(h,c??Pt)}const p=n.mode==="out-in"?c=>d||f(c,g):n.mode==="in-out"?c=>g(()=>f(c)):c=>{f(c),g()};return Sn(c=>{const h=e();return I(u)?(u(),c):(h!==c&&(a=h,De(()=>I(()=>p(c)))),h)},n.appear?void 0:t),o}var Ve=e=>e instanceof Element;function Ie(e,n){if(n(e))return e;if(typeof e=="function"&&!e.length)return Ie(e(),n);if(Array.isArray(e))for(const t of e){const i=Ie(t,n);if(i)return i}return null}function Lt(e,n=Ve,t=Ve){const i=C(e);return C(()=>Ie(i(),n))}function Tt(e){return C(()=>{const n=e.name||"s";return{enterActive:(e.enterActiveClass||n+"-enter-active").split(" "),enter:(e.enterClass||n+"-enter").split(" "),enterTo:(e.enterToClass||n+"-enter-to").split(" "),exitActive:(e.exitActiveClass||n+"-exit-active").split(" "),exit:(e.exitClass||n+"-exit").split(" "),exitTo:(e.exitToClass||n+"-exit-to").split(" "),move:(e.moveClass||n+"-move").split(" ")}})}function $n(e){requestAnimationFrame(()=>requestAnimationFrame(e))}function Dt(e,n,t,i){const{onBeforeEnter:l,onEnter:r,onAfterEnter:o}=n;l==null||l(t),t.classList.add(...e.enter),t.classList.add(...e.enterActive),queueMicrotask(()=>{if(!t.parentNode)return i==null?void 0:i();r==null||r(t,()=>s())}),$n(()=>{t.classList.remove(...e.enter),t.classList.add(...e.enterTo),(!r||r.length<2)&&(t.addEventListener("transitionend",s),t.addEventListener("animationend",s))});function s(u){(!u||u.target===t)&&(i==null||i(),t.removeEventListener("transitionend",s),t.removeEventListener("animationend",s),t.classList.remove(...e.enterActive),t.classList.remove(...e.enterTo),o==null||o(t))}}function Nt(e,n,t,i){const{onBeforeExit:l,onExit:r,onAfterExit:o}=n;if(!t.parentNode)return i==null?void 0:i();l==null||l(t),t.classList.add(...e.exit),t.classList.add(...e.exitActive),r==null||r(t,()=>s()),$n(()=>{t.classList.remove(...e.exit),t.classList.add(...e.exitTo),(!r||r.length<2)&&(t.addEventListener("transitionend",s),t.addEventListener("animationend",s))});function s(u){(!u||u.target===t)&&(i==null||i(),t.removeEventListener("transitionend",s),t.removeEventListener("animationend",s),t.classList.remove(...e.exitActive),t.classList.remove(...e.exitTo),o==null||o(t))}}var Rt={inout:"in-out",outin:"out-in"},Kt=e=>{const n=Tt(e);return Et(Lt(()=>e.children),{mode:Rt[e.mode],appear:e.appear,onEnter(t,i){Dt(n(),e,t,i)},onExit(t,i){Nt(n(),e,t,i)}})},It=S('<span class="text-blue-500 font-bold">');const Yt=e=>(()=>{var n=It();return b(n,()=>e.children),n})();var jt=S("<div>"),Bt=S('<div class="tooltip -right-5">');function Mt(e,n){return e.length===n}const O=e=>["B",e],Qe={light:"Lumière",dross:"Plaine",ribbon:"Ruban",seed:"Animal",bdb:"Sanglier-Cerf-Papillon",fsake:"Contemplation de la fleur de cerisier",msake:"Contemplation de la lune",redblue:"Rubans à poésie rouges et bleus",red:"Rubans à poésie rouges",blue:"Rubans à poésie bleus"},Ft={[Jn]:["La ",O("grue"),". "],[et]:["Le ",O("rideau"),". "],[nt]:["La ",O("Lune"),". "],[Y]:["La ",O("coupe de saké"),". "],[gn]:["L'",O("homme au parapluie"),". "],[tt]:["Le ",O("phénix"),". "]},Ut=e=>{const n=C(()=>{if(e.hoveredCard!==null&&["hand1","field","pile1","pile2"].includes(e.hoveredCard.type)){const i=e.hoveredCard.card,l=it(i),[r,o]=l[0],s=Qe[r];let u=Ft[i]??[];return u=u.concat(["C'est une carte ",O(s),". Collectionne en ",O(""+o)," pour former un yaku."]),i===Y&&(u=u.concat([" C'est aussi une carte ",O("Plaine"),"."])),l.length>1?u.concat([" Tu peux également former "]).concat(Qn(l.slice(1).map(([a])=>O(Qe[a])),", ")):u}else return e.phase==="Oya2"?["Choisis une carte. Si elle est d'un mois plus petit que l'autre, tu commenceras la partie."]:e.turnPlayer===1||!e.wait_action?null:e.phase==="Discard"?["Choisis une carte de ta ",O("main")," pour l'associer à une carte de la ",O("rivière")," du même mois."]:e.phase==="DiscardPick"?["Choisis une carte de la ",O("riviète")," pour l'associer à la carte que tu as précédemment chosie."]:e.phase==="DrawPick"?["Choisis une carte de la ",O("riviète")," pour l'associer à la carte de la ",O("pioche")," du même mois."]:null}),t=C(()=>e.winner===0?"bg-crying":e.winner===1?"bg-happy":e.turnPlayer===1?"bg-thinking":"bg-speaking");return(()=>{var i=jt();return b(i,F(Kt,{onEnter:(l,r)=>l.animate([{opacity:0},{opacity:1}],{duration:500}).finished.then(r),onExit:(l,r)=>l.animate([{opacity:1},{opacity:0}],{duration:500}).finished.then(r),get children(){return C(()=>!!n())()&&(()=>{var l=Bt();return b(l,F(Rn,{get each(){return n()},children:r=>{if(Array.isArray(r)&&Mt(r,2)&&r[0]==="B"){const[,o]=r;return F(Yt,{children:o})}else return r}})),l})()}})),M(()=>jn(i,`z-20 relative w-[15rem] h-[25rem] bg-contain bg-no-repeat ${t()}`)),i})()};var Ht=S('<div class="z-20 bg-board bg-opacity-90 rounded-xl border-2 border-black"><div class="dialog-title text-white">Fin de la manche</div><div class=dialog-body><table><tbody class="[&amp;>*:nth-child(odd)]:bg-white [&amp;>*:nth-child(even)]:bg-gray-200"><tr><td class="border p-2">Koi-Koi</td><td class="border p-2"></td><td class="border p-2"></td></tr><tr><td class="border p-2 font-bold">Total</td><td class="border p-2 font-bold"></td><td class="border p-2 font-bold"> points</td></tr></tbody></table></div><div class=dialog-buttons><button class=btn>Nouvelle manche'),qt=S('<tr><td class="border p-2"></td><td class="border p-2"></td><td class="border p-2"> points');const zt=["+0","+1","+2","+3","x2","x3"],Gt=e=>(()=>{var n=Ht(),t=n.firstChild,i=t.nextSibling,l=i.firstChild,r=l.firstChild,o=r.firstChild,s=o.firstChild,u=s.nextSibling,a=u.nextSibling,d=o.nextSibling,f=d.firstChild,g=f.nextSibling,p=g.nextSibling,c=p.firstChild,h=i.nextSibling,y=h.firstChild;return b(r,()=>e.yakus.map(([x,k])=>(()=>{var $=qt(),w=$.firstChild,_=w.nextSibling,E=_.nextSibling,L=E.firstChild;return b(w,()=>bn[x]),b(_,()=>st[x]),b(E,k,L),$})()),o),b(u,()=>e.koikoiNum),b(a,()=>zt[e.koikoiNum]),b(p,()=>e.total,c),Bn(y,"click",e.newRound),n})();je(["click"]);var Wt=S('<div class="relative w-screen min-h-screen bg-main bg-cover bg-no-repeat select-none flex flew-row items-center justify-around portrait:flex-col"><div class="absolute bg-white w-full h-full opacity-30 z-10 pointer-events-none"></div><div class="flex flex-col bg-board b-cover p-6 border-2 border-black rounded-xl gap-4 z-20"><div class="text-4xl text-white">Koï-Koï</div><button class=btn>Test AI</button><button class=btn>Nouvelle Partie</button><button class=btn>Crédits'),Xt=S("<dialog class=dialog>"),Vt=S('<div class="absolute z-50 top-0 left-0 w-full h-full flex items-center"><div class="w-full bg-white bg-opacity-90 border-4 flex justify-center"><div><div class=text-8xl></div><div class="grid grid-cols-5">'),Qt=S('<div class="w-[10rem] h-[16rem] no-cover bg-no-repeat">'),Zt=S('<div class="absolute z-50 top-0 left-0 w-full h-full flex items-center"><div class="w-full bg-white bg-opacity-90 border-4 flex flex-col justify-center gap-8"><div class=text-8xl>Acceptes-tu le Koï-Koï?</div><div class="flex justify-around"><button class=large-btn>✅ Oui</button><button class=large-btn>❌ Non'),Jt=S('<div class="absolute z-50 top-0 left-0 w-full h-full flex items-center"><div class="w-full bg-white bg-opacity-90 border-4 flex justify-center"><div class=text-9xl>Koï-Koï ');const ei=()=>{let e;const[n,t]=Xn(rt()),[i,l]=te(null),r=C(()=>{if(n.phase!="Yakus")return null;{const c=P(n),h=n.newYakus[0];return[bn[h],R(ot[h],n.pile[c])]}}),o=C(()=>n.hand[0].filter(c=>ne(n,c).length>0)),s=C(()=>{const c={light:R(n.pile[0],B),seed:R(n.pile[0],oe),ribbon:R(n.pile[0],ue),dross:R(n.pile[0],ve).filter(y=>y!==Y)},h={light:R(n.pile[1],B),seed:R(n.pile[1],oe),ribbon:R(n.pile[1],ue),dross:R(n.pile[1],ve).filter(y=>y!==Y)};return[c,h]}),u=async()=>(t(N(c=>Oe(c))),p()),a=()=>{t(N(k=>at(k)));const{show:c,fieldSlots:h,...y}=n,x={...y,show:c===null?[]:[c],field:Se(n)};return Hn("test",{gameState:x})},d=async c=>{if(n.animation||n.phase!=="Oya2"&&(P(n)===1||!n.wait_action))return;let h;return h=n.phase,h==="Oya2"?n.oyaCards.includes(c)&&t(N(y=>dt(y,c))):h==="Discard"?n.hand[0].includes(c)&&t(N(y=>vn(y,c))):h==="DiscardPick"?n.show!==null&&n.fieldSlots.includes(c)&&ee(n.show,c)&&t(N(y=>He(y,c))):h==="DrawPick"&&n.show!==null&&n.fieldSlots.includes(c)&&ee(n.show,c)&&t(N(y=>qe(y,c))),p()},f=c=>(t(N(h=>kn(h,c))),p()),g=()=>(t(N(c=>yt(c))),p()),p=async()=>{for(t("animation",!0);;){if(await Zn(n.phase==="Yakus"?3e3:1500),n.phase==="Oya2"){t("animation",!1);break}if(!n.wait_action)t(N(c=>mt(c)));else if(P(n)===1)t(N(c=>vt(c,wt)));else{t("animation",!1);break}}};return[(()=>{var c=Wt(),h=c.firstChild,y=h.nextSibling,x=y.firstChild,k=x.nextSibling,$=k.nextSibling;return k.$$click=a,$.$$click=u,b(c,(()=>{var w=C(()=>n.phase==="RoundOver");return()=>w()?F(Gt,{get yakus(){return Ae(n,P(n))},get koikoiNum(){return Fe(n,P(n))},get total(){return Ue(n,P(n))},newRound:g}):F(Ot,{get phase(){return n.phase},get hand1(){return n.hand[0]},get hand2(){return n.hand[1]},get field(){return n.fieldSlots},get draw(){return n.stock},get show(){return n.show},get pile1(){return s()[0]},get pile2(){return s()[1]},get points(){return n.points},get oyaCards(){return n.oyaCards},get turnPlayer(){return P(n)},get hoveredCard(){return i()},get pairingHand(){return o()},pickCard:d,setHoveredCard:l})})(),null),b(c,F(Ut,{get phase(){return n.phase},get turnPlayer(){return P(n)},get winner(){return n.winner},get wait_action(){return n.wait_action},get hoveredCard(){return i()}}),null),b(c,(()=>{var w=C(()=>r()!==null);return()=>w()&&(()=>{var _=Vt(),E=_.firstChild,L=E.firstChild,T=L.firstChild,j=T.nextSibling;return b(T,()=>r()[0]),b(j,()=>r()[1].map(D=>(()=>{var Pe=Qt();return`url("./cards/${(D/4|0)+1}-${D%4+1}.svg`!=null?Pe.style.setProperty("background-image",`url("./cards/${(D/4|0)+1}-${D%4+1}.svg`):Pe.style.removeProperty("background-image"),Pe})())),_})()})(),null),b(c,(()=>{var w=C(()=>n.phase==="KoiKoi"&&P(n)===0);return()=>w()&&(()=>{var _=Zt(),E=_.firstChild,L=E.firstChild,T=L.nextSibling,j=T.firstChild,D=j.nextSibling;return j.$$click=f,j.$$clickData=!0,D.$$click=f,D.$$clickData=!1,_})()})(),null),b(c,(()=>{var w=C(()=>n.phase==="ShowKoiKoi");return()=>w()&&(()=>{var _=Jt(),E=_.firstChild,L=E.firstChild;return L.firstChild,b(L,()=>n.acceptsKoikoi?"accepté":"refusé",null),M(T=>{var j=!!n.acceptsKoikoi,D=!n.acceptsKoikoi;return j!==T.e&&L.classList.toggle("text-green-500",T.e=j),D!==T.t&&L.classList.toggle("text-red-500",T.t=D),T},{e:void 0,t:void 0}),_})()})(),null),c})(),(()=>{var c=Xt(),h=e;return typeof h=="function"?Fn(h,c):e=c,c})()]};je(["click"]);Yn(()=>F(ei,{}),document.getElementById("root"));
