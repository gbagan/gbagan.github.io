(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const Hn=(e,n)=>e===n,F=Symbol("solid-proxy"),re=Symbol("solid-track"),ie={equals:Hn};let un=yn;const L=1,oe=2,dn={owned:null,cleanups:null,context:null,owner:null};var T=null;let ve=null,Un=null,v=null,_=null,k=null,ye=0;function V(e,n){const t=v,r=T,i=e.length===0,o=n===void 0?r:n,l=i?dn:{owned:null,cleanups:null,context:o?o.context:null,owner:o},s=i?e:()=>e(()=>j(()=>be(l)));T=l,v=null;try{return W(s,!0)}finally{v=t,T=r}}function pe(e,n){n=n?Object.assign({},ie,n):ie;const t={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},r=i=>(typeof i=="function"&&(i=i(t.value)),hn(t,i));return[gn.bind(t),r]}function S(e,n,t){const r=Ve(e,n,!1,L);Q(r)}function Kn(e,n,t){un=Yn;const r=Ve(e,n,!1,L);r.user=!0,k?k.push(r):Q(r)}function O(e,n,t){t=t?Object.assign({},ie,t):ie;const r=Ve(e,n,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,Q(r),gn.bind(r)}function qn(e){return W(e,!1)}function j(e){if(v===null)return e();const n=v;v=null;try{return e()}finally{v=n}}function Ge(e){return T===null||(T.cleanups===null?T.cleanups=[e]:T.cleanups.push(e)),e}function Ee(){return v}function Wn(e){const n=O(e),t=O(()=>Oe(n()));return t.toArray=()=>{const r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function gn(){if(this.sources&&this.state)if(this.state===L)Q(this);else{const e=_;_=null,W(()=>le(this),!1),_=e}if(v){const e=this.observers?this.observers.length:0;v.sources?(v.sources.push(this),v.sourceSlots.push(e)):(v.sources=[this],v.sourceSlots=[e]),this.observers?(this.observers.push(v),this.observerSlots.push(v.sources.length-1)):(this.observers=[v],this.observerSlots=[v.sources.length-1])}return this.value}function hn(e,n,t){let r=e.value;return(!e.comparator||!e.comparator(r,n))&&(e.value=n,e.observers&&e.observers.length&&W(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],l=ve&&ve.running;l&&ve.disposed.has(o),(l?!o.tState:!o.state)&&(o.pure?_.push(o):k.push(o),o.observers&&pn(o)),l||(o.state=L)}if(_.length>1e6)throw _=[],new Error},!1)),n}function Q(e){if(!e.fn)return;be(e);const n=ye;zn(e,e.value,n)}function zn(e,n,t){let r;const i=T,o=v;v=T=e;try{r=e.fn(n)}catch(l){return e.pure&&(e.state=L,e.owned&&e.owned.forEach(be),e.owned=null),e.updatedAt=t+1,bn(l)}finally{v=o,T=i}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?hn(e,r):e.value=r,e.updatedAt=t)}function Ve(e,n,t,r=L,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:T,context:T?T.context:null,pure:t};return T===null||T!==dn&&(T.owned?T.owned.push(o):T.owned=[o]),o}function se(e){if(e.state===0)return;if(e.state===oe)return le(e);if(e.suspense&&j(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ye);)e.state&&n.push(e);for(let t=n.length-1;t>=0;t--)if(e=n[t],e.state===L)Q(e);else if(e.state===oe){const r=_;_=null,W(()=>le(e,n[0]),!1),_=r}}function W(e,n){if(_)return e();let t=!1;n||(_=[]),k?t=!0:k=[],ye++;try{const r=e();return Xn(t),r}catch(r){t||(k=null),_=null,bn(r)}}function Xn(e){if(_&&(yn(_),_=null),e)return;const n=k;k=null,n.length&&W(()=>un(n),!1)}function yn(e){for(let n=0;n<e.length;n++)se(e[n])}function Yn(e){let n,t=0;for(n=0;n<e.length;n++){const r=e[n];r.user?e[t++]=r:se(r)}for(n=0;n<t;n++)se(e[n])}function le(e,n){e.state=0;for(let t=0;t<e.sources.length;t+=1){const r=e.sources[t];if(r.sources){const i=r.state;i===L?r!==n&&(!r.updatedAt||r.updatedAt<ye)&&se(r):i===oe&&le(r,n)}}}function pn(e){for(let n=0;n<e.observers.length;n+=1){const t=e.observers[n];t.state||(t.state=oe,t.pure?_.push(t):k.push(t),t.observers&&pn(t))}}function be(e){let n;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),r=e.sourceSlots.pop(),i=t.observers;if(i&&i.length){const o=i.pop(),l=t.observerSlots.pop();r<i.length&&(o.sourceSlots[l]=r,i[r]=o,t.observerSlots[r]=l)}}if(e.owned){for(n=e.owned.length-1;n>=0;n--)be(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}e.state=0}function Jn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function bn(e,n=T){throw Jn(e)}function Oe(e){if(typeof e=="function"&&!e.length)return Oe(e());if(Array.isArray(e)){const n=[];for(let t=0;t<e.length;t++){const r=Oe(e[t]);Array.isArray(r)?n.push.apply(n,r):n.push(r)}return n}return e}const Me=Symbol("fallback");function ce(e){for(let n=0;n<e.length;n++)e[n]()}function Qn(e,n,t={}){let r=[],i=[],o=[],l=0,s=n.length>1?[]:null;return Ge(()=>ce(o)),()=>{let c=e()||[],a=c.length,d,f;return c[re],j(()=>{let $,g,u,h,y,p,C,x,E;if(a===0)l!==0&&(ce(o),o=[],r=[],i=[],l=0,s&&(s=[])),t.fallback&&(r=[Me],i[0]=V(M=>(o[0]=M,t.fallback())),l=1);else if(l===0){for(i=new Array(a),f=0;f<a;f++)r[f]=c[f],i[f]=V(A);l=a}else{for(u=new Array(a),h=new Array(a),s&&(y=new Array(a)),p=0,C=Math.min(l,a);p<C&&r[p]===c[p];p++);for(C=l-1,x=a-1;C>=p&&x>=p&&r[C]===c[x];C--,x--)u[x]=i[C],h[x]=o[C],s&&(y[x]=s[C]);for($=new Map,g=new Array(x+1),f=x;f>=p;f--)E=c[f],d=$.get(E),g[f]=d===void 0?-1:d,$.set(E,f);for(d=p;d<=C;d++)E=r[d],f=$.get(E),f!==void 0&&f!==-1?(u[f]=i[d],h[f]=o[d],s&&(y[f]=s[d]),f=g[f],$.set(E,f)):o[d]();for(f=p;f<a;f++)f in u?(i[f]=u[f],o[f]=h[f],s&&(s[f]=y[f],s[f](f))):i[f]=V(A);i=i.slice(0,l=a),r=c.slice(0)}return i});function A($){if(o[f]=$,s){const[g,u]=pe(f);return s[f]=u,n(c[f],g)}return n(c[f])}}}function Zn(e,n,t={}){let r=[],i=[],o=[],l=[],s=0,c;return Ge(()=>ce(o)),()=>{const a=e()||[],d=a.length;return a[re],j(()=>{if(d===0)return s!==0&&(ce(o),o=[],r=[],i=[],s=0,l=[]),t.fallback&&(r=[Me],i[0]=V(A=>(o[0]=A,t.fallback())),s=1),i;for(r[0]===Me&&(o[0](),o=[],r=[],i=[],s=0),c=0;c<d;c++)c<r.length&&r[c]!==a[c]?l[c](()=>a[c]):c>=r.length&&(i[c]=V(f));for(;c<r.length;c++)o[c]();return s=l.length=o.length=d,r=a.slice(0),i=i.slice(0,s)});function f(A){o[c]=A;const[$,g]=pe(a[c]);return l[c]=g,n($,c)}}}let et=!1;function m(e,n){return j(()=>e(n||{}))}const mn=e=>`Stale read from <${e}>.`;function R(e){const n="fallback"in e&&{fallback:()=>e.fallback};return O(Qn(()=>e.each,e.children,n||void 0))}function nt(e){const n="fallback"in e&&{fallback:()=>e.fallback};return O(Zn(()=>e.each,e.children,n||void 0))}function ze(e){const n=e.keyed,t=O(()=>e.when,void 0,{equals:(r,i)=>n?r===i:!r==!i});return O(()=>{const r=t();if(r){const i=e.children;return typeof i=="function"&&i.length>0?j(()=>i(n?r:()=>{if(!j(t))throw mn("Show");return e.when})):i}return e.fallback},void 0,void 0)}function Xe(e){let n=!1;const t=(o,l)=>(n?o[1]===l[1]:!o[1]==!l[1])&&o[2]===l[2],r=Wn(()=>e.children),i=O(()=>{let o=r();Array.isArray(o)||(o=[o]);for(let l=0;l<o.length;l++){const s=o[l].when;if(s)return n=!!o[l].keyed,[l,s,o[l]]}return[-1]},void 0,{equals:t});return O(()=>{const[o,l,s]=i();if(o<0)return e.fallback;const c=s.children;return typeof c=="function"&&c.length>0?j(()=>c(n?l:()=>{if(j(i)[0]!==o)throw mn("Match");return s.when})):c},void 0,void 0)}function ee(e){return e}function tt(e,n,t){let r=t.length,i=n.length,o=r,l=0,s=0,c=n[i-1].nextSibling,a=null;for(;l<i||s<o;){if(n[l]===t[s]){l++,s++;continue}for(;n[i-1]===t[o-1];)i--,o--;if(i===l){const d=o<r?s?t[s-1].nextSibling:t[o-s]:c;for(;s<o;)e.insertBefore(t[s++],d)}else if(o===s)for(;l<i;)(!a||!a.has(n[l]))&&n[l].remove(),l++;else if(n[l]===t[o-1]&&t[s]===n[i-1]){const d=n[--i].nextSibling;e.insertBefore(t[s++],n[l++].nextSibling),e.insertBefore(t[--o],d),n[i]=t[o]}else{if(!a){a=new Map;let f=s;for(;f<o;)a.set(t[f],f++)}const d=a.get(n[l]);if(d!=null)if(s<d&&d<o){let f=l,A=1,$;for(;++f<i&&f<o&&!(($=a.get(n[f]))==null||$!==d+A);)A++;if(A>d-s){const g=n[l];for(;s<d;)e.insertBefore(t[s++],g)}else e.replaceChild(t[s++],n[l++])}else l++;else n[l++].remove()}}}const Ye="_$DX_DELEGATE";function rt(e,n,t,r={}){let i;return V(o=>{i=o,n===document?e():b(n,e(),n.firstChild?null:void 0,t)},r.owner),()=>{i(),n.textContent=""}}function w(e,n,t){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=e,t?l.content.firstChild.firstChild:l.content.firstChild},o=n?()=>j(()=>document.importNode(r||(r=i()),!0)):()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function it(e,n=window.document){const t=n[Ye]||(n[Ye]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];t.has(o)||(t.add(o),n.addEventListener(o,ot))}}function I(e,n,t){t==null?e.removeAttribute(n):e.setAttribute(n,t)}function Je(e,n,t,r){Array.isArray(t)?(e[`$$${n}`]=t[0],e[`$$${n}Data`]=t[1]):e[`$$${n}`]=t}function b(e,n,t,r){if(t!==void 0&&!r&&(r=[]),typeof n!="function")return fe(e,n,r,t);S(i=>fe(e,n(),i,t),r)}function ot(e){const n=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}});t;){const r=t[n];if(r&&!t.disabled){const i=t[`${n}Data`];if(i!==void 0?r.call(t,i,e):r.call(t,e),e.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function fe(e,n,t,r,i){for(;typeof t=="function";)t=t();if(n===t)return t;const o=typeof n,l=r!==void 0;if(e=l&&t[0]&&t[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(n=n.toString(),n===t))return t;if(l){let s=t[0];s&&s.nodeType===3?s.data!==n&&(s.data=n):s=document.createTextNode(n),t=G(e,t,r,s)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||o==="boolean")t=G(e,t,r);else{if(o==="function")return S(()=>{let s=n();for(;typeof s=="function";)s=s();t=fe(e,s,t,r)}),()=>t;if(Array.isArray(n)){const s=[],c=t&&Array.isArray(t);if(je(s,n,t,i))return S(()=>t=fe(e,s,t,r,!0)),()=>t;if(s.length===0){if(t=G(e,t,r),l)return t}else c?t.length===0?Qe(e,s,r):tt(e,t,s):(t&&G(e),Qe(e,s));t=s}else if(n.nodeType){if(Array.isArray(t)){if(l)return t=G(e,t,r,n);G(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function je(e,n,t,r){let i=!1;for(let o=0,l=n.length;o<l;o++){let s=n[o],c=t&&t[e.length],a;if(!(s==null||s===!0||s===!1))if((a=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))i=je(e,s,c)||i;else if(a==="function")if(r){for(;typeof s=="function";)s=s();i=je(e,Array.isArray(s)?s:[s],Array.isArray(c)?c:[c])||i}else e.push(s),i=!0;else{const d=String(s);c&&c.nodeType===3&&c.data===d?e.push(c):e.push(document.createTextNode(d))}}return i}function Qe(e,n,t=null){for(let r=0,i=n.length;r<i;r++)e.insertBefore(n[r],t)}function G(e,n,t,r){if(t===void 0)return e.textContent="";const i=r||document.createTextNode("");if(n.length){let o=!1;for(let l=n.length-1;l>=0;l--){const s=n[l];if(i!==s){const c=s.parentNode===e;!o&&!l?c?e.replaceChild(i,s):e.insertBefore(i,t):c&&s.remove()}else o=!0}}else e.insertBefore(i,t);return[i]}const ae=Symbol("store-raw"),H=Symbol("store-node"),P=Symbol("store-has"),wn=Symbol("store-self");function $n(e){let n=e[F];if(!n&&(Object.defineProperty(e,F,{value:n=new Proxy(e,ct)}),!Array.isArray(e))){const t=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,o=t.length;i<o;i++){const l=t[i];r[l].get&&Object.defineProperty(e,l,{enumerable:r[l].enumerable,get:r[l].get.bind(n)})}}return n}function U(e){let n;return e!=null&&typeof e=="object"&&(e[F]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function K(e,n=new Set){let t,r,i,o;if(t=e!=null&&e[ae])return t;if(!U(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let l=0,s=e.length;l<s;l++)i=e[l],(r=K(i,n))!==i&&(e[l]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const l=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let c=0,a=l.length;c<a;c++)o=l[c],!s[o].get&&(i=e[o],(r=K(i,n))!==i&&(e[o]=r))}return e}function ue(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function J(e,n,t){if(e[n])return e[n];const[r,i]=pe(t,{equals:!1,internal:!0});return r.$=i,e[n]=r}function st(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===F||n===H||(delete t.value,delete t.writable,t.get=()=>e[F][n]),t}function vn(e){Ee()&&J(ue(e,H),wn)()}function lt(e){return vn(e),Reflect.ownKeys(e)}const ct={get(e,n,t){if(n===ae)return e;if(n===F)return t;if(n===re)return vn(e),t;const r=ue(e,H),i=r[n];let o=i?i():e[n];if(n===H||n===P||n==="__proto__")return o;if(!i){const l=Object.getOwnPropertyDescriptor(e,n);Ee()&&(typeof o!="function"||e.hasOwnProperty(n))&&!(l&&l.get)&&(o=J(r,n,o)())}return U(o)?$n(o):o},has(e,n){return n===ae||n===F||n===re||n===H||n===P||n==="__proto__"?!0:(Ee()&&J(ue(e,P),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:lt,getOwnPropertyDescriptor:st};function q(e,n,t,r=!1){if(!r&&e[n]===t)return;const i=e[n],o=e.length;t===void 0?(delete e[n],e[P]&&e[P][n]&&i!==void 0&&e[P][n].$()):(e[n]=t,e[P]&&e[P][n]&&i===void 0&&e[P][n].$());let l=ue(e,H),s;if((s=J(l,n,i))&&s.$(()=>t),Array.isArray(e)&&e.length!==o){for(let c=e.length;c<o;c++)(s=l[c])&&s.$();(s=J(l,"length",o))&&s.$(e.length)}(s=l[wn])&&s.$()}function An(e,n){const t=Object.keys(n);for(let r=0;r<t.length;r+=1){const i=t[r];q(e,i,n[i])}}function ft(e,n){if(typeof n=="function"&&(n=n(e)),n=K(n),Array.isArray(n)){if(e===n)return;let t=0,r=n.length;for(;t<r;t++){const i=n[t];e[t]!==i&&q(e,t,i)}q(e,"length",r)}else An(e,n)}function X(e,n,t=[]){let r,i=e;if(n.length>1){r=n.shift();const l=typeof r,s=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)X(e,[r[c]].concat(n),t);return}else if(s&&l==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&X(e,[c].concat(n),t);return}else if(s&&l==="object"){const{from:c=0,to:a=e.length-1,by:d=1}=r;for(let f=c;f<=a;f+=d)X(e,[f].concat(n),t);return}else if(n.length>1){X(e[r],n,[r].concat(t));return}i=e[r],t=[r].concat(t)}let o=n[0];typeof o=="function"&&(o=o(i,t),o===i)||r===void 0&&o==null||(o=K(o),r===void 0||U(i)&&U(o)&&!Array.isArray(o)?An(i,o):q(e,r,o))}function at(...[e,n]){const t=K(e||{}),r=Array.isArray(t),i=$n(t);function o(...l){qn(()=>{r&&l.length===1?ft(t,l[0]):X(t,l)})}return[i,o]}const de=new WeakMap,xn={get(e,n){if(n===ae)return e;const t=e[n];let r;return U(t)?de.get(t)||(de.set(t,r=new Proxy(t,xn)),r):t},set(e,n,t){return q(e,n,K(t)),!0},deleteProperty(e,n){return q(e,n,void 0,!0),!0}};function Y(e){return n=>{if(U(n)){let t;(t=de.get(n))||de.set(n,t=new Proxy(n,xn)),e(t)}return n}}function ut(e,n){return e.nodes.map(t=>t.map(({edge:r,dest:i})=>({edge:r,dest:i,nbBalls:n})))}function dt(e,n){const t=new Array(e+1);for(let r=0;r<=e;r++){const i=[];for(const o of n)r-o>=0&&i.push({edge:o-1,dest:r-o});t[r]=i}return{nodes:t}}function gt(e,n){const t=new Array(e*n);for(let r=0;r<e;r++)for(let i=0;i<n;i++){const o=[];r>0&&o.push({edge:0,dest:i*e+r-1}),r>0&&i>0&&o.push({edge:1,dest:(i-1)*e+r-1}),i>0&&o.push({edge:2,dest:(i-1)*e+r}),t[i*e+r]=o}return{nodes:t}}function ht(e){return{width:800,height:400,position:n=>n==0?void 0:n<=8?{x:(n-1)*100,y:0}:{x:(n-9)*100,y:200},legend:e.map(n=>({edge:n-1,name:""+n})),vertexLabel:n=>""+n}}function yt(e,n){const t=Math.max(e,n);return{width:180*t,height:180*t,position:r=>r==0?void 0:{x:50+180*(r%e),y:20+180*(n-1-(r/e|0))},legend:[{edge:0,name:"⇐"},{edge:1,name:"⇙"},{edge:2,name:"⇓"}],vertexLabel:r=>{}}}function Sn(e,n){const t=e[n];if(t.length!==0)return t[Math.random()*t.length|0]}function pt(e,n,t){return n[t]?Sn(e,t):e[t].find(({dest:r})=>n[r])}function Ze(e,n){const t=e[n];let r=0;const i=[];for(let s=0;s<t.length;s++)r+=t[s].nbBalls,i.push(r);if(r==0)return;let o=Math.random()*r|0,l=i.findIndex(s=>o<s);return{dest:t[l].dest,edge:t[l].edge}}function bt(e){const n=e.config.graphType;return n.type==="nim"?dt(n.size,n.moves):gt(n.width,n.height)}function Tn(e){const n=bt(e),t=ut(n,e.config.ballsPerColor);return{...e,machine:t,victories:0,losses:0,isRunning:!1}}var mt=w('<div class="rounded overflow-hidden shadow-lg p-4"><div class="font-bold text-xl mb-2">');const He=e=>(()=>{var n=mt(),t=n.firstChild;return b(t,()=>e.title),b(n,()=>e.children,null),n})();var ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var en=1/0,Cn=9007199254740991,wt=17976931348623157e292,nn=NaN,$t="[object Function]",vt="[object GeneratorFunction]",At="[object Symbol]",xt=/^\s+|\s+$/g,St=/^[-+]0x[0-9a-f]+$/i,Tt=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,Ct=/^(?:0|[1-9]\d*)$/,Et=parseInt,Ot=Object.prototype,En=Ot.toString,Mt=Math.ceil,jt=Math.max;function Pt(e,n,t,r){for(var i=-1,o=jt(Mt((n-e)/(t||1)),0),l=Array(o);o--;)l[++i]=e,e+=t;return l}function kt(e){return function(n,t,r){return r&&typeof r!="number"&&It(n,t,r)&&(t=r=void 0),n=Ae(n),t===void 0?(t=n,n=0):t=Ae(t),r=r===void 0?n<t?1:-1:Ae(r),Pt(n,t,r)}}function Lt(e,n){return n=n??Cn,!!n&&(typeof e=="number"||Ct.test(e))&&e>-1&&e%1==0&&e<n}function It(e,n,t){if(!ge(t))return!1;var r=typeof n;return(r=="number"?Rt(t)&&Lt(n,t.length):r=="string"&&n in t)?Nt(t[n],e):!1}function Nt(e,n){return e===n||e!==e&&n!==n}function Rt(e){return e!=null&&Bt(e.length)&&!Ft(e)}function Ft(e){var n=ge(e)?En.call(e):"";return n==$t||n==vt}function Bt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Cn}function ge(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function Dt(e){return!!e&&typeof e=="object"}function Gt(e){return typeof e=="symbol"||Dt(e)&&En.call(e)==At}function Ae(e){if(!e)return e===0?e:0;if(e=Vt(e),e===en||e===-en){var n=e<0?-1:1;return n*wt}return e===e?e:0}function Vt(e){if(typeof e=="number")return e;if(Gt(e))return nn;if(ge(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=ge(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(xt,"");var t=Tt.test(e);return t||_t.test(e)?Et(e.slice(2),t?2:8):St.test(e)?nn:+e}var Ht=kt(),Ut=Ht;const te=_n(Ut);var Kt=w("<div>Nombre de casiers"),xe=w("<select class=select>"),qt=w("<div>Coups possibles"),Wt=w('<div class="flex flex-row justify-between">'),zt=w("<div>Hauteur de la grille"),Xt=w("<div>Largeur de la grille"),Yt=w("<button class=btn>Arrêter la machine"),Jt=w("<button class=btn>Lancer la machine"),Qt=w('<div class="grid grid-cols-2 gap-4"><div>type de jeu</div><select class=select><option value=nim>Nim</option><option value=king>Roi</option></select><div>Adversaire</div><select class=select><option value=random>Aléatoire</option><option value=expert>Expert</option><option value=machine>Machine</option></select><div>Billes par couleur</div><input type=number class=input-number min=2 max=10><div>Récompense</div><input type=number class=input-number min=1><div>Pénalité</div><input type=number class=input-number max=0><div>La machine commence</div><select class=select><option value=y>Oui</option><option value=n>Non</option></select><button class=btn>Accélerer'),Se=w("<option>"),Zt=w('<label><input type=checkbox class=checkbox><span class="ml-2 text-sm font-medium text-gray-900">');function er(e,n,t){return t?[...e,n].toSorted():e.filter(r=>r!==n)}function nr(e,n){return{...e,graphType:n==="nim"?{type:"nim",size:8,moves:[1,2]}:{type:"king",width:3,height:3}}}const tr=e=>m(He,{title:"Choix des paramètres",get children(){var n=Qt(),t=n.firstChild,r=t.nextSibling,i=r.nextSibling,o=i.nextSibling,l=o.nextSibling,s=l.nextSibling,c=s.nextSibling,a=c.nextSibling,d=a.nextSibling,f=d.nextSibling,A=f.nextSibling,$=A.nextSibling,g=$.nextSibling;return r.addEventListener("change",u=>e.actions.changeConfig(h=>nr(h,u.currentTarget.value))),b(n,m(Xe,{get children(){return[m(ee,{get when(){return e.config.graphType.type==="nim"},get children(){return[Kt(),(()=>{var u=xe();return u.addEventListener("change",h=>e.actions.changeConfig(Y(y=>{y.graphType.size=Number(h.currentTarget.value)}))),b(u,m(R,{get each(){return te(8,17)},children:h=>(()=>{var y=Se();return y.value=h,b(y,h),y})()})),S(()=>u.value=e.config.graphType.size),u})(),qt(),(()=>{var u=Wt();return b(u,m(R,{get each(){return te(1,6)},children:h=>(()=>{var y=Zt(),p=y.firstChild,C=p.nextSibling;return p.addEventListener("change",x=>e.actions.changeConfig(Y(E=>{const M=E.graphType;M.moves=er(M.moves,h,x.currentTarget.checked)}))),b(C,h),S(()=>p.checked=e.config.graphType.moves.includes(h)),y})()})),u})()]}}),m(ee,{get when(){return e.config.graphType.type==="king"},get children(){return[zt(),(()=>{var u=xe();return u.addEventListener("change",h=>e.actions.changeConfig(Y(y=>{y.graphType.height=Number(h.currentTarget.value)}))),b(u,m(R,{get each(){return te(3,7)},children:h=>(()=>{var y=Se();return y.value=h,b(y,h),y})()})),S(()=>u.value=e.config.graphType.height),u})(),Xt(),(()=>{var u=xe();return u.addEventListener("change",h=>e.actions.changeConfig(Y(y=>{y.graphType.width=Number(h.currentTarget.value)}))),b(u,m(R,{get each(){return te(3,7)},children:h=>(()=>{var y=Se();return y.value=h,b(y,h),y})()})),S(()=>u.value=e.config.graphType.width),u})()]}})]}}),i),o.addEventListener("change",u=>e.actions.changeConfig(h=>({...h,adversary:u.currentTarget.value}))),s.addEventListener("change",u=>e.actions.changeConfig(h=>({...h,ballsPerColor:u.currentTarget.valueAsNumber}))),a.addEventListener("change",u=>e.actions.changeConfig(h=>({...h,reward:u.currentTarget.valueAsNumber}))),f.addEventListener("change",u=>e.actions.changeConfig(h=>({...h,penalty:u.currentTarget.valueAsNumber}))),$.addEventListener("change",u=>e.actions.changeConfig(h=>({...h,machineStarts:u.currentTarget.value==="y"}))),b(n,m(Xe,{get children(){return[m(ee,{get when(){return e.isRunning},get children(){var u=Yt();return Je(u,"click",e.actions.stopMachine),u}}),m(ee,{get when(){return!e.isRunning},get children(){var u=Jt();return Je(u,"click",e.actions.startMachine),u}})]}}),g),g.addEventListener("pointerleave",()=>e.actions.setFastMode(!1)),g.$$pointerup=()=>e.actions.setFastMode(!1),g.$$pointerdown=()=>e.actions.setFastMode(!0),S(()=>r.value=e.config.graphType.type),S(()=>o.value=e.config.adversary),S(()=>s.value=e.config.ballsPerColor),S(()=>a.value=e.config.reward),S(()=>f.value=e.config.penalty),S(()=>$.value=e.config.machineStarts?"y":"n"),n}});it(["click","pointerdown","pointerup"]);var rr=w('<div class="grid grid-cols-2 gap-4">'),ir=w('<input type=color class="inline w-12 h-12">'),or=w("<span class=text-2xl> : ");const sr=e=>m(He,{title:"Légende",get children(){var n=rr();return b(n,m(R,{get each(){return e.legend},children:({edge:t,name:r})=>[(()=>{var i=ir();return i.addEventListener("change",o=>e.setColor(t,o.currentTarget.value)),S(()=>i.value=e.colors[t]??"#000000"),i})(),(()=>{var i=or();return i.firstChild,b(i,r,null),i})()]})),n}});var lr=w('<div class="flex flex-row justify-between mt-4 mb-2"><span class="text-blue-600 font-bold">Victoires: </span><div class="w-full bg-red-600 rounded-full h-6"><div class="h-6 bg-blue-600 rounded-l-full"></div></div><span class="text-red-600 font-bold">Défaites: ');const cr=e=>{const n=()=>e.victories+e.losses;return(()=>{var t=lr(),r=t.firstChild;r.firstChild;var i=r.nextSibling,o=i.firstChild,l=i.nextSibling;return l.firstChild,b(r,()=>e.victories,null),b(l,()=>e.losses,null),S(s=>(s=n()===0?"50%":`${100*e.victories/n()}%`)!=null?o.style.setProperty("width",s):o.style.removeProperty("width")),t})()};var tn=1/0,On=9007199254740991,fr=17976931348623157e292,rn=NaN,ar=4294967295,ur="[object Arguments]",dr="[object Function]",gr="[object GeneratorFunction]",Pe="[object Map]",hr="[object Object]",on="[object Promise]",ke="[object Set]",yr="[object String]",pr="[object Symbol]",sn="[object WeakMap]",ln="[object DataView]",br=/[\\^$.*+?()[\]{}|]/g,mr=/^\s+|\s+$/g,wr=/^[-+]0x[0-9a-f]+$/i,$r=/^0b[01]+$/i,vr=/^\[object .+?Constructor\]$/,Ar=/^0o[0-7]+$/i,xr=/^(?:0|[1-9]\d*)$/,Ue="\\ud800-\\udfff",Mn="\\u0300-\\u036f\\ufe20-\\ufe23",jn="\\u20d0-\\u20f0",Pn="\\ufe0e\\ufe0f",Sr="["+Ue+"]",Le="["+Mn+jn+"]",Ie="\\ud83c[\\udffb-\\udfff]",Tr="(?:"+Le+"|"+Ie+")",kn="[^"+Ue+"]",Ln="(?:\\ud83c[\\udde6-\\uddff]){2}",In="[\\ud800-\\udbff][\\udc00-\\udfff]",Nn="\\u200d",Rn=Tr+"?",Fn="["+Pn+"]?",_r="(?:"+Nn+"(?:"+[kn,Ln,In].join("|")+")"+Fn+Rn+")*",Cr=Fn+Rn+_r,Er="(?:"+[kn+Le+"?",Le,Ln,In,Sr].join("|")+")",Or=RegExp(Ie+"(?="+Ie+")|"+Er+Cr,"g"),Mr=RegExp("["+Nn+Ue+Mn+jn+Pn+"]"),jr=parseInt,Pr=typeof ne=="object"&&ne&&ne.Object===Object&&ne,kr=typeof self=="object"&&self&&self.Object===Object&&self,B=Pr||kr||Function("return this")();function Lr(e,n){for(var t=-1,r=e?e.length:0,i=Array(r);++t<r;)i[t]=n(e[t],t,e);return i}function Ir(e){return e.split("")}function Nr(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}function Rr(e,n){return Lr(n,function(t){return e[t]})}function Fr(e,n){return e?.[n]}function Br(e){return Mr.test(e)}function Dr(e){var n=!1;if(e!=null&&typeof e.toString!="function")try{n=!!(e+"")}catch{}return n}function Gr(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}function Vr(e){var n=-1,t=Array(e.size);return e.forEach(function(r,i){t[++n]=[i,r]}),t}function Hr(e,n){return function(t){return e(n(t))}}function Ur(e){var n=-1,t=Array(e.size);return e.forEach(function(r){t[++n]=r}),t}function Kr(e){return Br(e)?qr(e):Ir(e)}function qr(e){return e.match(Or)||[]}var Wr=Function.prototype,me=Object.prototype,Te=B["__core-js_shared__"],cn=function(){var e=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Bn=Wr.toString,we=me.hasOwnProperty,z=me.toString,zr=RegExp("^"+Bn.call(we).replace(br,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fn=B.Symbol,_e=fn?fn.iterator:void 0,Xr=me.propertyIsEnumerable,Yr=Math.floor,Jr=Hr(Object.keys,Object),Qr=Math.random,Ne=Z(B,"DataView"),Re=Z(B,"Map"),Fe=Z(B,"Promise"),Be=Z(B,"Set"),De=Z(B,"WeakMap"),Zr=D(Ne),ei=D(Re),ni=D(Fe),ti=D(Be),ri=D(De);function ii(e,n){var t=Dn(e)||pi(e)?Nr(e.length,String):[],r=t.length,i=!!r;for(var o in e)we.call(e,o)&&!(i&&(o=="length"||ui(o,r)))&&t.push(o);return t}function oi(e,n,t){return e===e&&(t!==void 0&&(e=e<=t?e:t),e=e>=n?e:n),e}function si(e){return z.call(e)}function li(e){if(!he(e)||di(e))return!1;var n=Gn(e)||Dr(e)?zr:vr;return n.test(D(e))}function ci(e){if(!gi(e))return Jr(e);var n=[];for(var t in Object(e))we.call(e,t)&&t!="constructor"&&n.push(t);return n}function fi(e,n){return e+Yr(Qr()*(n-e+1))}function ai(e,n){var t=-1,r=e.length;for(n||(n=Array(r));++t<r;)n[t]=e[t];return n}function Z(e,n){var t=Fr(e,n);return li(t)?t:void 0}var N=si;(Ne&&N(new Ne(new ArrayBuffer(1)))!=ln||Re&&N(new Re)!=Pe||Fe&&N(Fe.resolve())!=on||Be&&N(new Be)!=ke||De&&N(new De)!=sn)&&(N=function(e){var n=z.call(e),t=n==hr?e.constructor:void 0,r=t?D(t):void 0;if(r)switch(r){case Zr:return ln;case ei:return Pe;case ni:return on;case ti:return ke;case ri:return sn}return n});function ui(e,n){return n=n??On,!!n&&(typeof e=="number"||xr.test(e))&&e>-1&&e%1==0&&e<n}function di(e){return!!cn&&cn in e}function gi(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||me;return e===t}function D(e){if(e!=null){try{return Bn.call(e)}catch{}try{return e+""}catch{}}return""}function hi(e,n,t){var r=-1,i=vi(e),o=i.length,l=o-1;for(n===void 0?n=1:n=oi(xi(n),0,o);++r<n;){var s=fi(r,l),c=i[s];i[s]=i[r],i[r]=c}return i.length=n,i}function yi(e){return hi(e,ar)}function pi(e){return bi(e)&&we.call(e,"callee")&&(!Xr.call(e,"callee")||z.call(e)==ur)}var Dn=Array.isArray;function Ke(e){return e!=null&&mi(e.length)&&!Gn(e)}function bi(e){return qe(e)&&Ke(e)}function Gn(e){var n=he(e)?z.call(e):"";return n==dr||n==gr}function mi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=On}function he(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function qe(e){return!!e&&typeof e=="object"}function wi(e){return typeof e=="string"||!Dn(e)&&qe(e)&&z.call(e)==yr}function $i(e){return typeof e=="symbol"||qe(e)&&z.call(e)==pr}function vi(e){if(!e)return[];if(Ke(e))return wi(e)?Kr(e):ai(e);if(_e&&e[_e])return Gr(e[_e]());var n=N(e),t=n==Pe?Vr:n==ke?Ur:_i;return t(e)}function Ai(e){if(!e)return e===0?e:0;if(e=Si(e),e===tn||e===-tn){var n=e<0?-1:1;return n*fr}return e===e?e:0}function xi(e){var n=Ai(e),t=n%1;return n===n?t?n-t:n:0}function Si(e){if(typeof e=="number")return e;if($i(e))return rn;if(he(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=he(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(mr,"");var t=$r.test(e);return t||Ar.test(e)?jr(e.slice(2),t?2:8):wr.test(e)?rn:+e}function Ti(e){return Ke(e)?ii(e):ci(e)}function _i(e){return e?Rr(e,Ti(e)):[]}var Ci=yi;const Ei=_n(Ci);function Oi(e,n){const t=new Array(e);return t.fill(n),t}function an(e){const n=100*Math.sin(e+1);return n-Math.floor(n)}var Mi=w("<svg><text x=50 y=150></svg>",!1,!0),ji=w('<svg><g><path d="M1 1 L10 109 L90 109 L99 1"stroke-width=3.0 stroke=#000 fill=transparent></svg>',!1,!0),Pi=w("<svg><circle r=5></svg>",!1,!0),ki=w("<svg><rect y=115 height=20 stroke=black></svg>",!1,!0);const Li=e=>{const n=O(()=>e.displayer.position(e.idx)),t=()=>e.displayer.vertexLabel(e.idx),r=O(()=>Ei(e.box.flatMap(({nbBalls:l,edge:s})=>Oi(l,s)))),i=()=>Math.min(95,r().length),o=()=>{const l=[],s=e.box.reduce((a,{nbBalls:d})=>a+d,0);let c=0;for(const{nbBalls:a,edge:d}of e.box)l.push({begin:c/s,end:(c+a)/s,edge:d}),c+=a;return l};return m(ze,{get when(){return n()},get children(){var l=ji();return l.firstChild,b(l,m(R,{get each(){return r()},children:(s,c)=>(()=>{var a=Pi();return S(d=>{var f=15+an(e.idx+c())*71,A=100-an(10+e.idx+c())*i(),$=e.colors[s];return f!==d.e&&I(a,"cx",d.e=f),A!==d.t&&I(a,"cy",d.t=A),$!==d.a&&I(a,"fill",d.a=$),d},{e:void 0,t:void 0,a:void 0}),a})()}),null),b(l,m(nt,{get each(){return o()},children:s=>(()=>{var c=ki();return S(a=>{var d=3+94*s().begin,f=94*(s().end-s().begin),A=e.colors[s().edge];return d!==a.e&&I(c,"x",a.e=d),f!==a.t&&I(c,"width",a.t=f),A!==a.a&&I(c,"fill",a.a=A),a},{e:void 0,t:void 0,a:void 0}),c})()}),null),b(l,m(ze,{get when(){return t()},get children(){var s=Mi();return b(s,t),s}}),null),S(s=>(s=`translate(${n().x}px, ${n().y}px)`)!=null?l.style.setProperty("transform",s):l.style.removeProperty("transform")),l}})};var Ii=w("<div class=w-42vw><svg>");const Ni=e=>(()=>{var n=Ii(),t=n.firstChild;return b(t,m(R,{get each(){return e.machine},children:(r,i)=>m(Li,{get displayer(){return e.displayer},get colors(){return e.colors},get idx(){return i()},box:r})})),S(()=>I(t,"viewBox",`0 0 ${e.displayer.width} ${e.displayer.height}`)),n})();var Ce=(e,n,t)=>{const r=t(e,n);return Ge(()=>clearInterval(r))},Ri=(e,n,t)=>{if(typeof n=="number"){Ce(e,n,t);return}let r=!1,i=performance.now(),o=0,l=!1;const s=()=>{j(e),i=performance.now(),r=t===setTimeout};Kn(c=>{if(r)return;const a=n();if(a===!1)return c&&(o+=(performance.now()-i)/c),a;if(c===!1&&(i=performance.now()),l){if(c&&(o+=(performance.now()-i)/c),i=performance.now(),o>=1)o=0,s();else if(o>0){const[d,f]=pe(void 0,{equals:!1});return d(),Ce(()=>{o=0,l=!1,f(),s()},(1-o)*a,setTimeout),a}}return l=!0,Ce(s,a,t),a})},Fi=w('<div class="flex flex-col">'),Bi=w('<div class="w-screen flex flex-row justify-around items-start">');const Di=["#f6b73c","#ff0000","#00ffff","#90ee90","#900090"],Gi={graphType:{type:"nim",size:8,moves:[1,2]},adversary:"random",ballsPerColor:6,reward:3,penalty:-1,machineStarts:!0},Vi=Tn({config:Gi,victories:0,losses:0,machine:[],isRunning:!1,colors:Di,fastMode:!1}),Hi=()=>{const[e,n]=at(Vi),t=()=>e.machine,r=()=>{const g=e.config.graphType;return g.type==="nim"?g.size:g.width*g.height-1},i=O(()=>{const g=e.config.graphType;return g.type==="nim"?ht(g.moves):yt(g.width,g.height)}),o=O(()=>{const g=t().length,u=new Array(g);for(let h=0;h<g;h++)u[h]=t()[h].every(({dest:y})=>!u[y]);return u}),l=g=>{switch(e.config.adversary){case"random":return Sn(t(),g);case"expert":return pt(t(),o(),g);case"machine":return Ze(t(),g)}};Ri(()=>{let g=e.config.machineStarts,u=r();const h=[];for(;;){const p=g?Ze(t(),u):l(u);if(p===void 0)break;h.push({pos:u,edge:p.edge,isMachineTurn:g}),g=!g,u=p.dest}const y=g;n(Y(p=>{y?p.victories++:p.losses++;for(const{pos:x,edge:E,isMachineTurn:M}of h){const $e=p.machine[x],We=$e.findIndex(Vn=>Vn.edge===E);$e[We].nbBalls=Math.max(0,$e[We].nbBalls+(!M&&p.config.adversary!=="machine"?0:y===M?p.config.reward:p.config.penalty))}const C=p.machine.length;for(let x=0;x<C;x++)if(p.machine[x].every(({nbBalls:E})=>E===0)){const E=p.machine[x].length;for(let M=0;M<E;M++)p.machine[x][M].nbBalls=p.config.ballsPerColor}}))},()=>e.isRunning&&(e.fastMode?100:500),setInterval);const c=g=>{const u=g(e.config),h=Tn({...e,config:u});n(h)},a=(g,u)=>{n("colors",g,u)},$={changeConfig:c,startMachine:()=>{n("isRunning",!0)},stopMachine:()=>{n("isRunning",!1)},setFastMode:g=>{n("fastMode",g)}};return(()=>{var g=Bi();return b(g,m(He,{title:"Visualisation de la machine",get children(){var u=Fi();return b(u,m(Ni,{get displayer(){return i()},get colors(){return e.colors},get machine(){return e.machine}}),null),b(u,m(cr,{get victories(){return e.victories},get losses(){return e.losses}}),null),u}}),null),b(g,m(sr,{get legend(){return i().legend},get colors(){return e.colors},setColor:a}),null),b(g,m(tr,{get config(){return e.config},get isRunning(){return e.isRunning},actions:$}),null),g})()},Ui=document.getElementById("root");rt(()=>m(Hi,{}),Ui);
