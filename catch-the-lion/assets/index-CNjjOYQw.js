(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();const Ir=!1;var ur=Array.isArray,Rn=Array.prototype.indexOf,fr=Array.from,er=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,In=Object.getOwnPropertyDescriptors,$n=Object.prototype,jn=Array.prototype,$r=Object.getPrototypeOf,Er=Object.isExtensible;function Fn(e){return typeof e=="function"}const We=()=>{};function Bn(e){for(var t=0;t<e.length;t++)e[t]()}function jr(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}function Fr(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const ae=2,cr=4,vr=8,Ue=16,Pe=32,et=64,dr=128,pe=256,Ft=512,J=1024,fe=2048,Ge=4096,ge=8192,ft=16384,Ut=32768,ct=65536,kr=1<<17,Hn=1<<18,vt=1<<19,Un=1<<20,tr=1<<21,Gt=1<<22,Je=1<<23,$t=Symbol("$state"),Gn=Symbol(""),Et=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Br(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function zn(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Wn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Yn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Kn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Jn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Zn(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const zt=1,Wt=2,Hr=4,ei=8,ti=16,ri=4,Ur=1,ni=2,V=Symbol(),ii="http://www.w3.org/1999/xhtml";function ai(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let si=!1;function Gr(e){return e===this.v}function li(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function zr(e){return!li(e,this.v)}let oi=!1,se=null;function st(e){se=e}function dt(e,t=!1,r){se={p:se,c:null,e:null,s:e,x:null,l:null}}function pt(e){var t=se,r=t.e;if(r!==null){t.e=null;for(var n of r)sn(n)}return se=t.p,{}}function Wr(){return!0}let nt=[];function ui(){var e=nt;nt=[],Bn(e)}function tt(e){if(nt.length===0){var t=nt;queueMicrotask(()=>{t===nt&&ui()})}nt.push(e)}const fi=new WeakMap;function Yr(e){var t=D;if(t===null)return N.f|=Je,e;if((t.f&Ut)===0){if((t.f&dr)===0)throw!t.parent&&e instanceof Error&&Vr(e),e;t.b.error(e)}else lt(e,t)}function lt(e,t){for(;t!==null;){if((t.f&dr)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&Vr(e),e}function Vr(e){const t=fi.get(e);t&&(er(e,"message",{value:t.message}),er(e,"stack",{value:t.stack}))}const Dt=new Set;let Y=null,rr=new Set,$e=[],pr=null,nr=!1;class _e{current=new Map;#n=new Map;#r=new Set;#v=0;#a=null;#o=[];#i=[];#t=[];#e=[];#s=[];#u=[];skipped_effects=new Set;process(t){$e=[];var r=_e.apply(this);for(const a of t)this.#f(a);if(this.#v===0){this.#c();var n=this.#i,i=this.#t;this.#i=[],this.#t=[],this.#e=[],Y=null,Ar(n),Ar(i),this.#a?.resolve()}else this.#l(this.#i),this.#l(this.#t),this.#l(this.#e);r();for(const a of this.#o)Pt(a);this.#o=[]}#f(t){t.f^=J;for(var r=t.first;r!==null;){var n=r.f,i=(n&(Pe|et))!==0,a=i&&(n&J)!==0,s=a||(n&ge)!==0||this.skipped_effects.has(r);if(!s&&r.fn!==null){i?r.f^=J:(n&cr)!==0?this.#t.push(r):(n&J)===0&&((n&Gt)!==0&&r.b?.is_pending()?this.#o.push(r):Vt(r)&&((r.f&Ue)!==0&&this.#e.push(r),Pt(r)));var f=r.first;if(f!==null){r=f;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)r=l.next,l=l.parent}}#l(t){for(const r of t)((r.f&fe)!==0?this.#s:this.#u).push(r),ee(r,J);t.length=0}capture(t,r){this.#n.has(t)||this.#n.set(t,r),this.current.set(t,t.v)}activate(){Y=this}deactivate(){Y=null;for(const t of rr)if(rr.delete(t),t(),Y!==null)break}flush(){if($e.length>0){if(this.activate(),ci(),Y!==null&&Y!==this)return}else this.#v===0&&this.#c();this.deactivate()}#c(){for(const t of this.#r)t();if(this.#r.clear(),Dt.size>1){this.#n.clear();let t=!0;for(const r of Dt){if(r===this){t=!1;continue}for(const[n,i]of this.current){if(r.current.has(n))if(t)r.current.set(n,i);else continue;Kr(n)}if($e.length>0){Y=r;const n=_e.apply(r);for(const i of $e)r.#f(i);$e=[],n()}}Y=null}Dt.delete(this)}increment(){this.#v+=1}decrement(){if(this.#v-=1,this.#v===0){for(const t of this.#s)ee(t,fe),Qe(t);for(const t of this.#u)ee(t,Ge),Qe(t);this.flush()}else this.deactivate()}add_callback(t){this.#r.add(t)}settled(){return(this.#a??=jr()).promise}static ensure(){if(Y===null){const t=Y=new _e;Dt.add(Y),_e.enqueue(()=>{Y===t&&t.flush()})}return Y}static enqueue(t){tt(t)}static apply(t){return We}}function ci(){var e=at;nr=!0;try{var t=0;for(Pr(!0);$e.length>0;){var r=_e.ensure();if(t++>1e3){var n,i;vi()}r.process($e),Be.clear()}}finally{nr=!1,Pr(e),pr=null}}function vi(){try{Kn()}catch(e){lt(e,pr)}}let Ye=null;function Ar(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(ft|ge))===0&&Vt(n)&&(Ye=[],Pt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?cn(n):n.fn=null),Ye?.length>0)){Be.clear();for(const i of Ye)Pt(i);Ye=[]}}Ye=null}}function Kr(e){if(e.reactions!==null)for(const t of e.reactions){const r=t.f;(r&ae)!==0?Kr(t):(r&(Gt|Ue))!==0&&(ee(t,fe),Qe(t))}}function Qe(e){for(var t=pr=e;t.parent!==null;){t=t.parent;var r=t.f;if(nr&&t===D&&(r&Ue)!==0)return;if((r&(et|Pe))!==0){if((r&J)===0)return;t.f^=J}}$e.push(t)}function di(e){let t=0,r=Ze(0),n;return()=>{Ci()&&(o(r),on(()=>(t===0&&(n=qt(()=>e(()=>kt(r)))),t+=1,()=>{tt(()=>{t-=1,t===0&&(n?.(),n=void 0,kt(r))})})))}}var pi=ct|vt|dr;function hi(e,t,r){new _i(e,t,r)}class _i{parent;#n=!1;#r;#v=null;#a;#o;#i;#t=null;#e=null;#s=null;#u=null;#f=0;#l=0;#c=!1;#d=null;#g=()=>{this.#d&&ot(this.#d,this.#f)};#m=di(()=>(this.#d=Ze(this.#f),()=>{this.#d=null}));constructor(t,r,n){this.#r=t,this.#a=r,this.#o=n,this.parent=D.b,this.#n=!!this.#a.pending,this.#i=Yt(()=>{D.b=this;{try{this.#t=de(()=>n(this.#r))}catch(i){this.error(i)}this.#l>0?this.#h():this.#n=!1}},pi)}#y(){try{this.#t=de(()=>this.#o(this.#r))}catch(t){this.error(t)}this.#n=!1}#w(){const t=this.#a.pending;t&&(this.#e=de(()=>t(this.#r)),_e.enqueue(()=>{this.#t=this.#p(()=>(_e.ensure(),de(()=>this.#o(this.#r)))),this.#l>0?this.#h():(it(this.#e,()=>{this.#e=null}),this.#n=!1)}))}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#p(t){var r=D,n=N,i=se;Ee(this.#i),ie(this.#i),st(this.#i.ctx);try{return t()}catch(a){return Yr(a),null}finally{Ee(r),ie(n),st(i)}}#h(){const t=this.#a.pending;this.#t!==null&&(this.#u=document.createDocumentFragment(),gi(this.#t,this.#u)),this.#e===null&&(this.#e=de(()=>t(this.#r)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#l+=t,this.#l===0&&(this.#n=!1,this.#e&&it(this.#e,()=>{this.#e=null}),this.#u&&(this.#r.before(this.#u),this.#u=null))}update_pending_count(t){this.#_(t),this.#f+=t,rr.add(this.#g)}get_effect_pending(){return this.#m(),o(this.#d)}error(t){var r=this.#a.onerror;let n=this.#a.failed;if(this.#c||!r&&!n)throw t;this.#t&&(ue(this.#t),this.#t=null),this.#e&&(ue(this.#e),this.#e=null),this.#s&&(ue(this.#s),this.#s=null);var i=!1,a=!1;const s=()=>{if(i){ai();return}i=!0,a&&Zn(),_e.ensure(),this.#f=0,this.#s!==null&&it(this.#s,()=>{this.#s=null}),this.#n=this.has_pending_snippet(),this.#t=this.#p(()=>(this.#c=!1,de(()=>this.#o(this.#r)))),this.#l>0?this.#h():this.#n=!1};var f=N;try{ie(null),a=!0,r?.(t,s),a=!1}catch(l){lt(l,this.#i&&this.#i.parent)}finally{ie(f)}n&&tt(()=>{this.#s=this.#p(()=>{this.#c=!0;try{return de(()=>{n(this.#r,()=>t,()=>s)})}catch(l){return lt(l,this.#i.parent),null}finally{this.#c=!1}})})}}function gi(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var i=r===n?null:St(r);t.append(r),r=i}}function mi(e,t,r){const n=hr;if(t.length===0){r(e.map(n));return}var i=Y,a=D,s=yi();Promise.all(t.map(f=>wi(f))).then(f=>{i?.activate(),s();try{r([...e.map(n),...f])}catch(l){(a.f&ft)===0&&lt(l,a)}i?.deactivate(),Jr()}).catch(f=>{lt(f,a)})}function yi(){var e=D,t=N,r=se,n=Y;return function(){Ee(e),ie(t),st(r),n?.activate()}}function Jr(){Ee(null),ie(null),st(null)}function hr(e){var t=ae|fe,r=N!==null&&(N.f&ae)!==0?N:null;return D===null||r!==null&&(r.f&pe)!==0?t|=pe:D.f|=vt,{ctx:se,deps:null,effects:null,equals:Gr,f:t,fn:e,reactions:null,rv:0,v:V,wv:0,parent:r??D,ac:null}}function wi(e,t){let r=D;r===null&&zn();var n=r.b,i=void 0,a=Ze(V),s=!N,f=new Map;return qi(()=>{var l=jr();i=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject)}catch(h){l.reject(h)}var u=Y,c=n.is_pending();s&&(n.update_pending_count(1),c||(u.increment(),f.get(u)?.reject(Et),f.set(u,l)));const _=(h,d=void 0)=>{c||u.activate(),d?d!==Et&&(a.f|=Je,ot(a,d)):((a.f&Je)!==0&&(a.f^=Je),ot(a,h)),s&&(n.update_pending_count(-1),c||u.decrement()),Jr()};l.promise.then(_,h=>_(null,h||"unknown"))}),an(()=>{for(const l of f.values())l.reject(Et)}),new Promise(l=>{function u(c){function _(){c===i?l(a):u(i)}c.then(_,_)}u(i)})}function X(e){const t=hr(e);return pn(t),t}function bi(e){const t=hr(e);return t.equals=zr,t}function Xr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ue(t[r])}}function xi(e){for(var t=e.parent;t!==null;){if((t.f&ae)===0)return t;t=t.parent}return null}function _r(e){var t,r=D;Ee(xi(e));try{Xr(e),t=mn(e)}finally{Ee(r)}return t}function Qr(e){var t=_r(e);if(e.equals(t)||(e.v=t,e.wv=_n()),!_t){var r=(Fe||(e.f&pe)!==0)&&e.deps!==null?Ge:J;ee(e,r)}}const Be=new Map;function Ze(e,t){var r={f:0,v:e,reactions:null,equals:Gr,rv:0,wv:0};return r}function H(e,t){const r=Ze(e);return pn(r),r}function Ei(e,t=!1,r=!0){const n=Ze(e);return t||(n.equals=zr),n}function b(e,t,r=!1){N!==null&&(!he||(N.f&kr)!==0)&&Wr()&&(N.f&(ae|Ue|Gt|kr))!==0&&!Te?.includes(e)&&Qn();let n=r?je(t):t;return ot(e,n)}function ot(e,t){if(!e.equals(t)){var r=e.v;_t?Be.set(e,t):Be.set(e,r),e.v=t;var n=_e.ensure();n.capture(e,r),(e.f&ae)!==0&&((e.f&fe)!==0&&_r(e),ee(e,(e.f&pe)===0?J:Ge)),e.wv=_n(),Zr(e,fe),D!==null&&(D.f&J)!==0&&(D.f&(Pe|et))===0&&(ve===null?Oi([e]):ve.push(e))}return t}function kt(e){b(e,e.v+1)}function Zr(e,t){var r=e.reactions;if(r!==null)for(var n=r.length,i=0;i<n;i++){var a=r[i],s=a.f,f=(s&fe)===0;f&&ee(a,t),(s&ae)!==0?Zr(a,Ge):f&&((s&Ue)!==0&&Ye!==null&&Ye.push(a),Qe(a))}}function je(e){if(typeof e!="object"||e===null||$t in e)return e;const t=$r(e);if(t!==$n&&t!==jn)return e;var r=new Map,n=ur(e),i=H(0),a=Xe,s=f=>{if(Xe===a)return f();var l=N,u=Xe;ie(null),Sr(a);var c=f();return ie(l),Sr(u),c};return n&&r.set("length",H(e.length)),new Proxy(e,{defineProperty(f,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Jn();var c=r.get(l);return c===void 0?c=s(()=>{var _=H(u.value);return r.set(l,_),_}):b(c,u.value,!0),!0},deleteProperty(f,l){var u=r.get(l);if(u===void 0){if(l in f){const c=s(()=>H(V));r.set(l,c),kt(i)}}else b(u,V),kt(i);return!0},get(f,l,u){if(l===$t)return e;var c=r.get(l),_=l in f;if(c===void 0&&(!_||xt(f,l)?.writable)&&(c=s(()=>{var d=je(_?f[l]:V),v=H(d);return v}),r.set(l,c)),c!==void 0){var h=o(c);return h===V?void 0:h}return Reflect.get(f,l,u)},getOwnPropertyDescriptor(f,l){var u=Reflect.getOwnPropertyDescriptor(f,l);if(u&&"value"in u){var c=r.get(l);c&&(u.value=o(c))}else if(u===void 0){var _=r.get(l),h=_?.v;if(_!==void 0&&h!==V)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(f,l){if(l===$t)return!0;var u=r.get(l),c=u!==void 0&&u.v!==V||Reflect.has(f,l);if(u!==void 0||D!==null&&(!c||xt(f,l)?.writable)){u===void 0&&(u=s(()=>{var h=c?je(f[l]):V,d=H(h);return d}),r.set(l,u));var _=o(u);if(_===V)return!1}return c},set(f,l,u,c){var _=r.get(l),h=l in f;if(n&&l==="length")for(var d=u;d<_.v;d+=1){var v=r.get(d+"");v!==void 0?b(v,V):d in f&&(v=s(()=>H(V)),r.set(d+"",v))}if(_===void 0)(!h||xt(f,l)?.writable)&&(_=s(()=>H(void 0)),b(_,je(u)),r.set(l,_));else{h=_.v!==V;var g=s(()=>je(u));b(_,g)}var m=Reflect.getOwnPropertyDescriptor(f,l);if(m?.set&&m.set.call(c,u),!h){if(n&&typeof l=="string"){var T=r.get("length"),S=Number(l);Number.isInteger(S)&&S>=T.v&&b(T,S+1)}kt(i)}return!0},ownKeys(f){o(i);var l=Reflect.ownKeys(f).filter(_=>{var h=r.get(_);return h===void 0||h.v!==V});for(var[u,c]of r)c.v!==V&&!(u in f)&&l.push(u);return l},setPrototypeOf(){Xn()}})}var Tr,en,tn,rn;function ki(){if(Tr===void 0){Tr=window,en=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;tn=xt(t,"firstChild").get,rn=xt(t,"nextSibling").get,Er(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Er(r)&&(r.__t=void 0)}}function ht(e=""){return document.createTextNode(e)}function ke(e){return tn.call(e)}function St(e){return rn.call(e)}function F(e,t){return ke(e)}function He(e,t=!1){{var r=ke(e);return r instanceof Comment&&r.data===""?St(r):r}}function k(e,t=1,r=!1){let n=e;for(;t--;)n=St(n);return n}function Ai(e){e.textContent=""}function nn(){return!1}function Mt(e){var t=N,r=D;ie(null),Ee(null);try{return e()}finally{ie(t),Ee(r)}}function Ti(e){D===null&&N===null&&Vn(),N!==null&&(N.f&pe)!==0&&D===null&&Yn(),_t&&Wn()}function Pi(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ce(e,t,r,n=!0){var i=D;i!==null&&(i.f&ge)!==0&&(e|=ge);var a={ctx:se,deps:null,nodes_start:null,nodes_end:null,f:e|fe,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Pt(a),a.f|=Ut}catch(l){throw ue(a),l}else t!==null&&Qe(a);if(n){var s=a;if(r&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&vt)===0&&(s=s.first),s!==null&&(s.parent=i,i!==null&&Pi(s,i),N!==null&&(N.f&ae)!==0&&(e&et)===0)){var f=N;(f.effects??=[]).push(s)}}return a}function Ci(){return N!==null&&!he}function an(e){const t=Ce(vr,null,!1);return ee(t,J),t.teardown=e,t}function Si(e){Ti();var t=D.f,r=!N&&(t&Pe)!==0&&(t&Ut)===0;if(r){var n=se;(n.e??=[]).push(e)}else return sn(e)}function sn(e){return Ce(cr|Un,e,!1)}function Mi(e){_e.ensure();const t=Ce(et|vt,e,!0);return(r={})=>new Promise(n=>{r.outro?it(t,()=>{ue(t),n(void 0)}):(ue(t),n(void 0))})}function ln(e){return Ce(cr,e,!1)}function qi(e){return Ce(Gt|vt,e,!0)}function on(e,t=0){return Ce(vr|t,e,!0)}function W(e,t=[],r=[]){mi(t,r,n=>{Ce(vr,()=>e(...n.map(o)),!0)})}function Yt(e,t=0){var r=Ce(Ue|t,e,!0);return r}function de(e,t=!0){return Ce(Pe|vt,e,!0,t)}function un(e){var t=e.teardown;if(t!==null){const r=_t,n=N;Cr(!0),ie(null);try{t.call(null)}finally{Cr(r),ie(n)}}}function fn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&Mt(()=>{i.abort(Et)});var n=r.next;(r.f&et)!==0?r.parent=null:ue(r,t),r=n}}function Ni(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Pe)===0&&ue(t),t=r}}function ue(e,t=!0){var r=!1;(t||(e.f&Hn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Li(e.nodes_start,e.nodes_end),r=!0),fn(e,t&&!r),Bt(e,0),ee(e,ft);var n=e.transitions;if(n!==null)for(const a of n)a.stop();un(e);var i=e.parent;i!==null&&i.first!==null&&cn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Li(e,t){for(;e!==null;){var r=e===t?null:St(e);e.remove(),e=r}}function cn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function it(e,t){var r=[];gr(e,r,!0),vn(r,()=>{ue(e),t&&t()})}function vn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function gr(e,t,r){if((e.f&ge)===0){if(e.f^=ge,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var n=e.first;n!==null;){var i=n.next,a=(n.f&ct)!==0||(n.f&Pe)!==0;gr(n,t,a?r:!1),n=i}}}function mr(e){dn(e,!0)}function dn(e,t){if((e.f&ge)!==0){e.f^=ge,(e.f&J)===0&&(ee(e,fe),Qe(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&ct)!==0||(r.f&Pe)!==0;dn(r,i?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let at=!1;function Pr(e){at=e}let _t=!1;function Cr(e){_t=e}let N=null,he=!1;function ie(e){N=e}let D=null;function Ee(e){D=e}let Te=null;function pn(e){N!==null&&(Te===null?Te=[e]:Te.push(e))}let Z=null,le=0,ve=null;function Oi(e){ve=e}let hn=1,Tt=0,Xe=Tt;function Sr(e){Xe=e}let Fe=!1;function _n(){return++hn}function Vt(e){var t=e.f;if((t&fe)!==0)return!0;if((t&Ge)!==0){var r=e.deps,n=(t&pe)!==0;if(r!==null){var i,a,s=(t&Ft)!==0,f=n&&D!==null&&!Fe,l=r.length;if((s||f)&&(D===null||(D.f&ft)===0)){var u=e,c=u.parent;for(i=0;i<l;i++)a=r[i],(s||!a?.reactions?.includes(u))&&(a.reactions??=[]).push(u);s&&(u.f^=Ft),f&&c!==null&&(c.f&pe)===0&&(u.f^=pe)}for(i=0;i<l;i++)if(a=r[i],Vt(a)&&Qr(a),a.wv>e.wv)return!0}(!n||D!==null&&!Fe)&&ee(e,J)}return!1}function gn(e,t,r=!0){var n=e.reactions;if(n!==null&&!Te?.includes(e))for(var i=0;i<n.length;i++){var a=n[i];(a.f&ae)!==0?gn(a,t,!1):t===a&&(r?ee(a,fe):(a.f&J)!==0&&ee(a,Ge),Qe(a))}}function mn(e){var t=Z,r=le,n=ve,i=N,a=Fe,s=Te,f=se,l=he,u=Xe,c=e.f;Z=null,le=0,ve=null,Fe=(c&pe)!==0&&(he||!at||N===null),N=(c&(Pe|et))===0?e:null,Te=null,st(e.ctx),he=!1,Xe=++Tt,e.ac!==null&&(Mt(()=>{e.ac.abort(Et)}),e.ac=null);try{e.f|=tr;var _=e.fn,h=_(),d=e.deps;if(Z!==null){var v;if(Bt(e,le),d!==null&&le>0)for(d.length=le+Z.length,v=0;v<Z.length;v++)d[le+v]=Z[v];else e.deps=d=Z;if(!Fe||(c&ae)!==0&&e.reactions!==null)for(v=le;v<d.length;v++)(d[v].reactions??=[]).push(e)}else d!==null&&le<d.length&&(Bt(e,le),d.length=le);if(Wr()&&ve!==null&&!he&&d!==null&&(e.f&(ae|Ge|fe))===0)for(v=0;v<ve.length;v++)gn(ve[v],e);return i!==null&&i!==e&&(Tt++,ve!==null&&(n===null?n=ve:n.push(...ve))),(e.f&Je)!==0&&(e.f^=Je),h}catch(g){return Yr(g)}finally{e.f^=tr,Z=t,le=r,ve=n,N=i,Fe=a,Te=s,st(f),he=l,Xe=u}}function Di(e,t){let r=t.reactions;if(r!==null){var n=Rn.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&ae)!==0&&(Z===null||!Z.includes(t))&&(ee(t,Ge),(t.f&(pe|Ft))===0&&(t.f^=Ft),Xr(t),Bt(t,0))}function Bt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Di(e,r[n])}function Pt(e){var t=e.f;if((t&ft)===0){ee(e,J);var r=D,n=at;D=e,at=!0;try{(t&Ue)!==0?Ni(e):fn(e),un(e);var i=mn(e);e.teardown=typeof i=="function"?i:null,e.wv=hn;var a;Ir&&oi&&(e.f&fe)!==0&&e.deps}finally{at=n,D=r}}}function o(e){var t=e.f,r=(t&ae)!==0;if(N!==null&&!he){var n=D!==null&&(D.f&ft)!==0;if(!n&&!Te?.includes(e)){var i=N.deps;if((N.f&tr)!==0)e.rv<Tt&&(e.rv=Tt,Z===null&&i!==null&&i[le]===e?le++:Z===null?Z=[e]:(!Fe||!Z.includes(e))&&Z.push(e));else{(N.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[N]:a.includes(N)||a.push(N)}}}else if(r&&e.deps===null&&e.effects===null){var s=e,f=s.parent;f!==null&&(f.f&pe)===0&&(s.f^=pe)}if(_t){if(Be.has(e))return Be.get(e);if(r){s=e;var l=s.v;return((s.f&J)===0&&s.reactions!==null||yn(s))&&(l=_r(s)),Be.set(s,l),l}}else r&&(s=e,Vt(s)&&Qr(s));if((e.f&Je)!==0)throw e.v;return e.v}function yn(e){if(e.v===V)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Be.has(t)||(t.f&ae)!==0&&yn(t))return!0;return!1}function qt(e){var t=he;try{return he=!0,e()}finally{he=t}}const Ri=-7169;function ee(e,t){e.f=e.f&Ri|t}const Ii=["touchstart","touchmove"];function $i(e){return Ii.includes(e)}const wn=new Set,ir=new Set;function ji(e,t,r,n={}){function i(a){if(n.capture||bt.call(t,a),!a.cancelBubble)return Mt(()=>r?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?tt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Mr(e,t,r,n,i){var a={capture:n,passive:i},s=ji(e,t,r,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&an(()=>{t.removeEventListener(e,s,a)})}function Kt(e){for(var t=0;t<e.length;t++)wn.add(e[t]);for(var r of ir)r(e)}let qr=null;function bt(e){var t=this,r=t.ownerDocument,n=e.type,i=e.composedPath?.()||[],a=i[0]||e.target;qr=e;var s=0,f=qr===e&&e.__root;if(f){var l=i.indexOf(f);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;l<=u&&(s=l)}if(a=i[s]||e.target,a!==t){er(e,"currentTarget",{configurable:!0,get(){return a||r}});var c=N,_=D;ie(null),Ee(null);try{for(var h,d=[];a!==null;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+n];if(g!=null&&(!a.disabled||e.target===a))if(ur(g)){var[m,...T]=g;m.apply(a,[e,...T])}else g.call(a,e)}catch(S){h?d.push(S):h=S}if(e.cancelBubble||v===t||v===null)break;a=v}if(h){for(let S of d)queueMicrotask(()=>{throw S});throw h}}finally{e.__root=t,delete e.currentTarget,ie(c),Ee(_)}}}function bn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ut(e,t){var r=D;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function ce(e,t){var r=(t&Ur)!==0,n=(t&ni)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=bn(a?e:"<!>"+e),r||(i=ke(i)));var s=n||en?document.importNode(i,!0):i.cloneNode(!0);if(r){var f=ke(s),l=s.lastChild;ut(f,l)}else ut(s,s);return s}}function Fi(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&Ur)!==0,a=`<${r}>${n?e:"<!>"+e}</${r}>`,s;return()=>{if(!s){var f=bn(a),l=ke(f);if(i)for(s=document.createDocumentFragment();ke(l);)s.appendChild(ke(l));else s=ke(l)}var u=s.cloneNode(!0);if(i){var c=ke(u),_=u.lastChild;ut(c,_)}else ut(u,u);return u}}function Se(e,t){return Fi(e,t,"svg")}function B(e=""){{var t=ht(e+"");return ut(t,t),t}}function At(){var e=document.createDocumentFragment(),t=document.createComment(""),r=ht();return e.append(t,r),ut(t,r),e}function E(e,t){e!==null&&e.before(t)}let ar=!0;function Ke(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Bi(e,t){return Hi(e,t)}const rt=new Map;function Hi(e,{target:t,anchor:r,props:n={},events:i,context:a,intro:s=!0}){ki();var f=new Set,l=_=>{for(var h=0;h<_.length;h++){var d=_[h];if(!f.has(d)){f.add(d);var v=$i(d);t.addEventListener(d,bt,{passive:v});var g=rt.get(d);g===void 0?(document.addEventListener(d,bt,{passive:v}),rt.set(d,1)):rt.set(d,g+1)}}};l(fr(wn)),ir.add(l);var u=void 0,c=Mi(()=>{var _=r??t.appendChild(ht());return hi(_,{pending:()=>{}},h=>{if(a){dt({});var d=se;d.c=a}i&&(n.$$events=i),ar=s,u=e(h,n)||{},ar=!0,a&&pt()}),()=>{for(var h of f){t.removeEventListener(h,bt);var d=rt.get(h);--d===0?(document.removeEventListener(h,bt),rt.delete(h)):rt.set(h,d)}ir.delete(l),_!==r&&_.parentNode?.removeChild(_)}});return Ui.set(u,c),u}let Ui=new WeakMap;function oe(e,t,r=!1){var n=e,i=null,a=null,s=V,f=r?ct:0,l=!1;const u=(d,v=!0)=>{l=!0,h(v,d)};var c=null;function _(){c!==null&&(c.lastChild.remove(),n.before(c),c=null);var d=s?i:a,v=s?a:i;d&&mr(d),v&&it(v,()=>{s?a=null:i=null})}const h=(d,v)=>{if(s!==(s=d)){var g=nn(),m=n;if(g&&(c=document.createDocumentFragment(),c.append(m=ht())),s?i??=v&&de(()=>v(m)):a??=v&&de(()=>v(m)),g){var T=Y,S=s?i:a,R=s?a:i;S&&T.skipped_effects.delete(S),R&&T.skipped_effects.add(R),T.add_callback(_)}else _()}};Yt(()=>{l=!1,t(u),l||h(null,null)},f)}function be(e,t){return t}function Gi(e,t,r){for(var n=e.items,i=[],a=t.length,s=0;s<a;s++)gr(t[s].e,i,!0);var f=a>0&&i.length===0&&r!==null;if(f){var l=r.parentNode;Ai(l),l.append(r),n.clear(),we(e,t[0].prev,t[a-1].next)}vn(i,()=>{for(var u=0;u<a;u++){var c=t[u];f||(n.delete(c.k),we(e,c.prev,c.next)),ue(c.e,!f)}})}function xe(e,t,r,n,i,a=null){var s=e,f={flags:t,items:new Map,first:null},l=(t&Hr)!==0;if(l){var u=e;s=u.appendChild(ht())}var c=null,_=!1,h=new Map,d=bi(()=>{var T=r();return ur(T)?T:T==null?[]:fr(T)}),v,g;function m(){zi(g,v,f,h,s,i,t,n,r),a!==null&&(v.length===0?c?mr(c):c=de(()=>a(s)):c!==null&&it(c,()=>{c=null}))}Yt(()=>{g??=D,v=o(d);var T=v.length;if(!(_&&T===0)){_=T===0;var S,R,U,L;if(nn()){var A=new Set,M=Y;for(R=0;R<T;R+=1){U=v[R],L=n(U,R);var z=f.items.get(L)??h.get(L);z?(t&(zt|Wt))!==0&&xn(z,U,R,t):(S=En(null,f,null,null,U,L,R,i,t,r,!0),h.set(L,S)),A.add(L)}for(const[C,$]of f.items)A.has(C)||M.skipped_effects.add($.e);M.add_callback(m)}else m();o(d)}})}function zi(e,t,r,n,i,a,s,f,l){var u=(s&ei)!==0,c=(s&(zt|Wt))!==0,_=t.length,h=r.items,d=r.first,v=d,g,m=null,T,S=[],R=[],U,L,A,M;if(u)for(M=0;M<_;M+=1)U=t[M],L=f(U,M),A=h.get(L),A!==void 0&&(A.a?.measure(),(T??=new Set).add(A));for(M=0;M<_;M+=1){if(U=t[M],L=f(U,M),A=h.get(L),A===void 0){var z=n.get(L);if(z!==void 0){n.delete(L),h.set(L,z);var C=m?m.next:v;we(r,m,z),we(r,z,C),Xt(z,C,i),m=z}else{var $=v?v.e.nodes_start:i;m=En($,r,m,m===null?r.first:m.next,U,L,M,a,s,l)}h.set(L,m),S=[],R=[],v=m.next;continue}if(c&&xn(A,U,M,s),(A.e.f&ge)!==0&&(mr(A.e),u&&(A.a?.unfix(),(T??=new Set).delete(A))),A!==v){if(g!==void 0&&g.has(A)){if(S.length<R.length){var p=R[0],y;m=p.prev;var w=S[0],q=S[S.length-1];for(y=0;y<S.length;y+=1)Xt(S[y],p,i);for(y=0;y<R.length;y+=1)g.delete(R[y]);we(r,w.prev,q.next),we(r,m,w),we(r,q,p),v=p,m=q,M-=1,S=[],R=[]}else g.delete(A),Xt(A,v,i),we(r,A.prev,A.next),we(r,A,m===null?r.first:m.next),we(r,m,A),m=A;continue}for(S=[],R=[];v!==null&&v.k!==L;)(v.e.f&ge)===0&&(g??=new Set).add(v),R.push(v),v=v.next;if(v===null)continue;A=v}S.push(A),m=A,v=A.next}if(v!==null||g!==void 0){for(var O=g===void 0?[]:fr(g);v!==null;)(v.e.f&ge)===0&&O.push(v),v=v.next;var G=O.length;if(G>0){var me=(s&Hr)!==0&&_===0?i:null;if(u){for(M=0;M<G;M+=1)O[M].a?.measure();for(M=0;M<G;M+=1)O[M].a?.fix()}Gi(r,O,me)}}u&&tt(()=>{if(T!==void 0)for(A of T)A.a?.apply()}),e.first=r.first&&r.first.e,e.last=m&&m.e;for(var te of n.values())ue(te.e);n.clear()}function xn(e,t,r,n){(n&zt)!==0&&ot(e.v,t),(n&Wt)!==0?ot(e.i,r):e.i=r}function En(e,t,r,n,i,a,s,f,l,u,c){var _=(l&zt)!==0,h=(l&ti)===0,d=_?h?Ei(i,!1,!1):Ze(i):i,v=(l&Wt)===0?s:Ze(s),g={i:v,v:d,k:a,a:null,e:null,prev:r,next:n};try{if(e===null){var m=document.createDocumentFragment();m.append(e=ht())}return g.e=de(()=>f(e,d,v,u),si),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?c||(t.first=g):(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function Xt(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==n;){var s=St(a);i.before(a),a=s}}function we(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function yr(e,t,...r){var n=e,i=We,a;Yt(()=>{i!==(i=t())&&(a&&(ue(a),a=null),a=de(()=>i(n,...r)))},ct)}function kn(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=kn(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Wi(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=kn(e))&&(n&&(n+=" "),n+=t);return n}function Ht(e){return typeof e=="object"?Wi(e):e??""}function Yi(e,t,r){var n=e==null?"":""+e;return t&&(n=n?n+" "+t:t),n===""?null:n}function Nr(e,t=!1){var r=t?" !important;":";",n="";for(var i in e){var a=e[i];a!=null&&a!==""&&(n+=" "+i+": "+a+r)}return n}function Vi(e,t){if(t){var r="",n,i;return Array.isArray(t)?(n=t[0],i=t[1]):n=t,n&&(r+=Nr(n)),i&&(r+=Nr(i,!0)),r=r.trim(),r===""?null:r}return String(e)}function Ct(e,t,r,n,i,a){var s=e.__className;if(s!==r||s===void 0){var f=Yi(r,n);f==null?e.removeAttribute("class"):t?e.className=f:e.setAttribute("class",f),e.__className=r}return a}function Qt(e,t={},r,n){for(var i in r){var a=r[i];t[i]!==a&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,n))}}function Rt(e,t,r,n){var i=e.__style;if(i!==t){var a=Vi(t,n);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}else n&&(Array.isArray(n)?(Qt(e,r?.[0],n[0]),Qt(e,r?.[1],n[1],"important")):Qt(e,r,n));return n}const Ki=Symbol("is custom element"),Ji=Symbol("is html");function P(e,t,r,n){var i=Xi(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Gn]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Qi(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Xi(e){return e.__attributes??={[Ki]:e.nodeName.includes("-"),[Ji]:e.namespaceURI===ii}}var Lr=new Map;function Qi(e){var t=e.getAttribute("is")||e.nodeName,r=Lr.get(t);if(r)return r;Lr.set(t,r=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=In(i);for(var s in n)n[s].set&&r.push(s);i=$r(i)}return r}const Zi=()=>performance.now(),Ae={tick:e=>requestAnimationFrame(e),now:()=>Zi(),tasks:new Set};function An(){const e=Ae.now();Ae.tasks.forEach(t=>{t.c(e)||(Ae.tasks.delete(t),t.f())}),Ae.tasks.size!==0&&Ae.tick(An)}function ea(e){let t;return Ae.tasks.size===0&&Ae.tick(An),{promise:new Promise(r=>{Ae.tasks.add(t={c:e,f:r})}),abort(){Ae.tasks.delete(t)}}}function It(e,t){Mt(()=>{e.dispatchEvent(new CustomEvent(t))})}function ta(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Or(e){const t={},r=e.split(";");for(const n of r){const[i,a]=n.split(":");if(!i||a===void 0)break;const s=ta(i.trim());t[s]=a.trim()}return t}const ra=e=>e;function na(e,t,r,n){var i=(e&ri)!==0,a="both",s,f=t.inert,l=t.style.overflow,u,c;function _(){return Mt(()=>s??=r()(t,n?.()??{},{direction:a}))}var h={is_global:i,in(){t.inert=f,It(t,"introstart"),u=sr(t,_(),c,1,()=>{It(t,"introend"),u?.abort(),u=s=void 0,t.style.overflow=l})},out(m){t.inert=!0,It(t,"outrostart"),c=sr(t,_(),u,0,()=>{It(t,"outroend"),m?.()})},stop:()=>{u?.abort(),c?.abort()}},d=D;if((d.transitions??=[]).push(h),ar){var v=i;if(!v){for(var g=d.parent;g&&(g.f&ct)!==0;)for(;(g=g.parent)&&(g.f&Ue)===0;);v=!g||(g.f&Ut)!==0}v&&ln(()=>{qt(()=>h.in())})}}function sr(e,t,r,n,i){var a=n===1;if(Fn(t)){var s,f=!1;return tt(()=>{if(!f){var m=t({direction:a?"in":"out"});s=sr(e,m,r,n,i)}}),{abort:()=>{f=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r?.deactivate(),!t?.duration)return i(),{abort:We,deactivate:We,reset:We,t:()=>n};const{delay:l=0,css:u,tick:c,easing:_=ra}=t;var h=[];if(a&&r===void 0&&(c&&c(0,1),u)){var d=Or(u(0,1));h.push(d,d)}var v=()=>1-n,g=e.animate(h,{duration:l,fill:"forwards"});return g.onfinish=()=>{g.cancel();var m=r?.t()??1-n;r?.abort();var T=n-m,S=t.duration*Math.abs(T),R=[];if(S>0){var U=!1;if(u)for(var L=Math.ceil(S/16.666666666666668),A=0;A<=L;A+=1){var M=m+T*_(A/L),z=Or(u(M,1-M));R.push(z),U||=z.overflow==="hidden"}U&&(e.style.overflow="hidden"),v=()=>{var C=g.currentTime;return m+T*_(C/S)},c&&ea(()=>{if(g.playState!=="running")return!1;var C=v();return c(C,1-C),!0})}g=e.animate(R,{duration:S,fill:"forwards"}),g.onfinish=()=>{v=()=>n,c?.(n,1-n),i()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=We)},deactivate:()=>{i=We},reset:()=>{n===0&&c?.(1,0)},t:()=>v()}}function Dr(e,t){return e===t||e?.[$t]===t}function jt(e={},t,r,n){return ln(()=>{var i,a;return on(()=>{i=a,a=[],qt(()=>{e!==r(...a)&&(t(e,...a),i&&Dr(r(...i),e)&&t(null,...i))})}),()=>{tt(()=>{a&&Dr(r(...a),e)&&t(null,...a)})}}),e}function Tn(e,t,r,n){var i=n,a=!0,s=()=>(a&&(a=!1,i=n),i),f;f=e[t],f===void 0&&n!==void 0&&(f=s());var l;return l=()=>{var u=e[t];return u===void 0?s():(a=!0,u)},l}function Pn(e){se===null&&Br(),Si(()=>{const t=qt(e);if(typeof t=="function")return t})}function ia(e){se===null&&Br(),Pn(()=>()=>qt(e))}const aa="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(aa);const sa=(e,t)=>{let r=0;const n=e.length;for(let i=0;i<n;i++)t(e[i])&&r++;return r},lr=e=>new Promise(t=>setTimeout(t,e)),la=()=>({adversary:"level1",machineStarts:!1}),Zt=()=>[{type:"E",position:9,owner:0},{type:"L",position:10,owner:0},{type:"G",position:11,owner:0},{type:"C",position:7,owner:0},{type:"E",position:2,owner:1},{type:"L",position:1,owner:1},{type:"G",position:0,owner:1},{type:"C",position:4,owner:1}],Cn={C:[[0,1]],H:[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,1]],G:[[0,1],[1,0],[0,-1],[-1,0]],E:[[1,1],[-1,1],[1,-1],[-1,-1]],L:[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,1],[1,-1],[-1,-1]]},Sn=(e,t)=>{const r=new Array(12);r.fill(0);for(const f of e)f.position!==null&&(r[f.position]=f.owner+1);if(t.position===null){const f=[];for(let l=0;l<12;l++)r[l]||f.push(l);return f}const n=[],i=t.position%3,a=t.position/3|0,s=Cn[t.type];for(const f of s){const[l,u]=t.owner?[f[0],f[1]]:[-f[0],-f[1]],c=i+l,_=a+u;if(c>=0&&c<3&&_>=0&&_<4){const h=3*_+c;r[h]!==t.owner+1&&n.push(h)}}return n},oa=(e,t)=>e.owner===t.owner&&e.position===t.position&&e.type===t.type,ua=(e,t)=>{for(let r=0;r<8;r++)if(!oa(e[r],t[r]))return!1;return!0},fa=(e,t)=>sa(t,r=>ua(e,r.pieces))>=2,ca=(e,t)=>{const r=e[t?5:1].position;return r!==null&&(t&&r>8||!t&&r<3)&&e.every(n=>n.owner===t||!Sn(e,n).includes(r))},Ne={type:"read"},ye=e=>["R",e],Q=e=>["G",e],Le=e=>["B",e],De=[{text:["Bienvenue dans le ",Le("tutoriel"),"!"],action:Ne},{text:[Le("Catch the lion")," est un jeu à deux joueurs sur un plateau 4x3. ","Le but est de capturer le ",ye("lion")," adverse."],action:Ne},{text:["Chaque joueur possède 4 pièces: un ",Q("lion"),", une ",Q("girafe"),", un ",Q("éléphant")," et un ",Q("poussin"),". L'",Le("orientation")," d'une pièce indique à quel joueur elle appartient."],action:Ne},{text:["Chaque pièce peut se déplacer d'une case dans une des directions indiquées sur la pièce si la case d'arrivée est vide ou si il y a une pièce adverse dessus."],action:Ne},{text:["Une pièce peut ",Le("capturer")," une pièce adverse en se déplaçant dessus. ","Essaie de capturer mon ",ye("poussin")," avec ton ",Q("poussin")," en utilisant un ",Le("Glisser-déposer"),"."],action:{type:"playerAction",from:3,to:4}},{text:["Bravo, le poussin adverse fait maintenant partie de ta ",Q("réserve"),". A partir du tour suivant tu pourras le placer sur n'importe quelle case vide."],action:Ne},{text:["C'est maintenant à moi de jouer"],action:{type:"machineAction",from:4,to:4}},{text:["J'ai capturé ton ",Q("poussin")," avec mon ",ye("éléphant"),". Essaie maintenant déplacer le ",Q("poussin")," de ta réserve vers la case indiquée."],action:{type:"playerAction",from:7,to:7}},{text:["Bravo! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:4,to:6}},{text:["Je déplace à nouveau mon ",ye("éléphant"),". Ton ",Q("lion")," est menacé. Capture mon ",ye("éléphant")," avec ton ",Q("lion"),"pour parer la menace"],action:{type:"playerAction",from:1,to:6}},{text:["Bravo! Tu as paré la menace! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:6,to:3}},{text:["Je déplace ma ",ye("girafe")," menaçant ton ",Q("lion"),". Tu ne peux pas la capturer car ton lion se ferait capturer au coup suivant. Tu dois donc fuir. Déplace ton ",Q("lion")," vers la case indiquée."],action:{type:"playerAction",from:1,to:10}},{text:["Bravo! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:3,to:6}},{text:["J'ai utilisé le ",ye("poussin")," de ma réserve. Ton ",Q("éléphant")," est bloqué, il va se faire prendre par mon ",ye("poussin"),". Tu ne peux rien faire contre ça. Déplace ta ",Q("girafe")," à la case indiquée."],action:{type:"playerAction",from:2,to:8}},{text:["Bravo! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:3,to:9}},{text:["Mon ",ye("poussin")," est arrivé sur la dernière rangée, il  est promu en ",ye("poule"),". Cette poule est très dangereuse vu ses mouvements autorisés. Dépèche-toi de la capturer."],action:{type:"playerAction",from:1,to:9}},{text:["Une fois une ",Le("poule")," capturée, elle redevient un ",Le("poussin"),". Tu ne peux pas directement promouvoir un poussin de la réserve en poule."],action:Ne},{text:["Tu peux également gagner la partie en emmenant ton ",Q("lion")," sur la dernière rangée. Le lion ne doit pas pouvoir être immédiatement capturé par l'adversaire."],action:Ne},{text:["Bravo! Tu as complété le tutoriel! Tu peux commencer à jouer en cliquant sur ",Le("Nouvelle partie"),"."],action:Ne}];function va(e){return new Worker(""+new URL("worker-C63FXrP_.js",import.meta.url).href,{name:e?.name})}const Re=320,Ie=200,re=330,ne=325,Oe=260,da={L:"#fbc0bf",G:"#d6b3d5",E:"#d6b3d5",C:"#f0f4a3",H:"#eef1a5"},or={C:0,E:1,G:2,L:3,H:4};var pa=Se('<line stroke="red" stroke-width="50" class="arrow svelte-lwkvx5" marker-end="url(#arrowhead)"></line>');function ha(e,t){dt(t,!0);let r=X(()=>{const l=t.pieces[t.from],u=Re+re/2+re*(t.to%3),c=Ie+ne/2+ne*(t.to/3|0);return l.position===null?{x1:"100",y1:1570-200*or[l.type],x2:u,y2:c}:{x1:Re+re/2+re*(l.position%3),y1:Ie+ne/2+ne*(l.position/3|0),x2:u,y2:c}}),n=X(()=>o(r).x1),i=X(()=>o(r).y1),a=X(()=>o(r).x2),s=X(()=>o(r).y2);var f=pa();W(()=>{P(f,"x1",o(n)),P(f,"x2",o(a)),P(f,"y1",o(i)),P(f,"y2",o(s))}),E(e,f),pt()}const _a=(e,t,r,n)=>{o(t)!==null&&b(r,n(e),!0)};var ga=Se('<circle r="2" stroke="black" fill="red"></circle>'),ma=Se('<symbol viewBox="0 0 50 50"><rect x="0.5" y="0.5" width="49" height="49" rx="5" ry="5" stroke="black" stroke-width="1"></rect><image x="6" y="6" width="38" height="38"></image><!></symbol>'),ya=Se('<line stroke="red" stroke-width="5"></line>'),wa=Se('<line stroke="red" stroke-width="5"></line>'),ba=(e,t,r)=>t(r,e),xa=Se('<rect stroke-width="20"></rect>'),Ea=Se('<use filter="drop-shadow(16px 16px 16px gray)"></use>'),ka=Se('<use href="#twice" width="50" height="50"></use><use href="#twice" width="50" height="50"></use>',1),Aa=Se('<use pointer-events="none"></use>'),Ta=ce('<div class="container svelte-nkg03k"><svg viewBox="0 0 1600 1680" class="svelte-nkg03k"><defs><marker id="arrowhead" markerWidth="6" markerHeight="4" refX="3" refY="2" orient="auto"><polygon points="0 0, 4 2, 0 4" fill="red"></polygon></marker></defs><symbol id="twice" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="red"></rect><text x="20" y="30" fill="white" font-size="30px" font-weight="bold" text-anchor="middle">2</text></symbol><!><image x="200" y="-500" width="1200" height="2580" href="./board4.webp" preserveAspectRatio="xMidYMid"></image><!><!><!><!><!><!><!></svg></div>');function Rr(e,t){dt(t,!0);let r=H(null),n=H(null),i=H(null),a=H(void 0),s=X(()=>o(r)!==null?Sn(t.pieces,t.pieces[o(r)]):[]);const f=p=>{const y=p.position;let w,q,O;y===null?(w=p.owner?1500:100,q=p.owner?200+200*or[p.type]:1570-200*or[p.type],O=.7):(w=Re+re/2+re*(y%3),q=Ie+ne/2+ne*(y/3|0),O=1);const G=p.owner?"180deg":"0";return`translate(${w}px, ${q}px) rotate(${G}) scale(${O})`},l=(p,y)=>{const w=100*p.x,q=100*p.y,O=y.owner?"180deg":"0";return`translate(${w}%, ${q}%) rotate(${O})`},u=p=>t.lastMove&&t.lastMove.includes(p),c=p=>{const{left:y,top:w,width:q,height:O}=o(a).getBoundingClientRect();return{x:(p.clientX-y)/q,y:(p.clientY-w)/O}},_=(p,y)=>t.pieces[p].owner===y&&t.pieces[p+4].owner===y&&t.pieces[p].position===null&&t.pieces[p+4].position===null&&o(r)!==p&&o(r)!==p+4,h=(p,y)=>{!t.canPlay||t.pieces[p].owner!==t.turn||(y.currentTarget.setPointerCapture(y.pointerId),y.currentTarget.releasePointerCapture(y.pointerId),b(r,p,!0),b(n,p,!0),b(i,c(y),!0))},d=(p,y)=>{y.stopPropagation();const w=o(r);b(i,null),w!==null&&(b(r,null),t.play(w,p)),setTimeout(()=>b(n,null),500)},v=()=>{b(r,null),b(i,null)};var g=Ta(),m=F(g);m.__pointermove=[_a,r,i,c],m.__pointerup=v;var T=k(F(m),2);xe(T,16,()=>["L","G","E","C","H"],be,(p,y)=>{var w=ma(),q=F(w),O=k(q),G=k(O);xe(G,17,()=>Cn[y],be,(me,te)=>{var gt=X(()=>Fr(o(te),2));let Nt=()=>o(gt)[0],Lt=()=>o(gt)[1];var mt=ga();W(()=>{P(mt,"cx",25+20*Nt()),P(mt,"cy",25-20*Lt())}),E(me,mt)}),W(()=>{P(w,"id",`piece-${y??""}`),P(q,"fill",da[y]),P(O,"href",`./piece-${y??""}.webp`)}),E(p,w)});var S=k(T,2);xe(S,16,()=>[0,1,2,3,4],be,(p,y)=>{var w=ya();W(()=>{P(w,"x1",Re),P(w,"y1",Ie+y*ne),P(w,"x2",Re+3*re),P(w,"y2",Ie+y*ne),P(w,"stroke-dasharray",`${re/8} ${re/8}`),P(w,"stroke-dashoffset",re/16)}),E(p,w)});var R=k(S);xe(R,16,()=>[0,1,2,3],be,(p,y)=>{var w=wa();W(()=>{P(w,"x1",Re+y*re),P(w,"y1",Ie),P(w,"x2",Re+y*re),P(w,"y2",Ie+4*ne),P(w,"stroke-dasharray",`${ne/8} ${ne/8}`),P(w,"stroke-dashoffset",ne/16)}),E(p,w)});var U=k(R);xe(U,16,()=>[0,1,2,3,4,5,6,7,8,9,10,11],be,(p,y)=>{var w=xa();w.__pointerup=[ba,d,y],W((q,O,G)=>{P(w,"x",Re+10+re*(y%3)),P(w,"y",Ie+10+ne*(y/3|0)),P(w,"width",re-20),P(w,"height",ne-20),P(w,"stroke",q),P(w,"pointer-events",O),P(w,"fill",G)},[()=>o(s).includes(y)?"lightgreen":"transparent",()=>o(s).includes(y)?"":"none",()=>u(y)?"rgba(0, 255, 0, 0.3)":"transparent"]),E(p,w)});var L=k(U);xe(L,17,()=>t.pieces,be,(p,y,w)=>{var q=Ea();q.__pointerdown=G=>h(w,G);let O;W(G=>{P(q,"x",-Oe/2),P(q,"y",-Oe/2),P(q,"width",Oe),P(q,"height",Oe),P(q,"href",`#piece-${o(y).type??""}`),P(q,"pointer-events",o(r)===null?"":"none"),P(q,"opacity",w===o(r)?0:1),Ct(q,0,Ht({animate:o(n)!==w}),"svelte-nkg03k"),O=Rt(q,"",O,G)},[()=>({transform:f(o(y))})]),E(p,q)});var A=k(L);xe(A,16,()=>[3,0,2],be,(p,y,w)=>{var q=ka(),O=He(q);Rt(O,"",{},{transform:`translate(140px, ${1610-200*w}px)`});var G=k(O);Rt(G,"",{},{transform:`translate(1540px, ${240+200*w}px)`}),W((me,te)=>{P(O,"opacity",me),P(G,"opacity",te)},[()=>_(y,0)?1:0,()=>_(y,0)?1:0]),E(p,q)});var M=k(A);{var z=p=>{var y=Aa();let w;W(q=>{P(y,"x",-Oe/2),P(y,"y",-Oe/2),P(y,"width",Oe),P(y,"height",Oe),P(y,"href",`#piece-${t.pieces[o(r)].type??""}`),w=Rt(y,"",w,q)},[()=>({transform:l(o(i),t.pieces[o(r)])})]),E(p,y)};oe(M,p=>{o(i)&&o(r)!==null&&p(z)})}var C=k(M);{var $=p=>{ha(p,{get from(){return t.requiredMove[0]},get to(){return t.requiredMove[1]},get pieces(){return t.pieces}})};oe(C,p=>{t.requiredMove&&o(r)===null&&p($)})}jt(m,p=>b(a,p),()=>o(a)),Mr("pointercancel",m,v),Mr("pointerleave",m,v),E(e,g),pt()}Kt(["pointermove","pointerup","pointerdown"]);var Pa=ce("<span><!></span>");function K(e,t){let r=Tn(t,"color",3,"green");var n=Pa(),i=F(n);yr(i,()=>t.children),W(()=>Ct(n,1,Ht(r()==="green"?"green":r()==="red"?"red":"blue"),"svelte-1tr9vuq")),E(e,n)}const Ca=e=>e;function Sa(e,{delay:t=0,duration:r=400,easing:n=Ca}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:a=>`opacity: ${a*i}`}}var Ma=ce('<div class="tooltip svelte-kuwzzo"></div>'),qa=ce('<div class="tutorial-buttons svelte-kuwzzo"><button class="tutorial-button svelte-kuwzzo">Précédent</button> <button class="tutorial-button svelte-kuwzzo">Suivant</button></div>'),Na=ce("<div><!> <!></div>");function La(e,t){dt(t,!0);let r=H(null);const n=d=>["B",d],i=[[["Bienvenue sur l'appli ",n("Catch the lion"),"."],3e3],[[n("Catch the lion")," connu en japonais sous le nom ",n("Dobutsu Shogi")," est une variante pour enfants du Shogi."],5e3],[["Le jeu a été entièrement résolu par ordinateur. Il existe ",n("1 567 925 964")," configurations possibles."],5e3],[["Si les deux joueurs jouent de manière optimale, la victoire est assurée pour le ",n("second")," joueur."],5e3],[["Pour apprendre les règles, tu peux clicker sur ",n("Tutoriel"),"."],3e3]];let a=!1;Pn(async()=>{let d=0;for(;!a;){const[v,g]=i[d];b(r,v,!0),await lr(g),b(r,null),d=(d+1)%i.length,await lr(1500)}}),ia(()=>a=!0);let s=X(()=>t.tutorialStep!==null?De[t.tutorialStep].text:t.outcome===null?o(r):t.outcome===2?["Oh, cette configuration de pièces a été répétée 3 fois. C'est un ",n("match nul"),"."]:t.adversary==="human"?[`Bravo! Le joueur ${t.outcome+1} a gagné!`]:t.outcome===0?["Zut! J'ai perdu! Tu peux changer de difficulté en cliquant sur ",n("Nouvelle partie"),"."]:["Oh oui! J'ai gagné! Tu peux changer de difficulté en cliquant sur ",n("Nouvelle partie"),"."]),f=X(()=>t.isThinking?"thinking":t.outcome===2?"surprised":t.outcome!==null&&t.outcome===0&&t.adversary!=="human"?"crying":t.outcome!==null&&(t.outcome===1||t.adversary==="human")?"happy":"speaking");var l=Na(),u=F(l);{var c=d=>{var v=Ma();xe(v,21,()=>o(s),be,(g,m)=>{var T=At(),S=He(T);{var R=L=>{var A=B();W(()=>Ke(A,o(m))),E(L,A)},U=L=>{var A=At(),M=He(A);{var z=$=>{K($,{color:"red",children:(p,y)=>{var w=B();W(()=>Ke(w,o(m)[1])),E(p,w)},$$slots:{default:!0}})},C=$=>{var p=At(),y=He(p);{var w=O=>{K(O,{color:"green",children:(G,me)=>{var te=B();W(()=>Ke(te,o(m)[1])),E(G,te)},$$slots:{default:!0}})},q=O=>{K(O,{color:"blue",children:(G,me)=>{var te=B();W(()=>Ke(te,o(m)[1])),E(G,te)},$$slots:{default:!0}})};oe(y,O=>{o(m)[0]==="G"?O(w):O(q,!1)},!0)}E($,p)};oe(M,$=>{o(m)[0]==="R"?$(z):$(C,!1)},!0)}E(L,A)};oe(S,L=>{typeof o(m)=="string"?L(R):L(U,!1)})}E(g,T)}),na(3,v,()=>Sa,()=>({duration:500})),E(d,v)};oe(u,d=>{o(s)&&d(c)})}var _=k(u,2);{var h=d=>{var v=qa(),g=F(v);g.__click=function(...T){t.tutorialPred?.apply(this,T)};var m=k(g,2);m.__click=function(...T){t.tutorialNext?.apply(this,T)},E(d,v)};oe(_,d=>{t.tutorialStep!==null&&d(h)})}W(()=>Ct(l,1,`girl ${o(f)??""}`,"svelte-kuwzzo")),E(e,l),pt()}Kt(["click"]);var Oa=ce('<button class="svelte-1klcfz0"><!></button>');function Ve(e,t){let r=Tn(t,"disabled",3,!1);var n=Oa();n.__click=function(...a){t.onclick?.apply(this,a)};var i=F(n);yr(i,()=>t.children),W(()=>n.disabled=r()),E(e,n)}Kt(["click"]);var Da=ce('<div class="title svelte-1kwbck4"> </div> <div class="body svelte-1kwbck4"><!></div> <div class="buttons svelte-1kwbck4"><!> <!></div>',1);function wr(e,t){var r=Da(),n=He(r),i=F(n),a=k(n,2),s=F(a);yr(s,()=>t.children);var f=k(a,2),l=F(f);{var u=h=>{Ve(h,{get onclick(){return t.onCancel},children:(d,v)=>{var g=B("Annuler");E(d,g)},$$slots:{default:!0}})};oe(l,h=>{t.onCancel&&h(u)})}var c=k(l,2);{var _=h=>{Ve(h,{get onclick(){return t.onOk},children:(d,v)=>{var g=B("OK");E(d,g)},$$slots:{default:!0}})};oe(c,h=>{t.onOk&&h(_)})}W(()=>Ke(i,t.title)),E(e,r)}var Ra=(e,t,r)=>t(r()),Ia=ce("<button> </button>"),$a=(e,t,r)=>t(r),ja=ce("<button> </button>"),Fa=ce('<div class="container svelte-qhcbro"><div class="title svelte-qhcbro">Adversaire</div> <div class="buttons svelte-qhcbro"></div> <div class="title svelte-qhcbro">Qui commence</div> <div class="buttons svelte-qhcbro"></div></div>');function Ba(e,t){dt(t,!0);const r=[["human","Humain"],["level1","Débutant"],["level2","Moyen"],["level3","Difficile"]];let n=X(()=>t.config);const i=s=>{b(n,{...o(n),adversary:s})},a=s=>{b(n,{...o(n),machineStarts:s})};wr(e,{title:"Nouvelle Partie",get onCancel(){return t.closeDialog},onOk:()=>t.newGame(t.config),children:(s,f)=>{var l=Fa(),u=k(F(l),2);xe(u,21,()=>r,be,(_,h)=>{var d=X(()=>Fr(o(h),2));let v=()=>o(d)[0],g=()=>o(d)[1];var m=Ia();m.__click=[Ra,i,v];var T=F(m);W(()=>{Ct(m,1,Ht({toggled:v()===o(n).adversary}),"svelte-qhcbro"),Ke(T,g())}),E(_,m)});var c=k(u,4);xe(c,20,()=>[!1,!0],be,(_,h)=>{var d=ja();d.__click=[$a,a,h];var v=F(d);W(()=>{Ct(d,1,Ht({toggled:h===o(n).machineStarts}),"svelte-qhcbro"),Ke(v,h?"Machine":"Humain")}),E(_,d)}),E(s,l)}}),pt()}Kt(["click"]);var Ha=ce(`<ul><li class="list-disc"><!> est un jeu à deux joueurs sur un plateau 4x3.
      Le but est de capturer le <!> adverse.</li> <li class="list-disc">Chaque joueur possède 4 pièces: un <!>, une <!>,
        un <!> et un <!>.</li> <li class="list-disc">L'<!> d'une pièce indique à quel joueur elle appartient.</li> <li class="list-disc">Chaque pièce peut se déplacer d'une case dans une des directions indiquées sur la pièce<br/> si la case d'arrivée est vide ou si il y a une pièce adverse dessus.</li> <li class="list-disc">Une pièce peut <!> une pièce adverse en se déplaçant dessus.<br/> La pièce capturée va dans sa <!> et il peut la placer sur
        n'importe quelle case vide à partir du tour suivant.</li> <li class="list-disc">Si un <!> atteind la dernière rangée, il est promu en <!>.<br/> Si la poule se fait capturer, elle redevient un poussin.</li> <li class="list-disc">Un <!> placé depuis la réserve sur la dernière
        rangée ne devient pas une poule.</li> <li class="list-disc">Tu peux également gagner la partie en emmenant ton <!> sur la dernière rangée.<br/> Le lion ne doit pas pouvoir être immédiatement capturé par l&apos;adversaire.</li></ul>`);function Ua(e,t){wr(e,{title:"Règles de Catch The Lion",get onOk(){return t.closeDialog},children:(r,n)=>{var i=Ha(),a=F(i),s=F(a);K(s,{children:(C,$)=>{var p=B("Catch the lion");E(C,p)},$$slots:{default:!0}});var f=k(s,2);K(f,{children:(C,$)=>{var p=B("lion");E(C,p)},$$slots:{default:!0}});var l=k(a,2),u=k(F(l));K(u,{children:(C,$)=>{var p=B("lion");E(C,p)},$$slots:{default:!0}});var c=k(u,2);K(c,{children:(C,$)=>{var p=B("girafe");E(C,p)},$$slots:{default:!0}});var _=k(c,2);K(_,{children:(C,$)=>{var p=B("éléphant");E(C,p)},$$slots:{default:!0}});var h=k(_,2);K(h,{children:(C,$)=>{var p=B("poussin");E(C,p)},$$slots:{default:!0}});var d=k(l,2),v=k(F(d));K(v,{children:(C,$)=>{var p=B("orientation");E(C,p)},$$slots:{default:!0}});var g=k(d,4),m=k(F(g));K(m,{children:(C,$)=>{var p=B("capturer");E(C,p)},$$slots:{default:!0}});var T=k(m,4);K(T,{children:(C,$)=>{var p=B("réserve");E(C,p)},$$slots:{default:!0}});var S=k(g,2),R=k(F(S));K(R,{children:(C,$)=>{var p=B("poussin");E(C,p)},$$slots:{default:!0}});var U=k(R,2);K(U,{children:(C,$)=>{var p=B("poule");E(C,p)},$$slots:{default:!0}});var L=k(S,2),A=k(F(L));K(A,{children:(C,$)=>{var p=B("poussin");E(C,p)},$$slots:{default:!0}});var M=k(L,2),z=k(F(M));K(z,{children:(C,$)=>{var p=B("lion");E(C,p)},$$slots:{default:!0}}),E(r,i)}})}var Ga=ce(`<ul><li class="list-disc"><!> est un jeu de plateau créé
      par Madoka Kitao et Maiko Fujita.</li> <li class="list-disc">L'éditeur du jeu est Nekomado.</li> <li class="list-disc">L'application a été écrite par Guillaume Bagan.</li> <li class="list-disc">Le code source est sous licence MIT.</li> <li class="list-disc">Les différentes images ont été générées par Dall-E.</li> <li class="list-disc">Les différents sons proviennent de la plate-forme Lichess.</li></ul>`);function za(e,t){wr(e,{title:"Crédits",get onOk(){return t.closeDialog},children:(r,n)=>{var i=Ga(),a=F(i),s=F(a);K(s,{children:(f,l)=>{var u=B("Catch the lion");E(f,u)},$$slots:{default:!0}}),E(r,i)}})}var Wa=ce('<audio src="./move.webm" preload="auto" class="svelte-1n46o8q"></audio> <audio src="./capture.webm" preload="auto" class="svelte-1n46o8q"></audio> <div class="wrap svelte-1n46o8q"><div class="lighter svelte-1n46o8q"></div> <div class="board svelte-1n46o8q"><div class="title svelte-1n46o8q">Catch the lion</div> <!> <!> <!> <!> <!></div> <!> <!></div> <dialog class="svelte-1n46o8q"><!></dialog>',1);function Ya(e,t){dt(t,!0);let r=H(je(Zt())),n=H(0),i=H(null),a=H(je([])),s=H(je(la())),f=H(!1),l=H(null),u=H(null),c=H(void 0),_=H(void 0),h=H(void 0);const d=X(()=>{if(o(u)===null)return null;const x=De[o(u)].action;return x.type==="playerAction"?[x.from,x.to]:null}),v=new va,g=x=>new Promise(j=>{v.onmessage=I=>j(I.data),v.postMessage(x)}),m=(x,j)=>{const{owner:I,type:ze,position:yt}=o(r)[x],Me=o(r)[x].position,Ot=o(r).map(wt=>({...wt}));o(a).push({pieces:Ot,move:[Me,j]});const qe=o(r).findIndex(wt=>wt.position===j);qe>=0?(o(h).play(),o(r)[qe].position=null,o(r)[qe].owner=I,o(r)[qe].type==="H"&&(o(r)[qe].type="C"),o(r)[qe].type==="L"&&b(i,I,!0)):o(_).play(),o(r)[x].position=j,ze==="C"&&yt!==null&&(I&&j>8||!I&&j<3)&&(o(r)[x].type="H"),ca(o(r),o(n))&&b(i,o(n),!0),fa(o(r),o(a))&&b(i,2),b(n,o(n)===0?1:0,!0)},T=async()=>{const x={pieces:o(r).map(ze=>({...ze})),turn:o(n),adversary:o(s).adversary,played:o(a).map(ze=>ze.pieces.map(yt=>({...yt})))},[[j,I]]=await Promise.all([g(x),lr(1500)]);b(f,!1),m(j,I)},S=async(x,j)=>{o(s).adversary==="human"?m(x,j):(m(x,j),o(i)===null&&(b(f,!0),await T()))},R=()=>{if(o(f))return;(o(a).length>1||o(a).length===1&&o(s).adversary==="human")&&(b(r,o(a).pop().pieces,!0),b(n,o(n)===0?1:0,!0),b(i,null));const x=o(a).length%2===0;o(s).adversary!=="human"&&x===o(s).machineStarts&&(b(r,o(a).pop().pieces,!0),b(n,o(n)===0?1:0,!0))},U=()=>{o(f)||(b(l,"newgame"),o(c).showModal())},L=()=>{b(l,"rules"),o(c).showModal()},A=()=>{b(l,"credits"),o(c).showModal()},M=()=>{o(c).close(),b(l,null)},z=x=>{b(s,{...x},!0),b(r,Zt(),!0),b(a,[],!0),b(i,null),b(n,o(s).machineStarts?1:0,!0),b(f,o(s).machineStarts,!0),b(l,null),b(u,null),o(c).close(),o(s).machineStarts&&o(s).adversary!=="human"&&T()},C=()=>{o(f)||(b(r,Zt(),!0),b(a,[],!0),b(i,null),b(n,0),b(f,!1),b(l,null),b(u,0))},$=()=>{o(u)!==null&&(b(u,Math.max(0,o(u)-1),!0),De[o(u)].action.type!=="read"&&(b(r,o(a).pop().pieces,!0),b(n,o(n)===1?0:1,!0)))},p=()=>{if(o(u)===null)return;const x=De[o(u)].action;x.type!=="playerAction"&&(x.type==="machineAction"&&m(x.from,x.to),b(u,Math.min(De.length-1,o(u)+1),!0))},y=(x,j)=>{if(o(u)===null)return;const I=De[o(u)].action;I.type!=="playerAction"||x!==I.from||j!==I.to||(m(x,j),b(u,Math.min(De.length-1,o(u)+1),!0))};var w=Wa(),q=He(w);jt(q,x=>b(_,x),()=>o(_));var O=k(q,2);jt(O,x=>b(h,x),()=>o(h));var G=k(O,2),me=k(F(G),2),te=k(F(me),2);Ve(te,{onclick:U,children:(x,j)=>{var I=B("Nouvelle partie");E(x,I)},$$slots:{default:!0}});var gt=k(te,2);Ve(gt,{onclick:R,children:(x,j)=>{var I=B("Annuler");E(x,I)},$$slots:{default:!0}});var Nt=k(gt,2);Ve(Nt,{onclick:C,children:(x,j)=>{var I=B("Tutoriel");E(x,I)},$$slots:{default:!0}});var Lt=k(Nt,2);Ve(Lt,{onclick:L,children:(x,j)=>{var I=B("Règles");E(x,I)},$$slots:{default:!0}});var mt=k(Lt,2);Ve(mt,{onclick:A,children:(x,j)=>{var I=B("Crédits");E(x,I)},$$slots:{default:!0}});var br=k(me,2);{var Mn=x=>{{let j=X(()=>o(a).at(-1)?.move??null),I=X(()=>!o(f)&&o(i)===null);Rr(x,{get pieces(){return o(r)},get turn(){return o(n)},get lastMove(){return o(j)},get canPlay(){return o(I)},requiredMove:null,play:S})}},qn=x=>{{let j=X(()=>o(a).at(-1)?.move??null),I=X(()=>De[o(u)].action.type==="playerAction");Rr(x,{get pieces(){return o(r)},get turn(){return o(n)},get lastMove(){return o(j)},get canPlay(){return o(I)},get requiredMove(){return o(d)},play:y})}};oe(br,x=>{o(u)===null?x(Mn):x(qn,!1)})}var Nn=k(br,2);La(Nn,{get outcome(){return o(i)},get isThinking(){return o(f)},get adversary(){return o(s).adversary},get tutorialStep(){return o(u)},tutorialNext:p,tutorialPred:$});var xr=k(G,2),Ln=F(xr);{var On=x=>{Ba(x,{get config(){return o(s)},closeDialog:M,newGame:z})},Dn=x=>{var j=At(),I=He(j);{var ze=Me=>{Ua(Me,{closeDialog:M})},yt=Me=>{var Ot=At(),qe=He(Ot);{var wt=Jt=>{za(Jt,{closeDialog:M})};oe(qe,Jt=>{o(l)==="credits"&&Jt(wt)},!0)}E(Me,Ot)};oe(I,Me=>{o(l)==="rules"?Me(ze):Me(yt,!1)},!0)}E(x,j)};oe(Ln,x=>{o(l)==="newgame"?x(On):x(Dn,!1)})}jt(xr,x=>b(c,x),()=>o(c)),E(e,w),pt()}Bi(Ya,{target:document.getElementById("app")});
