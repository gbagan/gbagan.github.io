(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();const bt=(e,t)=>e===t,ee=Symbol("solid-proxy"),be=Symbol("solid-track"),$e={equals:bt};let et=rt;const Q=1,xe=2,tt={owned:null,cleanups:null,context:null,owner:null};var C=null;let Oe=null,$t=null,A=null,M=null,J=null,Ee=0;function ie(e,t){const n=A,i=C,r=e.length===0,l=t===void 0?i:t,o=r?tt:{owned:null,cleanups:null,context:l?l.context:null,owner:l},s=r?e:()=>e(()=>U(()=>pe(o)));C=o,A=null;try{return te(s,!0)}finally{A=n,C=i}}function Y(e,t){t=t?Object.assign({},$e,t):$e;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=r=>(typeof r=="function"&&(r=r(n.value)),it(n,r));return[nt.bind(n),i]}function xt(e,t,n){const i=Pe(e,t,!0,Q);ce(i)}function R(e,t,n){const i=Pe(e,t,!1,Q);ce(i)}function wt(e,t,n){et=Et;const i=Pe(e,t,!1,Q);i.user=!0,J?J.push(i):ce(i)}function B(e,t,n){n=n?Object.assign({},$e,n):$e;const i=Pe(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,ce(i),nt.bind(i)}function G(e){return te(e,!1)}function U(e){if(A===null)return e();const t=A;A=null;try{return e()}finally{A=t}}function _t(e){wt(()=>U(e))}function Ge(e){return C===null||(C.cleanups===null?C.cleanups=[e]:C.cleanups.push(e)),e}function Me(){return A}function St(e){const t=A,n=C;return Promise.resolve().then(()=>{A=t,C=n;let i;return te(e,!1),A=C=null,i?i.done:void 0})}const[At,Yn]=Y(!1);function Ct(){return[At,St]}function nt(){if(this.sources&&this.state)if(this.state===Q)ce(this);else{const e=M;M=null,te(()=>_e(this),!1),M=e}if(A){const e=this.observers?this.observers.length:0;A.sources?(A.sources.push(this),A.sourceSlots.push(e)):(A.sources=[this],A.sourceSlots=[e]),this.observers?(this.observers.push(A),this.observerSlots.push(A.sources.length-1)):(this.observers=[A],this.observerSlots=[A.sources.length-1])}return this.value}function it(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&te(()=>{for(let r=0;r<e.observers.length;r+=1){const l=e.observers[r],o=Oe&&Oe.running;o&&Oe.disposed.has(l),(o?!l.tState:!l.state)&&(l.pure?M.push(l):J.push(l),l.observers&&lt(l)),o||(l.state=Q)}if(M.length>1e6)throw M=[],new Error},!1)),t}function ce(e){if(!e.fn)return;pe(e);const t=Ee;kt(e,e.value,t)}function kt(e,t,n){let i;const r=C,l=A;A=C=e;try{i=e.fn(t)}catch(o){return e.pure&&(e.state=Q,e.owned&&e.owned.forEach(pe),e.owned=null),e.updatedAt=n+1,st(o)}finally{A=l,C=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?it(e,i):e.value=i,e.updatedAt=n)}function Pe(e,t,n,i=Q,r){const l={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:C,context:C?C.context:null,pure:n};return C===null||C!==tt&&(C.owned?C.owned.push(l):C.owned=[l]),l}function we(e){if(e.state===0)return;if(e.state===xe)return _e(e);if(e.suspense&&U(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ee);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Q)ce(e);else if(e.state===xe){const i=M;M=null,te(()=>_e(e,t[0]),!1),M=i}}function te(e,t){if(M)return e();let n=!1;t||(M=[]),J?n=!0:J=[],Ee++;try{const i=e();return Tt(n),i}catch(i){n||(J=null),M=null,st(i)}}function Tt(e){if(M&&(rt(M),M=null),e)return;const t=J;J=null,t.length&&te(()=>et(t),!1)}function rt(e){for(let t=0;t<e.length;t++)we(e[t])}function Et(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:we(i)}for(t=0;t<n;t++)we(e[t])}function _e(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const r=i.state;r===Q?i!==t&&(!i.updatedAt||i.updatedAt<Ee)&&we(i):r===xe&&_e(i,t)}}}function lt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=xe,n.pure?M.push(n):J.push(n),n.observers&&lt(n))}}function pe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const l=r.pop(),o=n.observerSlots.pop();i<r.length&&(l.sourceSlots[o]=i,r[i]=l,n.observerSlots[i]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)pe(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)pe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Pt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function st(e,t=C){throw Pt(e)}const De=Symbol("fallback");function Se(e){for(let t=0;t<e.length;t++)e[t]()}function Lt(e,t,n={}){let i=[],r=[],l=[],o=0,s=t.length>1?[]:null;return Ge(()=>Se(l)),()=>{let a=e()||[],d=a.length,p,c;return a[be],U(()=>{let P,b,$,y,v,k,T,O,u;if(d===0)o!==0&&(Se(l),l=[],i=[],r=[],o=0,s&&(s=[])),n.fallback&&(i=[De],r[0]=ie(f=>(l[0]=f,n.fallback())),o=1);else if(o===0){for(r=new Array(d),c=0;c<d;c++)i[c]=a[c],r[c]=ie(x);o=d}else{for($=new Array(d),y=new Array(d),s&&(v=new Array(d)),k=0,T=Math.min(o,d);k<T&&i[k]===a[k];k++);for(T=o-1,O=d-1;T>=k&&O>=k&&i[T]===a[O];T--,O--)$[O]=r[T],y[O]=l[T],s&&(v[O]=s[T]);for(P=new Map,b=new Array(O+1),c=O;c>=k;c--)u=a[c],p=P.get(u),b[c]=p===void 0?-1:p,P.set(u,c);for(p=k;p<=T;p++)u=i[p],c=P.get(u),c!==void 0&&c!==-1?($[c]=r[p],y[c]=l[p],s&&(v[c]=s[p]),c=b[c],P.set(u,c)):l[p]();for(c=k;c<d;c++)c in $?(r[c]=$[c],l[c]=y[c],s&&(s[c]=v[c],s[c](c))):r[c]=ie(x);r=r.slice(0,o=d),i=a.slice(0)}return r});function x(P){if(l[c]=P,s){const[b,$]=Y(c);return s[c]=$,t(a[c],b)}return t(a[c])}}}function Ot(e,t,n={}){let i=[],r=[],l=[],o=[],s=0,a;return Ge(()=>Se(l)),()=>{const d=e()||[],p=d.length;return d[be],U(()=>{if(p===0)return s!==0&&(Se(l),l=[],i=[],r=[],s=0,o=[]),n.fallback&&(i=[De],r[0]=ie(x=>(l[0]=x,n.fallback())),s=1),r;for(i[0]===De&&(l[0](),l=[],i=[],r=[],s=0),a=0;a<p;a++)a<i.length&&i[a]!==d[a]?o[a](()=>d[a]):a>=i.length&&(r[a]=ie(c));for(;a<i.length;a++)l[a]();return s=o.length=l.length=p,i=d.slice(0),r=r.slice(0,s)});function c(x){l[a]=x;const[P,b]=Y(d[a]);return o[a]=b,t(P,a)}}}function _(e,t){return U(()=>e(t||{}))}function jt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return B(Lt(()=>e.each,e.children,t||void 0))}function Mt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return B(Ot(()=>e.each,e.children,t||void 0))}function Dt(e,t,n){let i=n.length,r=t.length,l=i,o=0,s=0,a=t[r-1].nextSibling,d=null;for(;o<r||s<l;){if(t[o]===n[s]){o++,s++;continue}for(;t[r-1]===n[l-1];)r--,l--;if(r===o){const p=l<i?s?n[s-1].nextSibling:n[l-s]:a;for(;s<l;)e.insertBefore(n[s++],p)}else if(l===s)for(;o<r;)(!d||!d.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[l-1]&&n[s]===t[r-1]){const p=t[--r].nextSibling;e.insertBefore(n[s++],t[o++].nextSibling),e.insertBefore(n[--l],p),t[r]=n[l]}else{if(!d){d=new Map;let c=s;for(;c<l;)d.set(n[c],c++)}const p=d.get(t[o]);if(p!=null)if(s<p&&p<l){let c=o,x=1,P;for(;++c<r&&c<l&&!((P=d.get(t[c]))==null||P!==p+x);)x++;if(x>p-s){const b=t[o];for(;s<p;)e.insertBefore(n[s++],b)}else e.replaceChild(n[s++],t[o++])}else o++;else t[o++].remove()}}}const Ke="_$DX_DELEGATE";function Nt(e,t,n,i={}){let r;return ie(l=>{r=l,t===document?e():m(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{r(),t.textContent=""}}function w(e,t,n){let i;const r=()=>{const o=document.createElement("template");return o.innerHTML=e,n?o.content.firstChild.firstChild:o.content.firstChild},l=t?()=>U(()=>document.importNode(i||(i=r()),!0)):()=>(i||(i=r())).cloneNode(!0);return l.cloneNode=l,l}function fe(e,t=window.document){const n=t[Ke]||(t[Ke]=new Set);for(let i=0,r=e.length;i<r;i++){const l=e[i];n.has(l)||(n.add(l),t.addEventListener(l,Rt))}}function L(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function qt(e,t){t==null?e.removeAttribute("class"):e.className=t}function ge(e,t,n,i){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function Bt(e,t,n={}){const i=Object.keys(t||{}),r=Object.keys(n);let l,o;for(l=0,o=r.length;l<o;l++){const s=r[l];!s||s==="undefined"||t[s]||(We(e,s,!1),delete n[s])}for(l=0,o=i.length;l<o;l++){const s=i[l],a=!!t[s];!s||s==="undefined"||n[s]===a||!a||(We(e,s,!0),n[s]=a)}return n}function ye(e,t,n){return U(()=>e(t,n))}function m(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return Ae(e,t,i,n);R(r=>Ae(e,t(),r,n),i)}function We(e,t,n){const i=t.trim().split(/\s+/);for(let r=0,l=i.length;r<l;r++)e.classList.toggle(i[r],n)}function Rt(e){let t=e.target;const n=`$$${e.type}`,i=e.target,r=e.currentTarget,l=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),o=()=>{const a=t[n];if(a&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?a.call(t,d,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&l(t.host),!0},s=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();l(a[0]);for(let d=0;d<a.length-2&&(t=a[d],!!o());d++){if(t._$host){t=t._$host,s();break}if(t.parentNode===r)break}}else s();l(i)}function Ae(e,t,n,i,r){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,o=i!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(l==="number"&&(t=t.toString(),t===n))return n;if(o){let s=n[0];s&&s.nodeType===3?s.data!==t&&(s.data=t):s=document.createTextNode(t),n=ne(e,n,i,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean")n=ne(e,n,i);else{if(l==="function")return R(()=>{let s=t();for(;typeof s=="function";)s=s();n=Ae(e,s,n,i)}),()=>n;if(Array.isArray(t)){const s=[],a=n&&Array.isArray(n);if(Ne(s,t,n,r))return R(()=>n=Ae(e,s,n,i,!0)),()=>n;if(s.length===0){if(n=ne(e,n,i),o)return n}else a?n.length===0?Xe(e,s,i):Dt(e,n,s):(n&&ne(e),Xe(e,s));n=s}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=ne(e,n,i,t);ne(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Ne(e,t,n,i){let r=!1;for(let l=0,o=t.length;l<o;l++){let s=t[l],a=n&&n[e.length],d;if(!(s==null||s===!0||s===!1))if((d=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))r=Ne(e,s,a)||r;else if(d==="function")if(i){for(;typeof s=="function";)s=s();r=Ne(e,Array.isArray(s)?s:[s],Array.isArray(a)?a:[a])||r}else e.push(s),r=!0;else{const p=String(s);a&&a.nodeType===3&&a.data===p?e.push(a):e.push(document.createTextNode(p))}}return r}function Xe(e,t,n=null){for(let i=0,r=t.length;i<r;i++)e.insertBefore(t[i],n)}function ne(e,t,n,i){if(n===void 0)return e.textContent="";const r=i||document.createTextNode("");if(t.length){let l=!1;for(let o=t.length-1;o>=0;o--){const s=t[o];if(r!==s){const a=s.parentNode===e;!l&&!o?a?e.replaceChild(r,s):e.insertBefore(r,n):a&&s.remove()}else l=!0}}else e.insertBefore(r,n);return[r]}const Ce=Symbol("store-raw"),re=Symbol("store-node"),F=Symbol("store-has"),ot=Symbol("store-self");function at(e){let t=e[ee];if(!t&&(Object.defineProperty(e,ee,{value:t=new Proxy(e,Ut)}),!Array.isArray(e))){const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let r=0,l=n.length;r<l;r++){const o=n[r];i[o].get&&Object.defineProperty(e,o,{enumerable:i[o].enumerable,get:i[o].get.bind(t)})}}return t}function oe(e){let t;return e!=null&&typeof e=="object"&&(e[ee]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ae(e,t=new Set){let n,i,r,l;if(n=e!=null&&e[Ce])return n;if(!oe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,s=e.length;o<s;o++)r=e[o],(i=ae(r,t))!==r&&(e[o]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let a=0,d=o.length;a<d;a++)l=o[a],!s[l].get&&(r=e[l],(i=ae(r,t))!==r&&(e[l]=i))}return e}function ke(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function he(e,t,n){if(e[t])return e[t];const[i,r]=Y(n,{equals:!1,internal:!0});return i.$=r,e[t]=i}function It(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===ee||t===re||(delete n.value,delete n.writable,n.get=()=>e[ee][t]),n}function ut(e){Me()&&he(ke(e,re),ot)()}function Gt(e){return ut(e),Reflect.ownKeys(e)}const Ut={get(e,t,n){if(t===Ce)return e;if(t===ee)return n;if(t===be)return ut(e),n;const i=ke(e,re),r=i[t];let l=r?r():e[t];if(t===re||t===F||t==="__proto__")return l;if(!r){const o=Object.getOwnPropertyDescriptor(e,t);Me()&&(typeof l!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(l=he(i,t,l)())}return oe(l)?at(l):l},has(e,t){return t===Ce||t===ee||t===be||t===re||t===F||t==="__proto__"?!0:(Me()&&he(ke(e,F),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Gt,getOwnPropertyDescriptor:It};function ue(e,t,n,i=!1){if(!i&&e[t]===n)return;const r=e[t],l=e.length;n===void 0?(delete e[t],e[F]&&e[F][t]&&r!==void 0&&e[F][t].$()):(e[t]=n,e[F]&&e[F][t]&&r===void 0&&e[F][t].$());let o=ke(e,re),s;if((s=he(o,t,r))&&s.$(()=>n),Array.isArray(e)&&e.length!==l){for(let a=e.length;a<l;a++)(s=o[a])&&s.$();(s=he(o,"length",l))&&s.$(e.length)}(s=o[ot])&&s.$()}function ct(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const r=n[i];ue(e,r,t[r])}}function Ht(e,t){if(typeof t=="function"&&(t=t(e)),t=ae(t),Array.isArray(t)){if(e===t)return;let n=0,i=t.length;for(;n<i;n++){const r=t[n];e[n]!==r&&ue(e,n,r)}ue(e,"length",i)}else ct(e,t)}function de(e,t,n=[]){let i,r=e;if(t.length>1){i=t.shift();const o=typeof i,s=Array.isArray(e);if(Array.isArray(i)){for(let a=0;a<i.length;a++)de(e,[i[a]].concat(t),n);return}else if(s&&o==="function"){for(let a=0;a<e.length;a++)i(e[a],a)&&de(e,[a].concat(t),n);return}else if(s&&o==="object"){const{from:a=0,to:d=e.length-1,by:p=1}=i;for(let c=a;c<=d;c+=p)de(e,[c].concat(t),n);return}else if(t.length>1){de(e[i],t,[i].concat(n));return}r=e[i],n=[i].concat(n)}let l=t[0];typeof l=="function"&&(l=l(r,n),l===r)||i===void 0&&l==null||(l=ae(l),i===void 0||oe(r)&&oe(l)&&!Array.isArray(l)?ct(r,l):ue(e,i,l))}function ft(...[e,t]){const n=ae(e||{}),i=Array.isArray(n),r=at(n);function l(...o){G(()=>{i&&o.length===1?Ht(n,o[0]):de(n,o)})}return[r,l]}const Te=new WeakMap,dt={get(e,t){if(t===Ce)return e;const n=e[t];let i;return oe(n)?Te.get(n)||(Te.set(n,i=new Proxy(n,dt)),i):n},set(e,t,n){return ue(e,t,ae(n)),!0},deleteProperty(e,t){return ue(e,t,void 0,!0),!0}};function me(e){return t=>{if(oe(t)){let n;(n=Te.get(t))||Te.set(t,n=new Proxy(t,dt)),e(n)}return t}}const Je=e=>e.length===0?null:e[e.length-1];function Ft(e,t){let n=0;const i=e.length;for(let r=0;r<i;r++)t(e[r])&&n++;return n}const qe=e=>new Promise(t=>setTimeout(t,e));function Kt(){return{adversary:"level1",machineStarts:!1}}function Be(){return[{type:"E",position:9,owner:0},{type:"L",position:10,owner:0},{type:"G",position:11,owner:0},{type:"C",position:7,owner:0},{type:"E",position:2,owner:1},{type:"L",position:1,owner:1},{type:"G",position:0,owner:1},{type:"C",position:4,owner:1}]}function Wt(){return{pieces:Be(),turn:0,outcome:null,played:[],config:Kt(),isThinking:!1,dialog:null,tutorialStep:null}}const pt={C:[[0,1]],H:[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,1]],G:[[0,1],[1,0],[0,-1],[-1,0]],E:[[1,1],[-1,1],[1,-1],[-1,-1]],L:[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,1],[1,-1],[-1,-1]]};function gt(e,t){const n=new Array(12);n.fill(0);for(const s of e)s.position!==null&&(n[s.position]=s.owner+1);if(t.position===null){const s=[];for(let a=0;a<12;a++)n[a]||s.push(a);return s}let i=[];const r=t.position%3,l=t.position/3|0,o=pt[t.type];for(const s of o){const[a,d]=t.owner?[s[0],s[1]]:[-s[0],-s[1]],p=r+a,c=l+d;if(p>=0&&p<3&&c>=0&&c<4){const x=3*c+p;n[x]!==t.owner+1&&i.push(x)}}return i}const Xt=(e,t)=>e.owner===t.owner&&e.position===t.position&&e.type===t.type,Jt=(e,t)=>{for(let n=0;n<8;n++)if(!Xt(e[n],t[n]))return!1;return!0},Yt=(e,t)=>Ft(t,n=>Jt(e,n.pieces))>=2,Qt=(e,t)=>{const n=e[t?5:1].position;return n!==null&&(t&&n>8||!t&&n<3)&&e.every(i=>i.owner===t||!gt(e,i).includes(n))},V={type:"read"},H=e=>["R",e],D=e=>["G",e],z=e=>["B",e],Z=[{text:["Bienvenue dans le ",z("tutoriel"),"!"],action:V},{text:[z("Catch the lion")," est un jeu à deux joueurs sur un plateau 4x3. ","Le but est de capturer le ",H("lion")," adverse."],action:V},{text:["Chaque joueur possède 4 pièces: un ",D("lion"),", une ",D("girafe"),", un",D("éléphant")," et un ",D("poussin"),". L'",z("orientation")," d'une pièce indique à quel joueur elle appartient."],action:V},{text:["Chaque pièce peut se déplacer d'une case dans une des directions indiquées sur la pièce si la case d'arrivée est vide ou si il y a une pièce adverse dessus."],action:V},{text:["Une pièce peut ",z("capturer")," une pièce adverse en se déplaçant dessus. ","Essaie de capturer mon ",H("poussin")," avec ton ",D("poussin")," en utilisant un ",z("Glisser-déposer"),"."],action:{type:"playerAction",from:3,to:4}},{text:["Bravo, le poussin adverse fait maintenant partie de ta ",D("réserve"),". A partir du tour suivant tu pourras le placer sur n'importe quelle case vide."],action:V},{text:["C'est maintenant à moi de jouer"],action:{type:"machineAction",from:4,to:4}},{text:["J'ai capturé ton ",D("poussin")," avec mon ",H("éléphant"),". Essaie maintenant déplacer le ",D("poussin")," de ta réserve vers la case indiquée."],action:{type:"playerAction",from:7,to:7}},{text:["Bravo! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:4,to:6}},{text:["Je déplace à nouveau mon ",H("éléphant"),". Ton ",D("lion")," est menacé. Capture mon ",H("éléphant")," avec ton ",D("lion"),"pour parer la menace"],action:{type:"playerAction",from:1,to:6}},{text:["Bravo! Tu as paré la menace! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:6,to:3}},{text:["Je déplace ma ",H("girafe")," menaçant ton ",D("lion"),". Tu ne peux pas la capturer car ton lion se ferait capturer au coup suivant. Tu dois donc fuir. Déplace ton ",D("lion")," vers la case indiquée."],action:{type:"playerAction",from:1,to:10}},{text:["Bravo! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:3,to:6}},{text:["J'ai utilisé le ",H("poussin")," de ma réserve. Ton ",D("éléphant")," est bloqué, il va se faire prendre par mon ",H("poussin"),". Tu ne peux rien faire contre ça. Déplace ta ",D("girafe")," à la case indiquée."],action:{type:"playerAction",from:2,to:8}},{text:["Bravo! C'est maintenant à moi de jouer."],action:{type:"machineAction",from:3,to:9}},{text:["Mon ",H("poussin")," est arrivé sur la dernière rangée, il  est promu en ",H("poule"),". Cette poule est très dangereuse vu ses mouvements autorisés. Dépèche-toi de la capturer."],action:{type:"playerAction",from:1,to:9}},{text:["Une fois une ",z("poule")," capturée, elle redevient un ",z("poussin"),". Tu ne peux pas directement promouvoir un poussin de la réserve en poule."],action:V},{text:["Tu peux également gagner la partie en emmenant ton ",D("lion")," sur la dernière rangée. Le lion ne doit pas pouvoir être immédiatement capturé par l'adversaire."],action:V},{text:["Bravo! Tu as complété le tutoriel! Tu peux commencer à jouer en cliquant sur ",z("Nouvelle partie"),"."],action:V}];function Vt(e){return new Worker(""+new URL("worker.civet-DXXuhwe2.js",import.meta.url).href,{name:e?.name})}var zt=w('<svg><line stroke=red stroke-width=50 class="pointer-events-none animate-lion-arrow"marker-end=url(#arrowhead)></svg>',!1,!0),Zt=w('<div class="w-[42rem] z-20"><svg class="select-none touch-none"viewBox="0 0 1600 1680"><defs><marker id=arrowhead markerWidth=6 markerHeight=4 refX=3 refY=2 orient=auto><polygon points="0 0, 4 2, 0 4"fill=red></polygon></marker></defs><symbol id=twice viewBox="0 0 40 40"><rect x=0 y=0 width=40 height=40 fill=red></rect><text x=20 y=30 fill=white font-size=30px font-weight=bold text-anchor=middle>2</text></symbol><image x=200 y=-500 width=1200 height=2580 href=./board4.webp preserveAspectRatio=xMidYMid>'),en=w('<svg><symbol viewBox="0 0 50 50"><rect x=0.5 y=0.5 width=49 height=49 rx=5 ry=5 stroke=black stroke-width=1></rect><image x=6 y=6 width=38 height=38></svg>',!1,!0),tn=w("<svg><circle r=2 stroke=black fill=red></svg>",!1,!0),nn=w('<svg><line x1=320 x2=1310 stroke=red stroke-width=5 stroke-dasharray="41.25 41.25"stroke-dashoffset=20.625></svg>',!1,!0),rn=w('<svg><line y1=200 y2=1500 stroke=red stroke-width=5 stroke-dasharray="40.625 40.625"stroke-dashoffset=20.3125></svg>',!1,!0),ln=w("<svg><rect width=310 height=305 stroke-width=20></svg>",!1,!0),sn=w('<svg><use x=-130 y=-130 width=260 height=260 filter="drop-shadow(16px 16px 16px gray)"></svg>',!1,!0),Ye=w("<svg><use href=#twice width=50 height=50></svg>",!1,!0),on=w("<svg><use x=-130 y=-130 width=260 height=260 pointer-events=none></svg>",!1,!0);const le=320,se=200,W=330,X=325,an={L:"#fbc0bf",G:"#d6b3d5",E:"#d6b3d5",C:"#f0f4a3",H:"#eef1a5"},Re={C:0,E:1,G:2,L:3,H:4},un=e=>{const t=e.position;let n,i,r;t===null?(n=e.owner?1500:100,i=e.owner?200+200*Re[e.type]:1570-200*Re[e.type],r=.7):(n=le+W/2+W*(t%3),i=se+X/2+X*(t/3|0),r=1);const l=e.owner?"180deg":"0";return`translate(${n}px, ${i}px) rotate(${l}) scale(${r})`},cn=(e,t)=>{const n=100*e.x,i=100*e.y,r=t.owner?"180deg":"0";return`translate(${n}%, ${i}%) rotate(${r})`},fn=e=>{const t=B(()=>{const n=e.pieces[e.from],i=le+W/2+W*(e.to%3),r=se+X/2+X*(e.to/3|0);return n.position===null?{x1:"100",y1:1570-200*Re[n.type],x2:i,y2:r}:{x1:le+W/2+W*(n.position%3),y1:se+X/2+X*(n.position/3|0),x2:i,y2:r}});return(()=>{var n=zt();return R(i=>{var r=t().x1,l=t().x2,o=t().y1,s=t().y2;return r!==i.e&&L(n,"x1",i.e=r),l!==i.t&&L(n,"x2",i.t=l),o!==i.a&&L(n,"y1",i.a=o),s!==i.o&&L(n,"y2",i.o=s),i},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()},Qe=e=>{let t;const[n,i]=Y(null),[r,l]=Y(null),[o,s]=Y(null),a=B(()=>n()!==null?gt(e.pieces,e.pieces[n()]):[]),d=y=>e.lastMove&&e.lastMove.includes(y);function p(y){const{left:v,top:k,width:T,height:O}=t.getBoundingClientRect();return{x:(y.clientX-v)/T,y:(y.clientY-k)/O}}const c=(y,v)=>e.pieces[y].owner===v&&e.pieces[y+4].owner===v&&e.pieces[y].position===null&&e.pieces[y+4].position===null&&n()!==y&&n()!==y+4,x=(y,v)=>{if(!(!e.canPlay||e.pieces[y].owner!==e.turn))return v.currentTarget.setPointerCapture(v.pointerId),v.currentTarget.releasePointerCapture(v.pointerId),G(()=>(i(y),l(y),s(p(v))))},P=y=>s(p(y)),b=(y,v)=>(v.stopPropagation(),G(()=>{s(null);const k=n();if(k!==null)return i(null),e.play(k,y)}),setTimeout(()=>l(null),500)),$=()=>G(()=>(s(null),i(null)));return(()=>{var y=Zt(),v=y.firstChild,k=v.firstChild,T=k.nextSibling,O=T.nextSibling;v.$$pointerup=$,v.addEventListener("pointerleave",$),v.addEventListener("pointercancel",$),v.$$pointermove=P;var u=t;return typeof u=="function"?ye(u,v):t=v,m(v,()=>["L","G","E","C","H"].map(f=>(()=>{var g=en(),h=g.firstChild,S=h.nextSibling;return L(g,"id",`piece-${f}`),L(S,"href",`./piece-${f}.webp`),m(g,()=>pt[f].map(([E,N])=>(()=>{var j=tn();return L(j,"cx",25+20*E),L(j,"cy",25-20*N),j})()),null),R(()=>L(h,"fill",an[f])),g})()),O),m(v,()=>[0,1,2,3,4].map(f=>(()=>{var g=nn();return L(g,"y1",se+f*X),L(g,"y2",se+f*X),g})()),null),m(v,()=>[0,1,2,3].map(f=>(()=>{var g=rn();return L(g,"x1",le+f*W),L(g,"x2",le+f*W),g})()),null),m(v,()=>[0,1,2,3,4,5,6,7,8,9,10,11].map(f=>(()=>{var g=ln();return g.$$pointerup=b,g.$$pointerupData=f,L(g,"x",le+10+W*(f%3)),L(g,"y",se+10+X*(f/3|0)),R(h=>{var S=a().includes(f)?"lightgreen":"transparent",E=!a().includes(f),N=d(f)?"rgba(0, 255, 0, 0.3)":"transparent";return S!==h.e&&L(g,"stroke",h.e=S),E!==h.t&&g.classList.toggle("pointer-events-none",h.t=E),N!==h.a&&L(g,"fill",h.a=N),h},{e:void 0,t:void 0,a:void 0}),g})()),null),m(v,_(Mt,{get each(){return e.pieces},children:(f,g)=>(()=>{var h=sn();return h.$$pointerdown=x,h.$$pointerdownData=g,R(S=>{var E=un(f()),N=`#piece-${f().type}`,j={"pointer-events-none":n()!==null,"transition-transform duration-1000":r()!==g,"opacity-0":g===n()&&o()!==null};return E!==S.e&&((S.e=E)!=null?h.style.setProperty("transform",E):h.style.removeProperty("transform")),N!==S.t&&L(h,"href",S.t=N),S.a=Bt(h,j,S.a),S},{e:void 0,t:void 0,a:void 0}),h})()}),null),m(v,()=>[3,0,2].map((f,g)=>[(()=>{var h=Ye();return`translate(140px, ${1610-200*g}px)`!=null?h.style.setProperty("transform",`translate(140px, ${1610-200*g}px)`):h.style.removeProperty("transform"),R(()=>h.classList.toggle("opacity-0",!c(f,0))),h})(),(()=>{var h=Ye();return`translate(1540px, ${240+200*g}px)`!=null?h.style.setProperty("transform",`translate(1540px, ${240+200*g}px)`):h.style.removeProperty("transform"),R(()=>h.classList.toggle("opacity-0",!c(f,1))),h})()]),null),m(v,(()=>{var f=B(()=>!!(o()&&n()!==null));return()=>f()&&(()=>{var g=on();return R(h=>{var S=cn(o(),e.pieces[n()]),E=`#piece-${e.pieces[n()].type}`;return S!==h.e&&((h.e=S)!=null?g.style.setProperty("transform",S):g.style.removeProperty("transform")),E!==h.t&&L(g,"href",h.t=E),h},{e:void 0,t:void 0}),g})()})(),null),m(v,(()=>{var f=B(()=>!!(e.requiredMove&&n()===null));return()=>f()&&_(fn,{get from(){return e.requiredMove[0]},get to(){return e.requiredMove[1]},get pieces(){return e.pieces}})})(),null),y})()};fe(["pointermove","pointerup","pointerdown"]);var dn=()=>{},Ve=(e,t)=>t();function pn(e,t){const n=U(e),i=n?[n]:[],{onEnter:r=Ve,onExit:l=Ve}=t,[o,s]=Y(t.appear?[]:i),[a]=Ct();let d,p=!1;function c(b,$){if(!b)return $&&$();p=!0,l(b,()=>{G(()=>{p=!1,s(y=>y.filter(v=>v!==b)),$&&$()})})}function x(b){const $=d;if(!$)return b&&b();d=void 0,s(y=>[$,...y]),r($,b??dn)}const P=t.mode==="out-in"?b=>p||c(b,x):t.mode==="in-out"?b=>x(()=>c(b)):b=>{c(b),x()};return xt(b=>{const $=e();return U(a)?(a(),b):($!==b&&(d=$,G(()=>U(()=>P(b)))),$)},t.appear?void 0:n),o}var ze=e=>e instanceof Element;function Ie(e,t){if(t(e))return e;if(typeof e=="function"&&!e.length)return Ie(e(),t);if(Array.isArray(e))for(const n of e){const i=Ie(n,t);if(i)return i}return null}function gn(e,t=ze,n=ze){const i=B(e);return B(()=>Ie(i(),t))}function hn(e){return B(()=>{const t=e.name||"s";return{enterActive:(e.enterActiveClass||t+"-enter-active").split(" "),enter:(e.enterClass||t+"-enter").split(" "),enterTo:(e.enterToClass||t+"-enter-to").split(" "),exitActive:(e.exitActiveClass||t+"-exit-active").split(" "),exit:(e.exitClass||t+"-exit").split(" "),exitTo:(e.exitToClass||t+"-exit-to").split(" "),move:(e.moveClass||t+"-move").split(" ")}})}function ht(e){requestAnimationFrame(()=>requestAnimationFrame(e))}function vn(e,t,n,i){const{onBeforeEnter:r,onEnter:l,onAfterEnter:o}=t;r?.(n),n.classList.add(...e.enter),n.classList.add(...e.enterActive),queueMicrotask(()=>{if(!n.parentNode)return i?.();l?.(n,()=>s())}),ht(()=>{n.classList.remove(...e.enter),n.classList.add(...e.enterTo),(!l||l.length<2)&&(n.addEventListener("transitionend",s),n.addEventListener("animationend",s))});function s(a){(!a||a.target===n)&&(i?.(),n.removeEventListener("transitionend",s),n.removeEventListener("animationend",s),n.classList.remove(...e.enterActive),n.classList.remove(...e.enterTo),o?.(n))}}function mn(e,t,n,i){const{onBeforeExit:r,onExit:l,onAfterExit:o}=t;if(!n.parentNode)return i?.();r?.(n),n.classList.add(...e.exit),n.classList.add(...e.exitActive),l?.(n,()=>s()),ht(()=>{n.classList.remove(...e.exit),n.classList.add(...e.exitTo),(!l||l.length<2)&&(n.addEventListener("transitionend",s),n.addEventListener("animationend",s))});function s(a){(!a||a.target===n)&&(i?.(),n.removeEventListener("transitionend",s),n.removeEventListener("animationend",s),n.classList.remove(...e.exitActive),n.classList.remove(...e.exitTo),o?.(n))}}var yn={inout:"in-out",outin:"out-in"},bn=e=>{const t=hn(e);return pn(gn(()=>e.children),{mode:yn[e.mode],appear:e.appear,onEnter(n,i){vn(t(),e,n,i)},onExit(n,i){mn(t(),e,n,i)}})},$n=w('<span class="text-green-500 font-bold">'),xn=w('<span class="text-red-500 font-bold">'),wn=w('<span class="text-blue-500 font-bold">');const vt=e=>(()=>{var t=$n();return m(t,()=>e.children),t})(),_n=e=>(()=>{var t=xn();return m(t,()=>e.children),t})(),Sn=e=>(()=>{var t=wn();return m(t,()=>e.children),t})();var q=vt,An=w("<div>"),Cn=w('<div class="tooltip -right-5">'),kn=w('<div class="absolute -right-2 flex gap-32"><button class=tutorial-button>Précédent</button><button class=tutorial-button>Suivant');function je(e,t){return e.length===t}const K=e=>["B",e],Ze=[[["Bienvenue sur l'appli ",K("Catch the lion"),"."],3e3],[[K("Catch the lion")," connu en japonais sous le nom ",K("Dobutsu Shogi")," est une variante pour enfants du Shogi."],5e3],[["Le jeu a été entièrement résolu par ordinateur. Il existe ",K("1 567 925 964")," configurations possibles."],5e3],[["Si les deux joueurs jouent de manière optimale, la victoire est assurée pour le ",K("second")," joueur."],5e3],[["Pour apprendre les règles, tu peux clicker sur ",K("Tutoriel"),"."],3e3]],Tn=e=>{const[t,n]=Y(null);let i=!1;_t(async()=>{let o=0;const s=[];for(;!i;){const[a,d]=Ze[o];n(a),await qe(d),n(null),o=(o+1)%Ze.length,s.push(await qe(1500))}return s}),Ge(()=>i=!0);const r=B(()=>e.tutorialStep!==null?Z[e.tutorialStep].text:e.outcome!==null?e.outcome===2?["Oh, cette configuration de pièces a été répétée 3 fois. C'est un ",K("match nul"),"."]:e.adversary==="human"?[`Bravo! Le joueur ${e.outcome+1} a gagné!`]:e.outcome===0?["Zut! J'ai perdu! Tu peux changer de difficulté en cliquant sur ",K("Nouvelle partie"),"."]:["Oh oui! J'ai gagné! Tu peux changer de difficulté en cliquant sur ",K("Nouvelle partie"),"."]:t()),l=B(()=>e.isThinking?"bg-thinking":e.outcome===2?"bg-surprised":e.outcome!==null&&e.outcome===0&&e.adversary!=="human"?"bg-crying":e.outcome!==null&&(e.outcome===1||e.adversary==="human")?"bg-happy":"bg-speaking");return(()=>{var o=An();return m(o,_(bn,{onEnter:(s,a)=>s.animate([{opacity:0},{opacity:1}],{duration:500}).finished.then(a),onExit:(s,a)=>s.animate([{opacity:1},{opacity:0}],{duration:500}).finished.then(a),get children(){return B(()=>!!r())()&&(()=>{var s=Cn();return m(s,_(jt,{get each(){return r()},children:a=>{if(Array.isArray(a)&&je(a,2)&&a[0]==="R"){const[,d]=a;return _(_n,{children:d})}else if(Array.isArray(a)&&je(a,2)&&a[0]==="G"){const[,d]=a;return _(vt,{children:d})}else if(Array.isArray(a)&&je(a,2)&&a[0]==="B"){const[,d]=a;return _(Sn,{children:d})}else return a}})),s})()}}),null),m(o,(()=>{var s=B(()=>e.tutorialStep!==null);return()=>s()&&(()=>{var a=kn(),d=a.firstChild,p=d.nextSibling;return ge(d,"click",e.tutorialPred),ge(p,"click",e.tutorialNext),a})()})(),null),R(()=>qt(o,`z-20 relative w-[15rem] h-[25rem] bg-contain bg-no-repeat ${l()}`)),o})()};fe(["click"]);var En=w("<div class=dialog-title>Nouvelle partie"),Pn=w('<div class="dialog-body grid grid-cols-20/80 gap-8"><div class="text-bold text-lg">Adversaire</div><div class="flex gap-4"></div><div class="text-bold text-lg">Qui commence</div><div class="flex gap-4 text-lg">'),Ln=w("<div class=dialog-buttons><button class=btn>Annuler</button><button class=btn>OK"),On=w("<button class=togglebtn> "),jn=w("<button class=togglebtn>");const Mn=[["human","Humain"],["level1","Débutant"],["level2","Moyen"],["level3","Difficile"]],Dn=e=>{const[t,n]=ft({...e.config}),i=l=>n("adversary",l),r=l=>n("machineStarts",l);return[En(),(()=>{var l=Pn(),o=l.firstChild,s=o.nextSibling,a=s.nextSibling,d=a.nextSibling;return m(s,()=>Mn.map(([p,c])=>(()=>{var x=On();return x.firstChild,x.$$click=i,x.$$clickData=p,m(x,c,null),R(()=>x.classList.toggle("toggledbtn",p===t.adversary)),x})())),m(d,()=>[!1,!0].map(p=>(()=>{var c=jn();return c.$$click=r,c.$$clickData=p,m(c,p?"Machine":"Humain"),R(()=>c.classList.toggle("toggledbtn",p===t.machineStarts)),c})())),l})(),(()=>{var l=Ln(),o=l.firstChild,s=o.nextSibling;return ge(o,"click",e.closeDialog),s.$$click=e.newGame,s.$$clickData=t,l})()]};fe(["click"]);var Nn=w("<div class=dialog-title>Règles de Catch the lion"),qn=w("<div class=dialog-body><ul><li class=list-disc> est un jeu à deux joueurs sur un plateau 4x3. Le but est de capturer le <!> adverse.</li><li class=list-disc>Chaque joueur possède 4 pièces: un <!>, une <!>, un <!> et un <!>.</li><li class=list-disc>L&apos;<!> d&apos;une pièce indique à quel joueur elle appartient.</li><li class=list-disc>Chaque pièce peut se déplacer d&apos;une case dans une des directions indiquées sur la pièce<br>si la case d&apos;arrivée est vide ou si il y a une pièce adverse dessus.</li><li class=list-disc>Une pièce peut <!> une pièce adverse en se déplaçant dessus.<br>La pièce capturée va dans sa <!> et il peut la place sur n&apos;importe quelle case vide à partir du tour suivant.</li><li class=list-disc>Si un <!> atteind la dernière rangée, il est promu en <!>.<br>Si la poule se fait capturer, elle redevient un poussin.</li><li class=list-disc>Un <!> placé depuis la réserve sur la dernière rangée ne devient pas une poule.</li><li class=list-disc>Tu peux également gagner la partie en emmenant ton <!> sur la dernière rangée.<br>Le lion ne doit pas pouvoir être immédiatement capturé par l&apos;adversaire. "),Bn=w("<div class=dialog-buttons><button class=btn>OK");const Rn=e=>[Nn(),(()=>{var t=qn(),n=t.firstChild,i=n.firstChild,r=i.firstChild,l=r.nextSibling;l.nextSibling;var o=i.nextSibling,s=o.firstChild,a=s.nextSibling,d=a.nextSibling,p=d.nextSibling,c=p.nextSibling,x=c.nextSibling,P=x.nextSibling,b=P.nextSibling;b.nextSibling;var $=o.nextSibling,y=$.firstChild,v=y.nextSibling;v.nextSibling;var k=$.nextSibling,T=k.nextSibling,O=T.firstChild,u=O.nextSibling,f=u.nextSibling,g=f.nextSibling,h=g.nextSibling,S=h.nextSibling;S.nextSibling;var E=T.nextSibling,N=E.firstChild,j=N.nextSibling,I=j.nextSibling,ve=I.nextSibling;ve.nextSibling;var Le=E.nextSibling,mt=Le.firstChild,Ue=mt.nextSibling;Ue.nextSibling;var He=Le.nextSibling,yt=He.firstChild,Fe=yt.nextSibling;return Fe.nextSibling,m(i,_(q,{children:"Catch the lion"}),r),m(i,_(q,{children:"lion"}),l),m(o,_(q,{children:"lion"}),a),m(o,_(q,{children:"girafe"}),p),m(o,_(q,{children:"éléphant"}),x),m(o,_(q,{children:"poussin"}),b),m($,_(q,{children:"orientation"}),v),m(T,_(q,{children:"capturer"}),u),m(T,_(q,{children:"réserve"}),S),m(E,_(q,{children:"poussin"}),j),m(E,_(q,{children:"poule"}),ve),m(Le,_(q,{children:"poussin"}),Ue),m(He,_(q,{children:"lion"}),Fe),t})(),(()=>{var t=Bn(),n=t.firstChild;return ge(n,"click",e.closeDialog),t})()];fe(["click"]);var In=w("<div class=dialog-title>Règles de Catch the lion"),Gn=w("<div class=dialog-body><ul><li class=list-disc> est un jeu de plateau créé par Madoka Kitao et Maiko Fujita.</li><li class=list-disc>L&apos;éditeur du jeu est Nekomado.</li><li class=list-disc>L&apos;application a été écrite par Guillaume Bagan.</li><li class=list-disc>Le code source est sous licence MIT.</li><li class=list-disc>Les différentes images ont été générées par Dall-E.</li><li class=list-disc>Les différents sont proviennent de la plate-forme Lichess.</li><li class=list-disc>L&apos;application a été écrite dans le langage Civet à l&apos;aide des librairies Solid et Tailwind."),Un=w("<div class=dialog-buttons><button class=btn>OK");const Hn=e=>[In(),(()=>{var t=Gn(),n=t.firstChild,i=n.firstChild,r=i.firstChild;return m(i,_(q,{children:"Catch the lion"}),r),t})(),(()=>{var t=Un(),n=t.firstChild;return ge(n,"click",e.closeDialog),t})()];fe(["click"]);var Fn=w("<audio src=./move.webm preload=auto>"),Kn=w("<audio src=./capture.webm preload=auto>"),Wn=w('<div class="relative w-screen min-h-screen bg-main bg-cover bg-no-repeat flex flew-row items-center justify-around portrait:flex-col"><div class="absolute bg-white w-full h-full opacity-30 z-10 pointer-events-none"></div><div class="flex flex-col bg-board b-cover p-6 border-2 border-black rounded-xl gap-4 z-20"><div class=text-4xl>Catch the lion</div><button class=btn>Nouvelle partie</button><button class=btn>Annuler</button><button class=btn>Tutoriel</button><button class=btn>Règles</button><button class=btn>Crédits'),Xn=w("<dialog class=dialog>");const Jn=()=>{let e,t,n;const[i,r]=ft(Wt()),l=()=>{if(i.tutorialStep===null)return null;const u=Z[i.tutorialStep].action;return u.type==="playerAction"?[u.from,u.to]:null},o=new Vt;function s(u){return new Promise(f=>(o.onmessage=g=>f(g.data),o.postMessage(u)))}const a=(u,f)=>{const{owner:g,type:h,position:S}=i.pieces[u],E=i.pieces[u].position;return G(()=>{const N=i.pieces.map(I=>({...I}));r("played",i.played.length,{pieces:N,move:[E,f]});let j=i.pieces.findIndex(I=>I.position===f);return j>=0?(n.play(),r("pieces",j,{position:null,owner:g}),r("pieces",j,"type",I=>I==="H"?"C":I),i.pieces[j].type==="L"&&r("outcome",g)):t.play(),r("pieces",u,"position",f),h==="C"&&S!==null&&(g&&f>8||!g&&f<3)&&r("pieces",u,"type","H"),Qt(i.pieces,i.turn)&&r("outcome",i.turn),Yt(i.pieces,i.played)&&r("outcome",2),r("turn",I=>I===0?1:0)})},d=async()=>{const u={pieces:i.pieces.map(h=>({...h})),turn:i.turn,adversary:i.config.adversary,played:i.played.map(h=>h.pieces.map(S=>({...S})))},[[f,g]]=await Promise.all([s(u),qe(1500)]);return G(()=>(r("isThinking",!1),a(f,g)))},p=async(u,f)=>i.config.adversary==="human"?a(u,f):(G(()=>{if(a(u,f),i.outcome===null)return r("isThinking",!0)}),i.outcome!==null?void 0:await d()),c=()=>{if(!i.isThinking)return r(me(u=>{if(u.played.length>1||u.played.length===1&&u.config.adversary==="human"){const g=u.played.pop().pieces;u.pieces=g,u.turn=u.turn===0?1:0,u.outcome=null}const f=u.played.length%2===0;if(u.config.adversary!=="human"&&f===u.config.machineStarts){const g=u.played.pop().pieces;return u.pieces=g,u.turn=u.turn===0?1:0}}))},x=()=>{if(!i.isThinking)return r("dialog","newgame"),e.showModal()},P=()=>(r("dialog","rules"),e.showModal()),b=()=>(r("dialog","credits"),e.showModal()),$=()=>(e.close(),r("dialog",null)),y=u=>{if(r(me(f=>(f.config={...u},f.pieces=Be(),f.played=[],f.outcome=null,f.turn=f.config.machineStarts?1:0,f.isThinking=f.config.machineStarts,f.dialog=null,f.tutorialStep=null))),e.close(),i.config.machineStarts&&i.config.adversary!=="human")return d()},v=()=>{if(!i.isThinking)return r(me(u=>(u.pieces=Be(),u.played=[],u.outcome=null,u.turn=0,u.isThinking=!1,u.dialog=null,u.tutorialStep=0)))},k=()=>G(()=>{if(r("tutorialStep",u=>Math.max(0,u-1)),Z[i.tutorialStep].action.type!=="read")return r(me(u=>(u.pieces=u.played.pop().pieces,u.turn=u.turn===1?0:1)))}),T=()=>{if(i.tutorialStep===null)return;const u=Z[i.tutorialStep].action;if(u.type!=="playerAction")return G(()=>(u.type==="machineAction"&&a(u.from,u.to),r("tutorialStep",f=>Math.min(Z.length-1,f+1))))},O=(u,f)=>{if(i.tutorialStep===null)return;const g=Z[i.tutorialStep].action;if(!(g.type!=="playerAction"||u!==g.from||f!==g.to))return G(()=>(a(u,f),r("tutorialStep",h=>Math.min(Z.length-1,h+1))))};return[(()=>{var u=Fn(),f=t;return typeof f=="function"?ye(f,u):t=u,u})(),(()=>{var u=Kn(),f=n;return typeof f=="function"?ye(f,u):n=u,u})(),(()=>{var u=Wn(),f=u.firstChild,g=f.nextSibling,h=g.firstChild,S=h.nextSibling,E=S.nextSibling,N=E.nextSibling,j=N.nextSibling,I=j.nextSibling;return S.$$click=x,E.$$click=c,N.$$click=v,j.$$click=P,I.$$click=b,m(u,(()=>{var ve=B(()=>i.tutorialStep===null);return()=>ve()?_(Qe,{get pieces(){return i.pieces},get turn(){return i.turn},get lastMove(){return Je(i.played)?.move??null},get canPlay(){return!i.isThinking&&i.outcome===null},requiredMove:null,play:p}):_(Qe,{get pieces(){return i.pieces},get turn(){return i.turn},get lastMove(){return Je(i.played)?.move??null},get canPlay(){return Z[i.tutorialStep].action.type==="playerAction"},get requiredMove(){return l()},play:O})})(),null),m(u,_(Tn,{get outcome(){return i.outcome},get isThinking(){return i.isThinking},get adversary(){return i.config.adversary},get tutorialStep(){return i.tutorialStep},tutorialNext:T,tutorialPred:k}),null),u})(),(()=>{var u=Xn(),f=e;return typeof f=="function"?ye(f,u):e=u,m(u,()=>{switch(i.dialog){case"newgame":return _(Dn,{get config(){return i.config},closeDialog:$,newGame:y});case"rules":return _(Rn,{closeDialog:$});case"credits":return _(Hn,{closeDialog:$});default:return null}}),u})()]};fe(["click"]);Nt(()=>_(Jn,{}),document.getElementById("root"));
