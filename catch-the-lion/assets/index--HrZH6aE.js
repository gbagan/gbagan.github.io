(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();const wt=(e,t)=>e===t,Y=Symbol("solid-proxy"),Le=Symbol("solid-track"),ge={equals:wt};let tt=ot;const U=1,he=2,nt={owned:null,cleanups:null,context:null,owner:null};var C=null;let Ce=null,_t=null,A=null,O=null,G=null,_e=0;function Oe(e,t){const n=A,i=C,r=e.length===0,l=t===void 0?i:t,s=r?nt:{owned:null,cleanups:null,context:l?l.context:null,owner:l},o=r?e:()=>e(()=>I(()=>se(s)));C=s,A=null;try{return Q(o,!0)}finally{A=n,C=i}}function K(e,t){t=t?Object.assign({},ge,t):ge;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=r=>(typeof r=="function"&&(r=r(n.value)),lt(n,r));return[rt.bind(n),i]}function St(e,t,n){const i=Se(e,t,!0,U);ne(i)}function N(e,t,n){const i=Se(e,t,!1,U);ne(i)}function At(e,t,n){tt=Ot;const i=Se(e,t,!1,U);i.user=!0,G?G.push(i):ne(i)}function L(e,t,n){n=n?Object.assign({},ge,n):ge;const i=Se(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,ne(i),rt.bind(i)}function B(e){return Q(e,!1)}function I(e){if(A===null)return e();const t=A;A=null;try{return e()}finally{A=t}}function Ct(e){At(()=>I(e))}function it(e){return C===null||(C.cleanups===null?C.cleanups=[e]:C.cleanups.push(e)),e}function je(){return A}function Tt(e){const t=A,n=C;return Promise.resolve().then(()=>{A=t,C=n;let i;return Q(e,!1),A=C=null,i?i.done:void 0})}const[kt,$i]=K(!1);function Et(){return[kt,Tt]}function rt(){if(this.sources&&this.state)if(this.state===U)ne(this);else{const e=O;O=null,Q(()=>ye(this),!1),O=e}if(A){const e=this.observers?this.observers.length:0;A.sources?(A.sources.push(this),A.sourceSlots.push(e)):(A.sources=[this],A.sourceSlots=[e]),this.observers?(this.observers.push(A),this.observerSlots.push(A.sources.length-1)):(this.observers=[A],this.observerSlots=[A.sources.length-1])}return this.value}function lt(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&Q(()=>{for(let r=0;r<e.observers.length;r+=1){const l=e.observers[r],s=Ce&&Ce.running;s&&Ce.disposed.has(l),(s?!l.tState:!l.state)&&(l.pure?O.push(l):G.push(l),l.observers&&st(l)),s||(l.state=U)}if(O.length>1e6)throw O=[],new Error},!1)),t}function ne(e){if(!e.fn)return;se(e);const t=_e;Pt(e,e.value,t)}function Pt(e,t,n){let i;const r=C,l=A;A=C=e;try{i=e.fn(t)}catch(s){return e.pure&&(e.state=U,e.owned&&e.owned.forEach(se),e.owned=null),e.updatedAt=n+1,at(s)}finally{A=l,C=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?lt(e,i):e.value=i,e.updatedAt=n)}function Se(e,t,n,i=U,r){const l={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:C,context:C?C.context:null,pure:n};return C===null||C!==nt&&(C.owned?C.owned.push(l):C.owned=[l]),l}function me(e){if(e.state===0)return;if(e.state===he)return ye(e);if(e.suspense&&I(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<_e);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===U)ne(e);else if(e.state===he){const i=O;O=null,Q(()=>ye(e,t[0]),!1),O=i}}function Q(e,t){if(O)return e();let n=!1;t||(O=[]),G?n=!0:G=[],_e++;try{const i=e();return Lt(n),i}catch(i){n||(G=null),O=null,at(i)}}function Lt(e){if(O&&(ot(O),O=null),e)return;const t=G;G=null,t.length&&Q(()=>tt(t),!1)}function ot(e){for(let t=0;t<e.length;t++)me(e[t])}function Ot(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:me(i)}for(t=0;t<n;t++)me(e[t])}function ye(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const r=i.state;r===U?i!==t&&(!i.updatedAt||i.updatedAt<_e)&&me(i):r===he&&ye(i,t)}}}function st(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=he,n.pure?O.push(n):G.push(n),n.observers&&st(n))}}function se(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const l=r.pop(),s=n.observerSlots.pop();i<r.length&&(l.sourceSlots[s]=i,r[i]=l,n.observerSlots[i]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)se(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)se(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function jt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function at(e,t=C){throw jt(e)}const Ge=Symbol("fallback");function Ue(e){for(let t=0;t<e.length;t++)e[t]()}function Mt(e,t,n={}){let i=[],r=[],l=[],s=[],o=0,a;return it(()=>Ue(l)),()=>{const p=e()||[],m=p.length;return p[Le],I(()=>{if(m===0)return o!==0&&(Ue(l),l=[],i=[],r=[],o=0,s=[]),n.fallback&&(i=[Ge],r[0]=Oe(T=>(l[0]=T,n.fallback())),o=1),r;for(i[0]===Ge&&(l[0](),l=[],i=[],r=[],o=0),a=0;a<m;a++)a<i.length&&i[a]!==p[a]?s[a](()=>p[a]):a>=i.length&&(r[a]=Oe(x));for(;a<i.length;a++)l[a]();return o=s.length=l.length=m,i=p.slice(0),r=r.slice(0,o)});function x(T){l[a]=T;const[D,w]=K(p[a]);return s[a]=w,t(D,a)}}}function f(e,t){return I(()=>e(t||{}))}function Te(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(Mt(()=>e.each,e.children,t||void 0))}function Nt(e,t,n){let i=n.length,r=t.length,l=i,s=0,o=0,a=t[r-1].nextSibling,p=null;for(;s<r||o<l;){if(t[s]===n[o]){s++,o++;continue}for(;t[r-1]===n[l-1];)r--,l--;if(r===s){const m=l<i?o?n[o-1].nextSibling:n[l-o]:a;for(;o<l;)e.insertBefore(n[o++],m)}else if(l===o)for(;s<r;)(!p||!p.has(t[s]))&&t[s].remove(),s++;else if(t[s]===n[l-1]&&n[o]===t[r-1]){const m=t[--r].nextSibling;e.insertBefore(n[o++],t[s++].nextSibling),e.insertBefore(n[--l],m),t[r]=n[l]}else{if(!p){p=new Map;let x=o;for(;x<l;)p.set(n[x],x++)}const m=p.get(t[s]);if(m!=null)if(o<m&&m<l){let x=s,T=1,D;for(;++x<r&&x<l&&!((D=p.get(t[x]))==null||D!==m+T);)T++;if(T>m-o){const w=t[s];for(;o<m;)e.insertBefore(n[o++],w)}else e.replaceChild(n[o++],t[s++])}else s++;else t[s++].remove()}}}const He="_$DX_DELEGATE";function Dt(e,t,n,i={}){let r;return Oe(l=>{r=l,t===document?e():y(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{r(),t.textContent=""}}function $(e,t,n){let i;const r=()=>{const s=document.createElement("template");return s.innerHTML=e,n?s.content.firstChild.firstChild:s.content.firstChild},l=t?()=>I(()=>document.importNode(i||(i=r()),!0)):()=>(i||(i=r())).cloneNode(!0);return l.cloneNode=l,l}function ie(e,t=window.document){const n=t[He]||(t[He]=new Set);for(let i=0,r=e.length;i<r;i++){const l=e[i];n.has(l)||(n.add(l),t.addEventListener(l,It))}}function P(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Bt(e,t){t==null?e.removeAttribute("class"):e.className=t}function ae(e,t,n,i){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function Rt(e,t,n={}){const i=Object.keys(t||{}),r=Object.keys(n);let l,s;for(l=0,s=r.length;l<s;l++){const o=r[l];!o||o==="undefined"||t[o]||(Ke(e,o,!1),delete n[o])}for(l=0,s=i.length;l<s;l++){const o=i[l],a=!!t[o];!o||o==="undefined"||n[o]===a||!a||(Ke(e,o,!0),n[o]=a)}return n}function fe(e,t,n){return I(()=>e(t,n))}function y(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return ve(e,t,i,n);N(r=>ve(e,t(),r,n),i)}function Ke(e,t,n){const i=t.trim().split(/\s+/);for(let r=0,l=i.length;r<l;r++)e.classList.toggle(i[r],n)}function It(e){let t=e.target;const n=`$$${e.type}`,i=e.target,r=e.currentTarget,l=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),s=()=>{const a=t[n];if(a&&!t.disabled){const p=t[`${n}Data`];if(p!==void 0?a.call(t,p,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&l(t.host),!0},o=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();l(a[0]);for(let p=0;p<a.length-2&&(t=a[p],!!s());p++){if(t._$host){t=t._$host,o();break}if(t.parentNode===r)break}}else o();l(i)}function ve(e,t,n,i,r){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,s=i!==void 0;if(e=s&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(l==="number"&&(t=t.toString(),t===n))return n;if(s){let o=n[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=V(e,n,i,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean")n=V(e,n,i);else{if(l==="function")return N(()=>{let o=t();for(;typeof o=="function";)o=o();n=ve(e,o,n,i)}),()=>n;if(Array.isArray(t)){const o=[],a=n&&Array.isArray(n);if(Me(o,t,n,r))return N(()=>n=ve(e,o,n,i,!0)),()=>n;if(o.length===0){if(n=V(e,n,i),s)return n}else a?n.length===0?We(e,o,i):Nt(e,n,o):(n&&V(e),We(e,o));n=o}else if(t.nodeType){if(Array.isArray(n)){if(s)return n=V(e,n,i,t);V(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Me(e,t,n,i){let r=!1;for(let l=0,s=t.length;l<s;l++){let o=t[l],a=n&&n[e.length],p;if(!(o==null||o===!0||o===!1))if((p=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))r=Me(e,o,a)||r;else if(p==="function")if(i){for(;typeof o=="function";)o=o();r=Me(e,Array.isArray(o)?o:[o],Array.isArray(a)?a:[a])||r}else e.push(o),r=!0;else{const m=String(o);a&&a.nodeType===3&&a.data===m?e.push(a):e.push(document.createTextNode(m))}}return r}function We(e,t,n=null){for(let i=0,r=t.length;i<r;i++)e.insertBefore(t[i],n)}function V(e,t,n,i){if(n===void 0)return e.textContent="";const r=i||document.createTextNode("");if(t.length){let l=!1;for(let s=t.length-1;s>=0;s--){const o=t[s];if(r!==o){const a=o.parentNode===e;!l&&!s?a?e.replaceChild(r,o):e.insertBefore(r,n):a&&o.remove()}else l=!0}}else e.insertBefore(r,n);return[r]}const be=Symbol("store-raw"),z=Symbol("store-node"),F=Symbol("store-has"),ct=Symbol("store-self");function ut(e){let t=e[Y];if(!t&&(Object.defineProperty(e,Y,{value:t=new Proxy(e,Gt)}),!Array.isArray(e))){const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let r=0,l=n.length;r<l;r++){const s=n[r];i[s].get&&Object.defineProperty(e,s,{enumerable:i[s].enumerable,get:i[s].get.bind(t)})}}return t}function Z(e){let t;return e!=null&&typeof e=="object"&&(e[Y]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ee(e,t=new Set){let n,i,r,l;if(n=e!=null&&e[be])return n;if(!Z(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,o=e.length;s<o;s++)r=e[s],(i=ee(r,t))!==r&&(e[s]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let a=0,p=s.length;a<p;a++)l=s[a],!o[l].get&&(r=e[l],(i=ee(r,t))!==r&&(e[l]=i))}return e}function $e(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ce(e,t,n){if(e[t])return e[t];const[i,r]=K(n,{equals:!1,internal:!0});return i.$=r,e[t]=i}function qt(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Y||t===z||(delete n.value,delete n.writable,n.get=()=>e[Y][t]),n}function ft(e){je()&&ce($e(e,z),ct)()}function Ft(e){return ft(e),Reflect.ownKeys(e)}const Gt={get(e,t,n){if(t===be)return e;if(t===Y)return n;if(t===Le)return ft(e),n;const i=$e(e,z),r=i[t];let l=r?r():e[t];if(t===z||t===F||t==="__proto__")return l;if(!r){const s=Object.getOwnPropertyDescriptor(e,t);je()&&(typeof l!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(l=ce(i,t,l)())}return Z(l)?ut(l):l},has(e,t){return t===be||t===Y||t===Le||t===z||t===F||t==="__proto__"?!0:(je()&&ce($e(e,F),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Ft,getOwnPropertyDescriptor:qt};function te(e,t,n,i=!1){if(!i&&e[t]===n)return;const r=e[t],l=e.length;n===void 0?(delete e[t],e[F]&&e[F][t]&&r!==void 0&&e[F][t].$()):(e[t]=n,e[F]&&e[F][t]&&r===void 0&&e[F][t].$());let s=$e(e,z),o;if((o=ce(s,t,r))&&o.$(()=>n),Array.isArray(e)&&e.length!==l){for(let a=e.length;a<l;a++)(o=s[a])&&o.$();(o=ce(s,"length",l))&&o.$(e.length)}(o=s[ct])&&o.$()}function dt(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const r=n[i];te(e,r,t[r])}}function Ut(e,t){if(typeof t=="function"&&(t=t(e)),t=ee(t),Array.isArray(t)){if(e===t)return;let n=0,i=t.length;for(;n<i;n++){const r=t[n];e[n]!==r&&te(e,n,r)}te(e,"length",i)}else dt(e,t)}function re(e,t,n=[]){let i,r=e;if(t.length>1){i=t.shift();const s=typeof i,o=Array.isArray(e);if(Array.isArray(i)){for(let a=0;a<i.length;a++)re(e,[i[a]].concat(t),n);return}else if(o&&s==="function"){for(let a=0;a<e.length;a++)i(e[a],a)&&re(e,[a].concat(t),n);return}else if(o&&s==="object"){const{from:a=0,to:p=e.length-1,by:m=1}=i;for(let x=a;x<=p;x+=m)re(e,[x].concat(t),n);return}else if(t.length>1){re(e[i],t,[i].concat(n));return}r=e[i],n=[i].concat(n)}let l=t[0];typeof l=="function"&&(l=l(r,n),l===r)||i===void 0&&l==null||(l=ee(l),i===void 0||Z(r)&&Z(l)&&!Array.isArray(l)?dt(r,l):te(e,i,l))}function pt(...[e,t]){const n=ee(e||{}),i=Array.isArray(n),r=ut(n);function l(...s){B(()=>{i&&s.length===1?Ut(n,s[0]):re(n,s)})}return[r,l]}const xe=new WeakMap,gt={get(e,t){if(t===be)return e;const n=e[t];let i;return Z(n)?xe.get(n)||(xe.set(n,i=new Proxy(n,gt)),i):n},set(e,t,n){return te(e,t,ee(n)),!0},deleteProperty(e,t){return te(e,t,void 0,!0),!0}};function ke(e){return t=>{if(Z(t)){let n;(n=xe.get(t))||xe.set(t,n=new Proxy(t,gt)),e(n)}return t}}const Xe=e=>e.length===0?null:e[e.length-1],Ht=(e,t)=>{let n=0,i=e.length;for(let r=0;r<i;r++)t(e[r])&&n++;return n},Ne=e=>new Promise(t=>setTimeout(t,e)),Kt=()=>({adversary:"level1",machineStarts:!1}),De=()=>[{type:"E",position:9,owner:0},{type:"L",position:10,owner:0},{type:"G",position:11,owner:0},{type:"C",position:7,owner:0},{type:"E",position:2,owner:1},{type:"L",position:1,owner:1},{type:"G",position:0,owner:1},{type:"C",position:4,owner:1}],Wt=()=>({pieces:De(),turn:0,outcome:null,played:[],config:Kt(),isThinking:!1,dialog:null,tutorialStep:null}),ht={C:[[0,1]],H:[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,1]],G:[[0,1],[1,0],[0,-1],[-1,0]],E:[[1,1],[-1,1],[1,-1],[-1,-1]],L:[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,1],[1,-1],[-1,-1]]};function mt(e,t){const n=new Array(12);n.fill(0);for(const o of e)o.position!==null&&(n[o.position]=o.owner+1);if(t.position===null){const o=[];for(let a=0;a<12;a++)n[a]||o.push(a);return o}const i=[],r=t.position%3,l=t.position/3|0,s=ht[t.type];for(const o of s){const[a,p]=t.owner?[o[0],o[1]]:[-o[0],-o[1]],m=r+a,x=l+p;if(m>=0&&m<3&&x>=0&&x<4){let T=3*x+m;n[T]!==t.owner+1&&i.push(T)}}return i}const Xt=(e,t)=>e.owner===t.owner&&e.position===t.position&&e.type===t.type,Jt=(e,t)=>{for(let n=0;n<8;n++)if(!Xt(e[n],t[n]))return!1;return!0},Yt=(e,t)=>Ht(t,n=>Jt(e,n.pieces))>=2,Qt=(e,t)=>{const n=e[t?5:1].position;return n===null?!1:(t&&n>8||!t&&n<3)&&e.every(i=>i.owner===t||!mt(e,i).includes(n))};function Vt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Je=1/0,yt=9007199254740991,zt=17976931348623157e292,Ye=NaN,Zt="[object Function]",en="[object GeneratorFunction]",tn="[object Symbol]",nn=/^\s+|\s+$/g,rn=/^[-+]0x[0-9a-f]+$/i,ln=/^0b[01]+$/i,on=/^0o[0-7]+$/i,sn=/^(?:0|[1-9]\d*)$/,an=parseInt,cn=Object.prototype,vt=cn.toString,un=Math.ceil,fn=Math.max;function dn(e,t,n,i){for(var r=-1,l=fn(un((t-e)/(n||1)),0),s=Array(l);l--;)s[++r]=e,e+=n;return s}function pn(e){return function(t,n,i){return i&&typeof i!="number"&&hn(t,n,i)&&(n=i=void 0),t=Ee(t),n===void 0?(n=t,t=0):n=Ee(n),i=i===void 0?t<n?1:-1:Ee(i),dn(t,n,i)}}function gn(e,t){return t=t??yt,!!t&&(typeof e=="number"||sn.test(e))&&e>-1&&e%1==0&&e<t}function hn(e,t,n){if(!we(n))return!1;var i=typeof t;return(i=="number"?yn(n)&&gn(t,n.length):i=="string"&&t in n)?mn(n[t],e):!1}function mn(e,t){return e===t||e!==e&&t!==t}function yn(e){return e!=null&&bn(e.length)&&!vn(e)}function vn(e){var t=we(e)?vt.call(e):"";return t==Zt||t==en}function bn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yt}function we(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function $n(e){return!!e&&typeof e=="object"}function xn(e){return typeof e=="symbol"||$n(e)&&vt.call(e)==tn}function Ee(e){if(!e)return e===0?e:0;if(e=wn(e),e===Je||e===-Je){var t=e<0?-1:1;return t*zt}return e===e?e:0}function wn(e){if(typeof e=="number")return e;if(xn(e))return Ye;if(we(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=we(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(nn,"");var n=ln.test(e);return n||on.test(e)?an(e.slice(2),n?2:8):rn.test(e)?Ye:+e}var _n=pn(),Sn=_n;const An=Vt(Sn);var Cn=$('<svg><line stroke=red stroke-width=50 class="pointer-events-none animate-lion-arrow"marker-end=url(#arrowhead)></svg>',!1,!0),Tn=$('<div class="w-[42rem] z-20"><svg viewBox="0 0 1600 1680"class="select-none touch-none"><defs><marker id=arrowhead markerWidth=6 markerHeight=4 refX=3 refY=2 orient=auto><polygon points="0 0, 4 2, 0 4"fill=red></polygon></marker></defs><symbol id=twice viewBox="0 0 40 40"><rect x=0 y=0 width=40 height=40 fill=red></rect><text x=20 y=30 fill=white font-size=30px font-weight=bold text-anchor=middle>2</text></symbol><image x=200 y=-500 width=1200 height=2580 href=./board4.webp preserveAspectRatio=xMidYMid>'),kn=$('<svg><symbol viewBox="0 0 50 50"><rect x=0.5 y=0.5 width=49 height=49 rx=5 ry=5 stroke=black stroke-width=1></rect><image x=6 y=6 width=38 height=38></svg>',!1,!0),En=$("<svg><circle r=2 stroke=black fill=red></svg>",!1,!0),Pn=$('<svg><line x1=320 x2=1310 stroke=red stroke-width=5 stroke-dasharray="41.25 41.25"stroke-dashoffset=20.625></svg>',!1,!0),Ln=$('<svg><line y1=200 y2=1500 stroke=red stroke-width=5 stroke-dasharray="40.625 40.625"stroke-dashoffset=20.3125></svg>',!1,!0),On=$("<svg><rect width=310 height=305 stroke-width=20></svg>",!1,!0),jn=$('<svg><use x=-130 y=-130 width=260 height=260 filter="drop-shadow(16px 16px 16px gray)"></svg>',!1,!0),Qe=$("<svg><use href=#twice width=50 height=50></svg>",!1,!0),Mn=$("<svg><use x=-130 y=-130 width=260 height=260 class=pointer-events-none></svg>",!1,!0);const de=320,pe=200,le=330,oe=325,Nn={L:"#fbc0bf",G:"#d6b3d5",E:"#d6b3d5",C:"#f0f4a3",H:"#f0f4a3"},Be={C:0,E:1,G:2,L:3,H:4},Dn=e=>{const t=e.position;let n,i,r;t===null?(n=e.owner?1500:100,i=e.owner?200+200*Be[e.type]:1570-200*Be[e.type],r=.7):(n=de+le/2+le*(t%3),i=pe+oe/2+oe*(t/3|0),r=1);const l=e.owner?"180deg":"0";return`translate(${n}px, ${i}px) rotate(${l}) scale(${r})`},Bn=(e,t)=>{const n=100*e.x,i=100*e.y,r=t.owner?"180deg":"0";return`translate(${n}%, ${i}%) rotate(${r})`},Rn=e=>{const t=L(()=>{const n=e.pieces[e.from],i=470+330*(e.to%3),r=350+325*(e.to/3|0);return n.position===null?{x1:"100",y1:1570-200*Be[n.type],x2:i,y2:r}:{x1:470+330*(n.position%3),y1:350+325*(n.position/3|0),x2:i,y2:r}});return(()=>{var n=Cn();return N(i=>{var r=t().x1,l=t().x2,s=t().y1,o=t().y2;return r!==i.e&&P(n,"x1",i.e=r),l!==i.t&&P(n,"x2",i.t=l),s!==i.a&&P(n,"y1",i.a=s),o!==i.o&&P(n,"y2",i.o=o),i},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()},Ve=e=>{let t;const[n,i]=K(null),[r,l]=K(null),[s,o]=K(null),a=L(()=>n()!==null?mt(e.pieces,e.pieces[n()]):[]),p=b=>e.lastMove&&e.lastMove.includes(b);function m(b){const{left:v,top:W,width:R,height:X}=t.getBoundingClientRect();return{x:(b.clientX-v)/R,y:(b.clientY-W)/X}}const x=(b,v)=>e.pieces[b].owner===v&&e.pieces[b+4].owner===v&&e.pieces[b].position===null&&e.pieces[b+4].position===null&&n()!==b&&n()!==b+4,T=(b,v)=>{!e.canPlay||e.pieces[b].owner!==e.turn||(v.currentTarget&&v.currentTarget.releasePointerCapture(v.pointerId),B(()=>{i(b),l(b),o(m(v))}))},D=b=>{o(m(b))},w=b=>{B(()=>{o(null);const v=n();v!==null&&(i(null),e.play(v,b))}),setTimeout(()=>l(null),500)},S=()=>{B(()=>{o(null),i(null)})};return(()=>{var b=Tn(),v=b.firstChild,W=v.firstChild,R=W.nextSibling,X=R.nextSibling;v.$$pointerup=S,v.addEventListener("pointerleave",S),v.addEventListener("pointercancel",S),v.$$pointermove=D;var c=t;return typeof c=="function"?fe(c,v):t=v,y(v,()=>["L","G","E","C","H"].map(u=>(()=>{var d=kn(),g=d.firstChild,_=g.nextSibling;return P(d,"id",`piece-${u}`),P(_,"href",`./piece-${u}.webp`),y(d,()=>ht[u].map(([k,M])=>(()=>{var E=En();return P(E,"cx",25+20*k),P(E,"cy",25-20*M),E})()),null),N(()=>P(g,"fill",Nn[u])),d})()),X),y(v,()=>[0,1,2,3,4].map(u=>(()=>{var d=Pn();return P(d,"y1",pe+u*oe),P(d,"y2",pe+u*oe),d})()),null),y(v,()=>[0,1,2,3].map(u=>(()=>{var d=Ln();return P(d,"x1",de+u*le),P(d,"x2",de+u*le),d})()),null),y(v,f(Te,{get each(){return An(0,12)},children:u=>(()=>{var d=On();return d.$$pointerup=w,d.$$pointerupData=u(),N(g=>{var _=de+10+le*(u()%3),k=pe+10+oe*(u()/3|0),M=a().includes(u())?"lightgreen":"transparent",E=!a().includes(u()),j=p(u())?"rgba(0, 255, 0, 0.3)":"transparent";return _!==g.e&&P(d,"x",g.e=_),k!==g.t&&P(d,"y",g.t=k),M!==g.a&&P(d,"stroke",g.a=M),E!==g.o&&d.classList.toggle("pointer-events-none",g.o=E),j!==g.i&&P(d,"fill",g.i=j),g},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),d})()}),null),y(v,f(Te,{get each(){return e.pieces},children:(u,d)=>(()=>{var g=jn();return g.$$pointerdown=T,g.$$pointerdownData=d,N(_=>{var k=Dn(u()),M=`#piece-${u().type}`,E={"pointer-events-none":n()!==null,"transition-transform duration-1000":r()!==d,"opacity-0":d===n()&&s()!==null};return k!==_.e&&((_.e=k)!=null?g.style.setProperty("transform",k):g.style.removeProperty("transform")),M!==_.t&&P(g,"href",_.t=M),_.a=Rt(g,E,_.a),_},{e:void 0,t:void 0,a:void 0}),g})()}),null),y(v,f(Te,{each:[3,0,2],children:(u,d)=>[(()=>{var g=Qe();return`translate(140px, ${1610-200*d}px)`!=null?g.style.setProperty("transform",`translate(140px, ${1610-200*d}px)`):g.style.removeProperty("transform"),N(()=>g.classList.toggle("opacity-0",!x(u(),0))),g})(),(()=>{var g=Qe();return`translate(1540px, ${240+200*d}px)`!=null?g.style.setProperty("transform",`translate(1540px, ${240+200*d}px)`):g.style.removeProperty("transform"),N(()=>g.classList.toggle("opacity-0",!x(u(),1))),g})()]}),null),y(v,(()=>{var u=L(()=>!!(s()&&n()!==null));return()=>u()&&(()=>{var d=Mn();return N(g=>{var _=Bn(s(),e.pieces[n()]),k=`#piece-${e.pieces[n()].type}`;return _!==g.e&&((g.e=_)!=null?d.style.setProperty("transform",_):d.style.removeProperty("transform")),k!==g.t&&P(d,"href",g.t=k),g},{e:void 0,t:void 0}),d})()})(),null),y(v,(()=>{var u=L(()=>!!(e.wantedMove&&n()===null));return()=>u()&&f(Rn,{get from(){return e.wantedMove[0]},get to(){return e.wantedMove[1]},get pieces(){return e.pieces}})})(),null),b})()};ie(["pointermove","pointerup","pointerdown"]);var In=()=>{},ze=(e,t)=>t();function qn(e,t){const n=I(e),i=n?[n]:[],{onEnter:r=ze,onExit:l=ze}=t,[s,o]=K(t.appear?[]:i),[a]=Et();let p,m=!1;function x(w,S){if(!w)return S&&S();m=!0,l(w,()=>{B(()=>{m=!1,o(b=>b.filter(v=>v!==w)),S&&S()})})}function T(w){const S=p;if(!S)return w&&w();p=void 0,o(b=>[S,...b]),r(S,w??In)}const D=t.mode==="out-in"?w=>m||x(w,T):t.mode==="in-out"?w=>T(()=>x(w)):w=>{x(w),T()};return St(w=>{const S=e();return I(a)?(a(),w):(S!==w&&(p=S,B(()=>I(()=>D(w)))),S)},t.appear?void 0:n),s}var Ze=e=>e instanceof Element;function Re(e,t){if(t(e))return e;if(typeof e=="function"&&!e.length)return Re(e(),t);if(Array.isArray(e))for(const n of e){const i=Re(n,t);if(i)return i}return null}function Fn(e,t=Ze,n=Ze){const i=L(e);return L(()=>Re(i(),t))}function Gn(e){return L(()=>{const t=e.name||"s";return{enterActive:(e.enterActiveClass||t+"-enter-active").split(" "),enter:(e.enterClass||t+"-enter").split(" "),enterTo:(e.enterToClass||t+"-enter-to").split(" "),exitActive:(e.exitActiveClass||t+"-exit-active").split(" "),exit:(e.exitClass||t+"-exit").split(" "),exitTo:(e.exitToClass||t+"-exit-to").split(" "),move:(e.moveClass||t+"-move").split(" ")}})}function bt(e){requestAnimationFrame(()=>requestAnimationFrame(e))}function Un(e,t,n,i){const{onBeforeEnter:r,onEnter:l,onAfterEnter:s}=t;r?.(n),n.classList.add(...e.enter),n.classList.add(...e.enterActive),queueMicrotask(()=>{if(!n.parentNode)return i?.();l?.(n,()=>o())}),bt(()=>{n.classList.remove(...e.enter),n.classList.add(...e.enterTo),(!l||l.length<2)&&(n.addEventListener("transitionend",o),n.addEventListener("animationend",o))});function o(a){(!a||a.target===n)&&(i?.(),n.removeEventListener("transitionend",o),n.removeEventListener("animationend",o),n.classList.remove(...e.enterActive),n.classList.remove(...e.enterTo),s?.(n))}}function Hn(e,t,n,i){const{onBeforeExit:r,onExit:l,onAfterExit:s}=t;if(!n.parentNode)return i?.();r?.(n),n.classList.add(...e.exit),n.classList.add(...e.exitActive),l?.(n,()=>o()),bt(()=>{n.classList.remove(...e.exit),n.classList.add(...e.exitTo),(!l||l.length<2)&&(n.addEventListener("transitionend",o),n.addEventListener("animationend",o))});function o(a){(!a||a.target===n)&&(i?.(),n.removeEventListener("transitionend",o),n.removeEventListener("animationend",o),n.classList.remove(...e.exitActive),n.classList.remove(...e.exitTo),s?.(n))}}var Kn={inout:"in-out",outin:"out-in"},Wn=e=>{const t=Gn(e);return qn(Fn(()=>e.children),{mode:Kn[e.mode],appear:e.appear,onEnter(n,i){Un(t(),e,n,i)},onExit(n,i){Hn(t(),e,n,i)}})},Xn=$('<span class="text-green-500 font-bold">');const h=e=>(()=>{var t=Xn();return y(t,()=>e.children),t})();var Jn=$('<span class="text-red-500 font-bold">');const q=e=>(()=>{var t=Jn();return y(t,()=>e.children),t})();var Yn=$("<br>");const H={type:"read"},J=[{text:["Bienvenue dans le ",f(h,{children:"tutoriel"}),"!"],action:H},{text:[f(h,{children:"Catch the lion"})," est un jeu à deux joueurs sur un plateau 4x3. Le but est de capturer le ",f(q,{children:"lion"})," adverse."],action:H},{text:["Chaque joueur possède 4 pièces: un ",f(h,{children:"lion"}),", une ",f(h,{children:"girafe"}),", un ",f(h,{children:"éléphant"})," et un ",f(h,{children:"poussin"}),". L'",f(h,{children:"orientation"})," d'une pièce indique à quel joueur elle appartient."],action:H},{text:"Chaque pièce peut se déplacer d'une case dans une des directions indiquées sur la pièce si la case d'arrivée est vide ou si il y a une pièce adverse dessus.",action:H},{text:["Une pièce peut ",f(h,{children:"capturer"})," une pièce adverse en se déplaçant dessus. Essaie de capturer mon ",f(q,{children:"poussin"})," avec ton ",f(h,{children:"poussin"})," en utilisant un ",f(h,{children:"Glisser-déposer"}),"."],action:{type:"playerAction",from:3,to:4}},{text:["Bravo, le poussin adverse fait partie maintenant de ta ",f(h,{children:"réserve"}),". A partir du tour suivant tu pourras le placer sur n'importe quelle case vide."],action:H},{text:"C'est maintenant à moi de jouer",action:{type:"machineAction",from:4,to:4}},{text:["J'ai capturé ton ",f(h,{children:"poussin"})," avec mon ",f(q,{children:"éléphant"}),". Essaie maintenant déplacer le ",f(h,{children:"poussin"})," de ta réserve vers la case indiquée."],action:{type:"playerAction",from:7,to:7}},{text:"Bravo! C'est maintenant à moi de jouer.",action:{type:"machineAction",from:4,to:6}},{text:["Je déplace à nouveau mon ",f(q,{children:"éléphant"}),". Ton ",f(h,{children:"lion"})," est menacé. Capture mon ",f(q,{children:"éléphant"})," avec ton ",f(h,{children:"lion"})," pour parer la menace"],action:{type:"playerAction",from:1,to:6}},{text:"Bravo! Tu as paré la menace! C'est maintenant à moi de jouer.",action:{type:"machineAction",from:6,to:3}},{text:["Je déplace ma ",f(q,{children:"girafe"})," menaçant ton ",f(h,{children:"lion"}),". Tu ne peux pas la capturer car ton lion se ferait capturer au coup suivant. Tu dois donc fuir. Déplace ton ",f(h,{children:"lion"})," vers la case indiquée."],action:{type:"playerAction",from:1,to:10}},{text:"Bravo! C'est maintenant à moi de jouer.",action:{type:"machineAction",from:3,to:6}},{text:["J'ai utilisé le ",f(h,{children:"poussin"})," de ma réserve. Ton ",f(h,{children:"éléphant"})," est bloqué, il va se faire prendre par mon ",f(q,{children:"poussin"}),". Tu ne peux rien faire contre ça. Déplace ta ",f(h,{children:"girafé"})," à la case indiquée."],action:{type:"playerAction",from:2,to:8}},{text:"Bravo! C'est maintenant à moi de jouer.",action:{type:"machineAction",from:3,to:9}},{text:["Mon ",f(q,{children:"poussin"})," est arrivé sur la dernière rangée, il est promu en ",f(q,{children:"poule"}),". Cette poule est très dangereuse vu ses mouvements autorisés. Dépèche-toi de la capturer."],action:{type:"playerAction",from:1,to:9}},{text:["Une fois une ",f(h,{children:"poule"})," capturée, elle redevient un ",f(h,{children:"poussin"}),". Tu ne peux pas directement promouvoir un poussin de la réserve en poule."],action:H},{text:["Tu peux également gagner la partie en emmenant ton ",f(h,{children:"lion"})," sur la dernière rangée.",Yn(),"Le lion ne doit pas pouvoir être immédiatement capturé par l'adversaire."],action:H},{text:["Bravo! Tu as complété le tutoriel! Tu peux commencer à jouer en cliquant sur ",f(h,{children:"Nouvelle partie"}),"."],action:H}];var Qn=$("<div>"),Vn=$('<div class="tooltip -right-5">'),zn=$('<div class="absolute -right-2 flex gap-32"><button class=tutorial-button>Précédent</button><button class=tutorial-button>Suivant');const Pe=[[["Bienvenue sur l'appli ",f(h,{children:"Catch the lion"}),"."],3e3],[[f(h,{children:"Catch the lion"})," connu en japonais sous le nom ",f(h,{children:"Dobutsu Shogi"})," est une variante pour enfants du Shogi."],5e3],[["Le jeu a été entièrement résolu par ordinateur. Il existe ",f(h,{children:"1 567 925 964"})," configurations possibles."],5e3],[["Si les deux joueurs jouent de manière optimale, la victoire est assurée pour le ",f(h,{children:"second"})," joueur."],5e3],[["Pour apprendre les règles, tu peux clicker sur ",f(h,{children:"Tutoriel"}),"."],3e3]],Zn=e=>{const[t,n]=K("");let i=!1;Ct(async()=>{let s=0;for(;;){const o=Pe[s][1];if(n(Pe[s][0]),await Ne(o),n(null),s=(s+1)%Pe.length,i)break;await Ne(1500)}}),it(()=>{i=!0});const r=L(()=>e.tutorialStep!==null?J[e.tutorialStep].text:e.outcome!==null?e.outcome===2?["Oh, cette configuration de pièces a été répétée 3 fois. C'est un ",f(h,{children:"match nul"})]:e.adversary==="human"?`Bravo! Le joueur ${e.outcome+1} a gagné!`:e.outcome===0?["Zut! J'ai perdu! Tu peux changer de difficulté en cliquant sur ",f(h,{children:"Nouvelle partie"})]:["Oh oui! J'ai gagné! Tu peux changer de difficulté en cliquant sur ",f(h,{children:"Nouvelle partie"})]:t()),l=L(()=>e.isThinking?"bg-thinking":e.outcome===2?"bg-surprised":e.outcome!==null&&e.outcome===0&&e.adversary!=="human"?"bg-crying":e.outcome!==null&&(e.outcome===1||e.adversary==="human")?"bg-happy":"bg-speaking");return(()=>{var s=Qn();return y(s,f(Wn,{onEnter:(o,a)=>{o.animate([{opacity:0},{opacity:1}],{duration:500}).finished.then(a)},onExit:(o,a)=>{o.animate([{opacity:1},{opacity:0}],{duration:500}).finished.then(a)},get children(){return L(()=>!!r())()&&(()=>{var o=Vn();return y(o,r),o})()}}),null),y(s,(()=>{var o=L(()=>e.tutorialStep!==null);return()=>o()&&(()=>{var a=zn(),p=a.firstChild,m=p.nextSibling;return ae(p,"click",e.tutorialPred),ae(m,"click",e.tutorialNext),a})()})(),null),N(()=>Bt(s,`z-20 relative w-[15rem] h-[25rem] bg-contain bg-no-repeat ${l()}`)),s})()};ie(["click"]);var ei=$("<div class=dialog-title>Nouvelle partie"),ti=$('<div class="dialog-body grid grid-cols-20/80 gap-8"><div class="text-bold text-lg">Adversaire</div><div class="flex gap-4 text-lg"></div><div class="text-bold text-lg">Qui commence</div><div class="flex gap-4 text-lg">'),ni=$("<div class=dialog-buttons><button class=btn>Annuler</button><button class=btn>OK"),et=$("<button class=togglebtn>");const ii=[["human","Humain"],["level1","Débutant"],["level2","Moyen"],["level3","Difficile"]],ri=e=>{const[t,n]=pt({...e.config});return[ei(),(()=>{var i=ti(),r=i.firstChild,l=r.nextSibling,s=l.nextSibling,o=s.nextSibling;return y(l,()=>ii.map(([a,p])=>(()=>{var m=et();return m.$$click=x=>n("adversary",a),y(m,p),N(()=>m.classList.toggle("toggledbtn",a===t.adversary)),m})())),y(o,()=>[!1,!0].map(a=>(()=>{var p=et();return p.$$click=m=>n("machineStarts",a),y(p,a?"Machine":"Humain"),N(()=>p.classList.toggle("toggledbtn",a===t.machineStarts)),p})())),i})(),(()=>{var i=ni(),r=i.firstChild,l=r.nextSibling;return ae(r,"click",e.closeDialog),l.$$click=e.newGame,l.$$clickData=t,i})()]};ie(["click"]);function li(e){return new Worker(""+new URL("worker-Cq1KnX3e.js",import.meta.url).href,{name:e?.name})}var oi=$("<div class=dialog-title>Règles de Catch the lion"),si=$("<div class=dialog-body><ul><li class=list-disc> est un jeu à deux joueurs sur un plateau 4x3. Le but est de capturer le <!> adverse.</li><li class=list-disc>Chaque joueur possède 4 pièces: un <!>, une <!>, un <!> et un <!>.</li><li class=list-disc>L'<!> d'une pièce indique à quel joueur elle appartient.</li><li class=list-disc>Chaque pièce peut se déplacer d'une case dans une des directions indiquées sur la pièce<br>si la case d'arrivée est vide ou si il y a une pièce adverse dessus.</li><li class=list-disc>Une pièce peut <!> une pièce adverse en se déplaçant dessus.<br>La pièce capturée va dans sa <!> et il peut la place sur n'importe quelle case vide à partir du tour suivant.</li><li class=list-disc>Si un <!> atteind la dernière rangée, il est promu en <!>.<br>Si la poule se fait capturer, elle redevient un poussin.</li><li class=list-disc>Un <!> placé depuis la réserve sur la dernière rangée ne devient pas une poule.</li><li class=list-disc>Tu peux également gagner la partie en emmenant ton <!> sur la dernière rangée.<br>Le lion ne doit pas pouvoir être immédiatement capturé par l'adversaire. "),ai=$("<div class=dialog-buttons><button class=btn>OK");const ci=e=>[oi(),(()=>{var t=si(),n=t.firstChild,i=n.firstChild,r=i.firstChild,l=r.nextSibling;l.nextSibling;var s=i.nextSibling,o=s.firstChild,a=o.nextSibling,p=a.nextSibling,m=p.nextSibling,x=m.nextSibling,T=x.nextSibling,D=T.nextSibling,w=D.nextSibling;w.nextSibling;var S=s.nextSibling,b=S.firstChild,v=b.nextSibling;v.nextSibling;var W=S.nextSibling,R=W.nextSibling,X=R.firstChild,c=X.nextSibling,u=c.nextSibling,d=u.nextSibling,g=d.nextSibling,_=g.nextSibling;_.nextSibling;var k=R.nextSibling,M=k.firstChild,E=M.nextSibling,j=E.nextSibling,ue=j.nextSibling;ue.nextSibling;var Ae=k.nextSibling,$t=Ae.firstChild,Ie=$t.nextSibling;Ie.nextSibling;var qe=Ae.nextSibling,xt=qe.firstChild,Fe=xt.nextSibling;return Fe.nextSibling,y(i,f(h,{children:"Catch the lion"}),r),y(i,f(h,{children:"lion"}),l),y(s,f(h,{children:"lion"}),a),y(s,f(h,{children:"girafe"}),m),y(s,f(h,{children:"éléphant"}),T),y(s,f(h,{children:"poussin"}),w),y(S,f(h,{children:"orientation"}),v),y(R,f(h,{children:"capturer"}),c),y(R,f(h,{children:"réserve"}),_),y(k,f(h,{children:"poussin"}),E),y(k,f(h,{children:"poule"}),ue),y(Ae,f(h,{children:"poussin"}),Ie),y(qe,f(h,{children:"lion"}),Fe),t})(),(()=>{var t=ai(),n=t.firstChild;return ae(n,"click",e.closeDialog),t})()];ie(["click"]);var ui=$("<div class=dialog-title>Règles de Catch the lion"),fi=$("<div class=dialog-body><ul><li class=list-disc> est un jeu de plateau créé par Madoka Kitao et Maiko Fujita.</li><li class=list-disc>L'éditeur du jeu est Nekomado.</li><li class=list-disc>L'application a été écrite par Guillaume Bagan.</li><li class=list-disc>Les différentes images ont été générées par Dall-E.</li><li class=list-disc>Les librairies Solid et Tailwind ont été utilisées."),di=$("<div class=dialog-buttons><button class=btn>OK");const pi=e=>[ui(),(()=>{var t=fi(),n=t.firstChild,i=n.firstChild,r=i.firstChild;return y(i,f(h,{children:"Catch the lion"}),r),t})(),(()=>{var t=di(),n=t.firstChild;return ae(n,"click",e.closeDialog),t})()];ie(["click"]);var gi=$("<audio src=./move.webm preload=auto>"),hi=$("<audio src=./capture.webm preload=auto>"),mi=$('<div class="relative w-screen min-h-screen bg-main bg-cover bg-no-repeat flex flew-row items-center justify-around portrait:flex-col"><div class="absolute bg-white w-full h-full opacity-30 z-10 pointer-events-none"></div><div class="flex flex-col bg-board b-cover p-6 border-2 border-black rounded-xl gap-4 z-20"><div class=text-4xl>Catch the lion</div><button class=btn>Nouvelle partie</button><button class=btn>Annuler</button><button class=btn>Tutoriel</button><button class=btn>Règles</button><button class=btn>Crédits'),yi=$("<dialog class=dialog>");const vi=()=>{let e,t,n;const[i,r]=pt(Wt()),l=()=>{if(i.tutorialStep===null)return null;const c=J[i.tutorialStep].action;return c.type==="playerAction"?[c.from,c.to]:null},s=new li;function o(c){return new Promise(u=>{s.onmessage=function(d){u(d.data)},s.postMessage(c)})}const a=(c,u)=>{const{owner:d,type:g,position:_}=i.pieces[c],k=i.pieces[c].position;B(()=>{const M=i.pieces.map(j=>({...j}));r("played",i.played.length,{pieces:M,move:[k,u]});let E=i.pieces.findIndex(j=>j.position===u);E>=0?(n.play(),r("pieces",E,{position:null,owner:d}),r("pieces",E,"type",j=>j==="H"?"C":j),i.pieces[E].type==="L"&&r("outcome",d)):t.play(),r("pieces",c,"position",u),g==="C"&&_!==null&&(d&&u>8||!d&&u<3)&&r("pieces",c,"type","H"),Qt(i.pieces,i.turn)&&r("outcome",i.turn),Yt(i.pieces,i.played)&&r("outcome",2),r("turn",j=>j===0?1:0)})},p=async()=>{const c={pieces:i.pieces.map(g=>({...g})),turn:i.turn,adversary:i.config.adversary},[[u,d]]=await Promise.all([o(c),Ne(1500)]);B(()=>{r("isThinking",!1),a(u,d)})},m=async(c,u)=>{if(i.config.adversary==="human")a(c,u);else{if(B(()=>{a(c,u),i.outcome===null&&r("isThinking",!0)}),i.outcome!==null)return;await p()}},x=()=>{i.isThinking||r(ke(c=>{if(c.played.length>1){const d=c.played.pop().pieces;c.pieces=d,c.turn=c.turn===0?1:0,c.outcome=null}const u=c.played.length%2===0;if(c.config.adversary!=="human"&&u===c.config.machineStarts){const d=c.played.pop().pieces;c.pieces=d,c.turn=c.turn===0?1:0}}))},T=()=>{r("dialog","newgame"),e.showModal()},D=()=>{r("dialog","rules"),e.showModal()},w=()=>{r("dialog","credits"),e.showModal()},S=()=>{e.close(),r("dialog",null)},b=c=>{r(ke(u=>{u.config={...c},u.pieces=De(),u.played=[],u.outcome=null,u.turn=u.config.machineStarts?1:0,u.isThinking=u.config.machineStarts,u.dialog=null,u.tutorialStep=null})),e.close(),i.config.machineStarts&&p()},v=()=>{r(ke(c=>{c.pieces=De(),c.played=[],c.outcome=null,c.turn=0,c.isThinking=!1,c.dialog=null,c.tutorialStep=0}))},W=()=>{r("tutorialStep",c=>Math.max(0,c-1))},R=()=>{if(i.tutorialStep===null)return;const c=J[i.tutorialStep].action;c.type!=="playerAction"&&B(()=>{c.type==="machineAction"&&a(c.from,c.to),r("tutorialStep",u=>Math.min(J.length-1,u+1))})},X=(c,u)=>{if(console.log(c,u),i.tutorialStep===null)return;const d=J[i.tutorialStep].action;d.type!=="playerAction"||c!==d.from||u!==d.to||B(()=>{a(c,u),r("tutorialStep",g=>Math.min(J.length-1,g+1))})};return[(()=>{var c=gi(),u=t;return typeof u=="function"?fe(u,c):t=c,c})(),(()=>{var c=hi(),u=n;return typeof u=="function"?fe(u,c):n=c,c})(),(()=>{var c=mi(),u=c.firstChild,d=u.nextSibling,g=d.firstChild,_=g.nextSibling,k=_.nextSibling,M=k.nextSibling,E=M.nextSibling,j=E.nextSibling;return _.$$click=T,k.$$click=x,M.$$click=v,E.$$click=D,j.$$click=w,y(c,(()=>{var ue=L(()=>i.tutorialStep===null);return()=>ue()?f(Ve,{get pieces(){return i.pieces},get turn(){return i.turn},get lastMove(){return Xe(i.played)?.move??null},get canPlay(){return!i.isThinking&&i.outcome===null},wantedMove:null,play:m}):f(Ve,{get pieces(){return i.pieces},get turn(){return i.turn},get lastMove(){return Xe(i.played)?.move??null},get canPlay(){return J[i.tutorialStep].action.type==="playerAction"},get wantedMove(){return l()},play:X})})(),null),y(c,f(Zn,{get outcome(){return i.outcome},get isThinking(){return i.isThinking},get adversary(){return i.config.adversary},get tutorialStep(){return i.tutorialStep},tutorialNext:R,tutorialPred:W}),null),c})(),(()=>{var c=yi(),u=e;return typeof u=="function"?fe(u,c):e=c,y(c,(()=>{var d=L(()=>i.dialog==="newgame");return()=>d()?f(ri,{get config(){return i.config},closeDialog:S,newGame:b}):(()=>{var g=L(()=>i.dialog==="rules");return()=>g()?f(ci,{closeDialog:S}):(()=>{var _=L(()=>i.dialog==="credits");return()=>_()?f(pi,{closeDialog:S}):null})()})()})()),c})()]};ie(["click"]);const bi=document.getElementById("root");Dt(()=>f(vi,{}),bi);
